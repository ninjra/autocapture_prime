{
  "backpressure": {
    "hysteresis_s": 10,
    "max_bitrate_kbps": 8000,
    "max_fps": 30,
    "max_queue_depth": 5,
    "max_segment_seconds": 120,
    "max_step_bitrate_kbps": 1000,
    "max_step_fps": 5,
    "min_bitrate_kbps": 1000,
    "min_fps": 5,
    "min_segment_seconds": 30
  },
  "capture": {
    "audio": {
      "blocksize": 44100,
      "channels": 2,
      "device": null,
      "encoding": "wav",
      "enabled": true,
      "ffmpeg_path": "",
      "microphone": true,
      "mode": "auto",
      "queue_max": 8,
      "sample_rate": 44100,
      "system_audio": true
    },
    "cursor": {
      "enabled": false,
      "include_shape": true
    },
    "input_tracking": {
      "flush_interval_ms": 250,
      "mode": "raw",
      "store_derived": true
    },
    "video": {
      "backend": "mss",
      "container": "avi_mjpeg",
      "encoder": "cpu",
      "enabled": true,
      "fps_target": 30,
      "jpeg_quality": 90,
      "monitor_index": 0,
      "resolution": "native",
      "segment_seconds": 60
    },
    "window_metadata": {
      "enabled": true,
      "sample_hz": 5
    }
  },
  "devtools": {
    "ast_ir": {
      "pin_path": "contracts/ir_pins.json"
    },
    "diffusion": {
      "dry_run": true,
      "k_variants": 1
    }
  },
  "gateway": {
    "openai_base_url": ""
  },
  "indexing": {
    "embedder_model": null,
    "qdrant": {
      "binary_path": "vendor/qdrant.exe",
      "collection": "autocapture",
      "health_path": "/healthz",
      "url": "http://localhost:6333"
    },
    "vector_backend": "sqlite"
  },
  "kernel": {
    "required_capabilities": [
      "egress.gateway",
      "privacy.egress_sanitizer",
      "event.builder",
      "storage.metadata",
      "storage.media",
      "storage.entity_map",
      "ledger.writer",
      "journal.writer",
      "anchor.writer",
      "time.intent_parser",
      "retrieval.strategy",
      "answer.builder",
      "citation.validator",
      "runtime.governor",
      "capture.backpressure",
      "observability.logger",
      "devtools.diffusion",
      "devtools.ast_ir"
    ]
  },
  "llm": {
    "model": "sshleifer/tiny-gpt2"
  },
  "models": {
    "reranker_path": null,
    "vlm_path": null
  },
  "observability": {
    "allow_evidence": false,
    "allowlist_keys": [
      "event",
      "level",
      "message"
    ]
  },
  "performance": {
    "ingestion_mb_s": 50,
    "query_latency_ms": 2000,
    "startup_ms": 500
  },
  "retrieval": {
    "limit": 25,
    "vector_limit": 25,
    "fast_threshold": 3,
    "fusion_threshold": 5
  },
  "plugins": {
    "allowlist": [
      "builtin.anchor.basic",
      "builtin.answer.basic",
      "builtin.backpressure.basic",
      "builtin.capture.audio.windows",
      "builtin.capture.stub",
      "builtin.capture.windows",
      "builtin.citation.basic",
      "builtin.devtools.ast_ir",
      "builtin.devtools.diffusion",
      "builtin.egress.gateway",
      "builtin.embedder.stub",
      "builtin.journal.basic",
      "builtin.ledger.basic",
      "builtin.meta.configurator.noop",
      "builtin.meta.policy.noop",
      "builtin.observability.basic",
      "builtin.ocr.stub",
      "builtin.privacy.egress_sanitizer",
      "builtin.processing.sst.pipeline",
      "builtin.processing.sst.ui_vlm",
      "builtin.reranker.stub",
      "builtin.retrieval.basic",
      "builtin.runtime.governor",
      "builtin.storage.encrypted",
      "builtin.storage.sqlcipher",
      "builtin.time.advanced",
      "builtin.tracking.input.windows",
      "builtin.vlm.stub",
      "builtin.window.metadata.windows",
      "mx.core.capture_win",
      "mx.core.compression_and_verify",
      "mx.core.egress_sanitizer",
      "mx.core.embed_local",
      "mx.core.export_import",
      "mx.core.llm_local",
      "mx.core.llm_openai_compat",
      "mx.core.ocr_local",
      "mx.core.retrieval_tiers",
      "mx.core.storage_sqlite",
      "mx.core.vector_local",
      "mx.core.web_ui",
      "mx.prompts.default",
      "mx.research.default",
      "mx.training.default"
    ],
    "default_pack": [
      "builtin.anchor.basic",
      "builtin.answer.basic",
      "builtin.backpressure.basic",
      "builtin.capture.audio.windows",
      "builtin.capture.windows",
      "builtin.citation.basic",
      "builtin.devtools.ast_ir",
      "builtin.devtools.diffusion",
      "builtin.egress.gateway",
      "builtin.embedder.stub",
      "builtin.journal.basic",
      "builtin.ledger.basic",
      "builtin.observability.basic",
      "builtin.ocr.stub",
      "builtin.privacy.egress_sanitizer",
      "builtin.processing.sst.pipeline",
      "builtin.reranker.stub",
      "builtin.retrieval.basic",
      "builtin.runtime.governor",
      "builtin.storage.sqlcipher",
      "builtin.time.advanced",
      "builtin.tracking.input.windows",
      "builtin.vlm.stub",
      "builtin.window.metadata.windows",
      "mx.core.capture_win",
      "mx.core.compression_and_verify",
      "mx.core.egress_sanitizer",
      "mx.core.embed_local",
      "mx.core.export_import",
      "mx.core.llm_local",
      "mx.core.llm_openai_compat",
      "mx.core.ocr_local",
      "mx.core.retrieval_tiers",
      "mx.core.storage_sqlite",
      "mx.core.vector_local",
      "mx.core.web_ui",
      "mx.prompts.default",
      "mx.research.default",
      "mx.training.default"
    ],
    "enabled": {
      "builtin.anchor.basic": true,
      "builtin.answer.basic": true,
      "builtin.backpressure.basic": true,
      "builtin.capture.audio.windows": true,
      "builtin.capture.stub": false,
      "builtin.capture.windows": true,
      "builtin.citation.basic": true,
      "builtin.devtools.ast_ir": true,
      "builtin.devtools.diffusion": true,
      "builtin.egress.gateway": true,
      "builtin.embedder.stub": true,
      "builtin.journal.basic": true,
      "builtin.ledger.basic": true,
      "builtin.meta.configurator.noop": false,
      "builtin.meta.policy.noop": false,
      "builtin.observability.basic": true,
      "builtin.ocr.stub": true,
      "builtin.privacy.egress_sanitizer": true,
      "builtin.processing.sst.pipeline": true,
      "builtin.processing.sst.ui_vlm": false,
      "builtin.reranker.stub": true,
      "builtin.retrieval.basic": true,
      "builtin.runtime.governor": true,
      "builtin.storage.encrypted": false,
      "builtin.storage.sqlcipher": true,
      "builtin.time.advanced": true,
      "builtin.tracking.input.windows": true,
      "builtin.vlm.stub": true,
      "builtin.window.metadata.windows": true
    },
    "hosting": {
      "cache_dir": "data/cache/plugins",
      "inproc_allowlist": [
        "builtin.egress.gateway",
        "builtin.privacy.egress_sanitizer",
        "builtin.storage.sqlcipher",
        "builtin.storage.encrypted",
        "builtin.ledger.basic",
        "builtin.journal.basic",
        "builtin.anchor.basic",
        "builtin.capture.windows",
        "builtin.capture.audio.windows",
        "builtin.tracking.input.windows",
        "builtin.window.metadata.windows",
        "builtin.backpressure.basic",
        "builtin.runtime.governor",
        "builtin.observability.basic",
        "builtin.retrieval.basic",
        "builtin.processing.sst.pipeline",
        "builtin.time.advanced",
        "builtin.answer.basic",
        "builtin.citation.basic",
        "builtin.devtools.diffusion",
        "builtin.devtools.ast_ir"
      ],
      "mode": "subprocess",
      "rpc_max_message_bytes": 2000000,
      "rpc_timeout_s": 10,
      "sanitize_env": true
    },
    "locks": {
      "enforce": true,
      "lockfile": "config/plugin_locks.json"
    },
    "conflicts": {
      "enforce": true,
      "allow_pairs": []
    },
    "meta": {
      "configurator_allowed": [],
      "policy_allowed": []
    },
    "permissions": {
      "network_allowed_plugin_ids": [
        "builtin.egress.gateway"
      ]
    },
    "capabilities": {
      "anchor.writer": {
        "mode": "single",
        "preferred": [
          "builtin.anchor.basic"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "answer.builder": {
        "mode": "single",
        "preferred": [
          "builtin.answer.basic"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "capture.audio": {
        "mode": "single",
        "preferred": [
          "builtin.capture.audio.windows"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "capture.backpressure": {
        "mode": "single",
        "preferred": [
          "builtin.backpressure.basic"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "capture.source": {
        "mode": "single",
        "preferred": [
          "builtin.capture.windows",
          "builtin.capture.stub"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "citation.validator": {
        "mode": "single",
        "preferred": [
          "builtin.citation.basic"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "devtools.ast_ir": {
        "mode": "single",
        "preferred": [
          "builtin.devtools.ast_ir"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "devtools.diffusion": {
        "mode": "single",
        "preferred": [
          "builtin.devtools.diffusion"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "egress.gateway": {
        "mode": "single",
        "preferred": [
          "builtin.egress.gateway"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "embedder.text": {
        "mode": "single",
        "preferred": [
          "builtin.embedder.stub"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "journal.writer": {
        "mode": "single",
        "preferred": [
          "builtin.journal.basic"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "ledger.writer": {
        "mode": "single",
        "preferred": [
          "builtin.ledger.basic"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "observability.logger": {
        "mode": "single",
        "preferred": [
          "builtin.observability.basic"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "ocr.engine": {
        "mode": "multi",
        "preferred": [
          "mx.core.ocr_local",
          "builtin.ocr.stub"
        ],
        "provider_ids": [],
        "fanout": true,
        "max_providers": 8
      },
      "privacy.egress_sanitizer": {
        "mode": "single",
        "preferred": [
          "builtin.privacy.egress_sanitizer"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "reranker": {
        "mode": "single",
        "preferred": [
          "builtin.reranker.stub"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "retrieval.strategy": {
        "mode": "single",
        "preferred": [
          "builtin.retrieval.basic"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "processing.pipeline": {
        "mode": "single",
        "preferred": [
          "builtin.processing.sst.pipeline"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "processing.stage.hooks": {
        "mode": "multi",
        "preferred": [],
        "provider_ids": [],
        "fanout": true,
        "max_providers": 16
      },
      "runtime.governor": {
        "mode": "single",
        "preferred": [
          "builtin.runtime.governor"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "storage.entity_map": {
        "mode": "single",
        "preferred": [
          "builtin.storage.sqlcipher",
          "builtin.storage.encrypted",
          "builtin.storage.memory"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "storage.keyring": {
        "mode": "single",
        "preferred": [
          "builtin.storage.sqlcipher",
          "builtin.storage.encrypted"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "storage.media": {
        "mode": "single",
        "preferred": [
          "builtin.storage.sqlcipher",
          "builtin.storage.encrypted",
          "builtin.storage.memory"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "storage.metadata": {
        "mode": "single",
        "preferred": [
          "builtin.storage.sqlcipher",
          "builtin.storage.encrypted",
          "builtin.storage.memory"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "time.intent_parser": {
        "mode": "single",
        "preferred": [
          "builtin.time.advanced"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "tracking.input": {
        "mode": "single",
        "preferred": [
          "builtin.tracking.input.windows"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      },
      "vision.extractor": {
        "mode": "multi",
        "preferred": [
          "builtin.vlm.stub"
        ],
        "provider_ids": [],
        "fanout": true,
        "max_providers": 8
      },
      "window.metadata": {
        "mode": "single",
        "preferred": [
          "builtin.window.metadata.windows"
        ],
        "provider_ids": [],
        "fanout": false,
        "max_providers": 1
      }
    },
    "safe_mode": false,
    "search_paths": [
      "autocapture_plugins"
    ]
  },
  "privacy": {
    "cloud": {
      "allow_images": false,
      "enabled": false
    },
    "egress": {
      "allow_raw_egress": false,
      "default_sanitize": true,
      "enabled": true,
      "reasoning_packet_only": true,
      "recognizers": {
        "credit_card": true,
        "custom_regex": [],
        "email": true,
        "filepath": true,
        "ipv4": true,
        "names": true,
        "phone": true,
        "ssn": true,
        "url": true
      },
      "token_format": "\u27e6ENT:{type}:{token}\u27e7",
      "token_scope": "per_provider"
    }
  },
  "promptops": {
    "banned_patterns": [
      "http://",
      "https://",
      "curl ",
      "wget ",
      "Invoke-WebRequest",
      "os.system",
      "subprocess"
    ],
    "bundle_name": "default",
    "enabled": true,
    "examples": {},
    "github": {
      "body": "Automated prompt update.",
      "enabled": false,
      "output_path": "artifacts/promptops_pr.json",
      "title": "PromptOps update"
    },
    "history": {
      "enabled": true,
      "include_prompt": false
    },
    "max_chars": 8000,
    "max_tokens": 2000,
    "min_pass_rate_pct": 100,
    "mode": "auto_apply",
    "persist_prompts": false,
    "query_strategy": "none",
    "require_citations": true,
    "sources": [],
    "strategy": "append_sources"
  },
  "processing": {
    "idle": {
      "auto_start": true,
      "enabled": true,
      "extractors": {
        "ocr": true,
        "vlm": true
      },
      "max_concurrency_cpu": 2,
      "max_concurrency_gpu": 1,
      "max_items_per_run": 20,
      "max_seconds_per_run": 30,
      "sleep_ms": 2000
    },
    "on_query": {
      "allow_decode_extract": false,
      "extractors": {
        "ocr": true,
        "vlm": false
      },
      "max_window_minutes": 120,
      "require_idle": true
    },
    "sst": {
      "enabled": true,
      "strip_alpha": true,
      "phash_size": 8,
      "phash_downscale": 32,
      "d_stable": 4,
      "d_boundary": 12,
      "diff_threshold_bp": 1800,
      "segment_downscale_px": 64,
      "heavy_on_boundary": true,
      "heavy_always": false,
      "tile_max_px": 1024,
      "tile_overlap_px": 64,
      "tile_add_full_frame": true,
      "ocr_min_conf_bp": 3500,
      "ocr_nms_iou_bp": 7000,
      "ocr_max_tokens": 4000,
      "ocr_max_patches": 64,
      "layout_line_y_px": 12,
      "layout_block_gap_px": 28,
      "layout_align_tol_px": 48,
      "table_min_rows": 2,
      "table_min_cols": 2,
      "table_max_cells": 2500,
      "table_row_gap_px": 18,
      "table_col_gap_px": 36,
      "sheet_header_scan_rows": 2,
      "code_min_keywords": 1,
      "chart_min_ticks": 2,
      "ui_vlm": {
        "enabled": false,
        "max_providers": 1
      },
      "delta_bbox_shift_px": 24,
      "delta_table_match_iou_bp": 3000,
      "redact_enabled": true,
      "redact_denylist": [],
      "stage_providers": {
        "ingest.frame": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "preprocess.normalize": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "preprocess.tile": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "ocr.onnx": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "vision.vlm": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "layout.assemble": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "extract.table": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "extract.spreadsheet": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "extract.code": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "extract.chart": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "ui.parse": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "track.cursor": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "build.state": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "match.ids": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "build.delta": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "infer.action": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "compliance.redact": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "persist.bundle": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        },
        "index.text": {
          "enabled": true,
          "provider_ids": [],
          "fanout": true,
          "max_providers": 0
        }
      },
      "schema_version": 1
    }
  },
  "profile": "justin_full_fidelity",
  "research": {
    "cache_dir": "data/research/cache",
    "enabled": true,
    "interval_s": 1800,
    "report_dir": "data/research/reports",
    "run_on_idle": true,
    "source_name": "default",
    "sources": [],
    "threshold_pct": 10,
    "watchlist": {
      "tags": []
    },
    "watchlist_name": "default"
  },
  "runtime": {
    "active_window_s": 3,
    "activity": {
      "assume_idle_when_missing": false
    },
    "budgets": {
      "allow_heavy_during_active": false,
      "max_heavy_concurrency": 1,
      "max_jobs_per_window": 4,
      "min_idle_seconds": 45,
      "per_job_max_ms": 2500,
      "preempt_grace_ms": 150,
      "window_budget_ms": 8000,
      "window_s": 120
    },
    "gpu": {
      "release_vram_deadline_ms": 250,
      "release_vram_on_active": true
    },
    "idle_window_s": 45,
    "mode_enforcement": {
      "suspend_deadline_ms": 100,
      "suspend_workers": true
    },
    "telemetry": {
      "emit_interval_s": 5,
      "enabled": true
    },
    "timezone": "America/Denver"
  },
  "schema_version": 1,
  "storage": {
    "anchor": {
      "path": "data_anchor/anchors.ndjson",
      "use_dpapi": true
    },
    "blob_dir": "data/blobs",
    "crypto": {
      "backend": "aesgcm",
      "keyring_path": "data/vault/keyring.json",
      "root_key_path": "data/vault/root.key"
    },
    "data_dir": "data",
    "disk_pressure": {
      "critical_free_gb": 50,
      "interval_s": 3600,
      "soft_free_gb": 100,
      "warn_free_gb": 200
    },
    "fsync_policy": "critical",
    "encryption_required": true,
    "entity_map": {
      "persist": true
    },
    "forecast": {
      "enabled": true,
      "warn_days": 14
    },
    "lexical_path": "data/lexical.db",
    "media_dir": "data/media",
    "metadata_path": "data/metadata.db",
    "retention": {
      "evidence": "infinite"
    },
    "spool_dir": "data/spool",
    "vector_path": "data/vector.db"
  },
  "time": {
    "dst_tie_breaker": "earliest",
    "relative_window_max_days": 30,
    "timezone": "America/Denver"
  }
}

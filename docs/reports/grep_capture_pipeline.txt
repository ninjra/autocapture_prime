# rg -n /capture/
./README.md:1:# Autocapture Prime
./README.md:3:Plugin-forward kernel and baseline plugins for Autocapture NX.
./README.md:7:python3 -m autocapture_nx doctor
./README.md:8:python3 -m autocapture_nx config show
./pyproject.toml:6:name = "autocapture_nx"
./pyproject.toml:8:description = "Autocapture NX plugin-forward kernel"
./pyproject.toml:30:autocapture = "autocapture_nx.cli:main"
./pyproject.toml:37:  "autocapture",
./pyproject.toml:38:  "autocapture.config",
./pyproject.toml:39:  "autocapture.core",
./pyproject.toml:40:  "autocapture.codex",
./pyproject.toml:41:  "autocapture.tools",
./pyproject.toml:42:  "autocapture.plugins",
./pyproject.toml:43:  "autocapture.memory",
./pyproject.toml:44:  "autocapture.ux",
./pyproject.toml:45:  "autocapture.runtime",
./pyproject.toml:46:  "autocapture.storage",
./pyproject.toml:47:  "autocapture.pillars",
./pyproject.toml:48:  "autocapture.capture",
./pyproject.toml:49:  "autocapture.ingest",
./pyproject.toml:50:  "autocapture.indexing",
./pyproject.toml:51:  "autocapture.retrieval",
./pyproject.toml:52:  "autocapture.web",
./pyproject.toml:53:  "autocapture.gateway",
./pyproject.toml:54:  "autocapture.promptops",
./pyproject.toml:55:  "autocapture.training",
./pyproject.toml:56:  "autocapture.research",
./pyproject.toml:57:  "autocapture.rules",
./pyproject.toml:58:  "autocapture_nx",
./pyproject.toml:59:  "autocapture_nx.kernel",
./pyproject.toml:60:  "autocapture_nx.plugin_system",
./pyproject.toml:61:  "autocapture_nx.windows",
./pyproject.toml:64:[tool.autocapture]
./tools/run_all_tests.ps1:159:Invoke-Python -Step "doctor" -PyArgs @("-m", "autocapture_nx", "doctor")
./tools/run_all_tests.ps1:160:Invoke-Python -Step "doctor_safe_mode" -PyArgs @("-m", "autocapture_nx", "--safe-mode", "doctor")
./tools/frozen_surfaces.py:19:from autocapture.core.hashing import canonical_dumps, hash_canonical
./tools/frozen_surfaces.py:20:from autocapture_nx.kernel.canonical_json import dumps as nx_canonical_dumps
./tools/frozen_surfaces.py:21:from autocapture_nx.kernel.hashing import sha256_file
./tools/frozen_surfaces.py:22:from autocapture_nx.plugin_system.api import PluginContext
./autocapture_plugins/mx.training.default.yaml:9:    factory: autocapture.training.pipelines:create_training_pipeline
./tests/test_work_leases.py:4:from autocapture.runtime.leases import LeaseManager
./contracts/user_surface.md:4:The baseline user-visible interface is the `autocapture` CLI.
./contracts/user_surface.md:7:- `autocapture doctor`
./contracts/user_surface.md:9:- `autocapture config show`
./contracts/user_surface.md:11:- `autocapture config reset`
./contracts/user_surface.md:13:- `autocapture config restore`
./contracts/user_surface.md:15:- `autocapture plugins list`
./contracts/user_surface.md:17:- `autocapture plugins approve`
./contracts/user_surface.md:19:- `autocapture run`
./contracts/user_surface.md:20:  - Starts capture, audio, input, and window metadata pipelines.
./contracts/user_surface.md:21:- `autocapture query "<text>"`
./contracts/user_surface.md:23:- `autocapture devtools diffusion --axis <name> [-k N] [--dry-run]`
./contracts/user_surface.md:25:- `autocapture devtools ast-ir [--scan-root <path>]`
./contracts/user_surface.md:27:- `autocapture keys rotate`
./autocapture/__init__.py:1:"""Autocapture MX package (additive to NX)."""
./tests/test_models.py:3:from autocapture_nx.plugin_system.api import PluginContext
./tools/blueprint_items.json:69:    "title": "Add performance regression tests (capture latency/memory/query latency)",
./tools/blueprint_items.json:117:    "title": "Make backpressure actually affect capture rate",
./tools/blueprint_items.json:197:    "title": "Align default config with implemented capture backend",
./tools/blueprint_items.json:293:    "title": "Split capture into grab \u2192 encode/pack \u2192 encrypt/write pipeline",
./tools/blueprint_items.json:317:    "title": "Add GPU-accelerated capture/encode backend (NVENC/DD)",
./tools/blueprint_items.json:333:    "title": "Record capture parameters per segment",
./tools/blueprint_items.json:357:    "title": "Disk pressure degrades capture quality before stopping",
./tools/blueprint_items.json:397:    "title": "Add WASAPI loopback option for system audio capture",
./tools/blueprint_items.json:429:    "title": "Optional cursor position+shape capture",
./tools/blueprint_items.json:1021:    "title": "Clipboard capture plugin (local-only, append-only)",
./tools/blueprint_items.json:1029:    "title": "File activity capture plugin (USN journal / watcher)",
./tests/test_windows_plugins.py:4:from autocapture_nx.plugin_system.api import PluginContext
./tests/test_windows_plugins.py:5:from plugins.builtin.capture_windows.plugin import CaptureWindows
./tests/test_windows_plugins.py:13:    def test_capture_requires_windows(self):
./autocapture_plugins/mx.research.default.yaml:9:    factory: autocapture.research.scout:create_research_source
./autocapture_plugins/mx.research.default.yaml:38:    factory: autocapture.research.scout:create_watchlist
./tests/test_metrics_endpoint_exposes_counters.py:5:from autocapture.web.api import get_app
./tools/run_all_tests.py:21:        [py, "-m", "autocapture_nx", "doctor"],
./tools/run_all_tests.py:22:        [py, "-m", "autocapture_nx", "--safe-mode", "doctor"],
./tools/hypervisor/hypervisor.py:29:    result = subprocess.run(cmd, cwd=cwd, capture_output=True, text=True, env=env)
./tools/hypervisor/hypervisor.py:52:            "import time; from autocapture_nx.kernel.loader import Kernel, default_config_paths; "
./tools/hypervisor/hypervisor.py:67:    code, _output = _run_cmd([sys.executable, "-m", "autocapture_nx", "doctor"], cwd=cwd)
./tests/test_verifier_enforced.py:3:from autocapture.memory.verifier import Verifier
./tests/test_ledger_journal.py:5:from autocapture_nx.plugin_system.api import PluginContext
./tests/test_ledger_journal.py:33:                "stage": "capture",
./tests/test_ledger_journal.py:43:                "stage": "capture",
./autocapture_plugins/mx.prompts.default.yaml:9:    factory: autocapture.promptops.sources:create_prompt_bundle
./ops/dev/common.env.example:5:# Example: DEV_BACKEND_CMD="python -m autocapture_nx run"
./docs/windows_setup.md:3:This project expects Windows 11 + RTX 4090 and local models stored under `D:\autocapture\models`.
./docs/windows_setup.md:16:- `D:\autocapture\models\ocr`
./docs/windows_setup.md:17:- `D:\autocapture\models\vlm`
./docs/windows_setup.md:18:- `D:\autocapture\models\embeddings`
./docs/windows_setup.md:19:- `D:\autocapture\models\reranker`
./contracts/security.md:28:- `autocapture keys rotate` records a ledger entry and rewraps stores.
./tools/hypervisor/DECISIONS.md:28:- Decision: store root keys in a DPAPI-protected keyring file and rotate via `autocapture keys rotate`.
./tests/test_vendor_binaries_hashcheck.py:4:from autocapture.tools.vendor_windows_binaries import verify_binaries
./tests/test_key_rotation.py:6:from autocapture_nx.kernel.config import ConfigPaths, load_config
./tests/test_key_rotation.py:7:from autocapture_nx.kernel.key_rotation import rotate_keys
./tests/test_key_rotation.py:8:from autocapture_nx.kernel.loader import Kernel
./tests/test_key_rotation.py:33:                        "builtin.capture.windows": False,
./tests/test_key_rotation.py:34:                        "builtin.capture.audio.windows": False,
./autocapture_plugins/mx.core.web_ui.yaml:9:    factory: autocapture.web.api:create_ui_panel
./autocapture_plugins/mx.core.web_ui.yaml:38:    factory: autocapture.web.api:create_ui_overlay
./tools/hypervisor/scripts/update_contract_lock.py:9:from autocapture_nx.kernel.hashing import sha256_file
./docs/STATE.md:7:- Directories: .git, autocapture_nx/, plugins/, tools/, tests/, config/, contracts/, docs/
./docs/STATE.md:10:- Entrypoints: `autocapture` CLI (via `autocapture_nx.cli`)
./docs/STATE.md:13:- Requirements source: docs/autocapture_nx_blueprint_final.md
./docs/STATE.md:16:- CLI commands defined in `contracts/user_surface.md` (includes `autocapture keys rotate`)
./docs/STATE.md:20:- Windows 11 capture/audio/input/window metadata plugins implemented, but not validated in this environment. (Windows tests pending)
./docs/STATE.md:22:- Keyring + rotation implemented via `autocapture keys rotate` with ledger + anchor entries.
./docs/STATE.md:28:- Model plugins require local weights at `D:\\autocapture\\models` and optional dependencies.
./docs/STATE.md:29:- OS-specific capture and vault integration not validated in this environment.
./tests/test_vector_index_roundtrip.py:5:from autocapture.indexing.vector import VectorIndex, LocalEmbedder
./tools/hypervisor/scripts/update_plugin_locks.py:9:from autocapture_nx.kernel.hashing import sha256_directory, sha256_file
./tests/test_key_export_import_roundtrip.py:5:from autocapture.storage.keys import export_keys, import_keys
./tests/test_key_export_import_roundtrip.py:6:from autocapture_nx.kernel.keyring import KeyRing
./tests/test_contract_pins.py:5:from autocapture_nx.kernel.hashing import sha256_file
./autocapture_plugins/mx.core.vector_local.yaml:9:    factory: autocapture.indexing.vector:create_vector_backend
./tests/test_ux_facade_parity.py:3:from autocapture.ux.facade import create_facade
./tests/test_ux_facade_parity.py:4:from autocapture.ux.settings_schema import get_schema
./contracts/plugin_sdk.md:4:Autocapture NX is plugin-forward. The kernel only loads config, enforces policy, and composes capabilities.
./contracts/plugin_sdk.md:38:- `capture.source`
./contracts/plugin_sdk.md:39:- `capture.audio`
./contracts/plugin_sdk.md:48:- `capture.backpressure`
./plugins/builtin/window_metadata_windows/plugin.py:11:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/window_metadata_windows/plugin.py:12:from autocapture_nx.windows.win_window import active_window
./plugins/builtin/window_metadata_windows/plugin.py:30:            raise RuntimeError("Window metadata capture supported on Windows only")
./plugins/builtin/window_metadata_windows/plugin.py:45:        window_cfg = self.context.config.get("capture", {}).get("window_metadata", {})
./plugins/builtin/ledger_basic/plugin.py:10:from autocapture_nx.kernel.canonical_json import dumps
./plugins/builtin/ledger_basic/plugin.py:11:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./tests/test_fts_query_returns_hits.py:5:from autocapture.indexing.lexical import LexicalIndex
./tests/test_ids_stable.py:3:from autocapture.core.ids import stable_id, stable_id_from_text
./autocapture/research/scout.py:8:from autocapture.core.hashing import hash_canonical
./autocapture/research/scout.py:9:from autocapture.research.cache import ResearchCache
./autocapture/research/scout.py:10:from autocapture.research.diff import diff_with_threshold
./plugins/builtin/runtime_governor/plugin.py:7:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./tests/test_context_pack_formats.py:3:from autocapture.memory.context_pack import build_context_pack
./tests/test_training_manifest_schema.py:3:from autocapture.core.hashing import hash_canonical
./tests/test_training_manifest_schema.py:4:from autocapture.training.datasets import dataset_from_items
./tests/test_training_manifest_schema.py:5:from autocapture.training.pipelines import TrainingPipeline
./autocapture_plugins/mx.core.storage_sqlite.yaml:9:    factory: autocapture.storage.blob_store:create_blob_store
./autocapture_plugins/mx.core.storage_sqlite.yaml:38:    factory: autocapture.storage.media_store:create_media_store
./autocapture_plugins/mx.core.storage_sqlite.yaml:67:    factory: autocapture.ingest.spans:create_span_store
./tests/test_hashing_canonical.py:3:from autocapture.core.hashing import CanonicalJSONError, canonical_dumps, hash_canonical
./docs/spec/README.md:5:- `autocapture_nx_blueprint_2026-01-24.md`: minimal structured spec placeholder (all unspecified values remain `[MISSING_VALUE]`).
./tests/test_conflict_reporting.py:3:from autocapture.memory.conflict import detect_conflicts
./tests/test_time_parser.py:4:from autocapture_nx.plugin_system.api import PluginContext
./tests/test_export_import_roundtrip.py:5:from autocapture.storage.archive import create_archive, verify_archive, Importer
./tests/test_graph_adapter_contract.py:3:from autocapture.indexing.graph import GraphAdapter
./autocapture_plugins/mx.core.retrieval_tiers.yaml:9:    factory: autocapture.retrieval.tiers:create_retrieval_strategy
./autocapture_plugins/mx.core.retrieval_tiers.yaml:38:    factory: autocapture.retrieval.rerank:create_reranker
./tests/test_config_defaults.py:3:from autocapture.config.defaults import default_config_paths
./tests/test_config_defaults.py:4:from autocapture.config.load import load_config
./tests/test_tier_planner_escalation.py:5:from autocapture.indexing.lexical import LexicalIndex
./tests/test_tier_planner_escalation.py:6:from autocapture.indexing.vector import VectorIndex, LocalEmbedder
./tests/test_tier_planner_escalation.py:7:from autocapture.retrieval.rerank import Reranker
./tests/test_tier_planner_escalation.py:8:from autocapture.retrieval.tiers import TieredRetriever
./tests/test_entity_hashing_stable.py:6:from autocapture.memory.entities import build_hasher
./tests/test_entity_hashing_stable.py:7:from autocapture.config.load import load_config
./tests/test_entity_hashing_stable.py:8:from autocapture.config.models import ConfigPaths
./tests/test_governor_gating.py:3:from autocapture.runtime.governor import RuntimeGovernor
./tests/test_governor_gating.py:4:from autocapture.runtime.scheduler import Scheduler, Job
./docs/spec/autocapture_nx_blueprint_2026-01-24.md:1:Source_Document: docs/spec/autocapture_nx_blueprint_2026-01-24.md
./tests/test_config.py:7:from autocapture_nx.kernel.config import ConfigPaths, load_config, reset_user_config, restore_user_config
./autocapture_plugins/mx.core.ocr_local.yaml:9:    factory: autocapture.ingest.normalizer:create_ocr_engine
./plugins/builtin/journal_basic/plugin.py:8:from autocapture_nx.kernel.canonical_json import dumps
./plugins/builtin/journal_basic/plugin.py:9:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/vlm_stub/plugin.py:8:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/vlm_stub/plugin.py:26:        model_path = os.path.join("D:\\autocapture", "models", "vlm")
./tests/test_table_extractor_strategies.py:4:from autocapture.ingest.table_extractor import TableExtractor
./tests/test_gateway_schema_enforced.py:5:from autocapture.gateway.app import get_app
./tests/test_egress_gateway.py:6:from autocapture_nx.kernel.config import ConfigPaths, SchemaLiteValidator, load_config
./tests/test_egress_gateway.py:7:from autocapture_nx.plugin_system.api import PluginContext
./plugins/builtin/retrieval_basic/plugin.py:8:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./tests/test_citation_validation.py:3:from autocapture.memory.citations import Citation, CitationValidator
./docs/spec/autocapture_mx_spec.yaml:2:blueprint_id: autocapture_mx_blueprint_2026_01_25
./docs/spec/autocapture_mx_spec.yaml:10:      - autocapture/config/models.py
./docs/spec/autocapture_mx_spec.yaml:11:      - autocapture/config/load.py
./docs/spec/autocapture_mx_spec.yaml:12:      - autocapture/config/defaults.py
./docs/spec/autocapture_mx_spec.yaml:15:        target: autocapture.config.load:load_config
./docs/spec/autocapture_mx_spec.yaml:24:      - autocapture/ux/facade.py
./docs/spec/autocapture_mx_spec.yaml:25:      - autocapture/web/api.py
./docs/spec/autocapture_mx_spec.yaml:28:        command: ["autocapture", "--help"]
./docs/spec/autocapture_mx_spec.yaml:43:      - autocapture/core/hashing.py
./docs/spec/autocapture_mx_spec.yaml:44:      - autocapture/core/ids.py
./docs/spec/autocapture_mx_spec.yaml:45:      - autocapture/core/jsonschema.py
./docs/spec/autocapture_mx_spec.yaml:56:      - autocapture/plugins/manifest.py
./docs/spec/autocapture_mx_spec.yaml:57:      - autocapture/plugins/manager.py
./docs/spec/autocapture_mx_spec.yaml:58:      - autocapture/plugins/kinds.py
./docs/spec/autocapture_mx_spec.yaml:61:        target: autocapture.plugins.manager:PluginManager
./docs/spec/autocapture_mx_spec.yaml:63:        target: autocapture.plugins.manifest:ExtensionManifest
./docs/spec/autocapture_mx_spec.yaml:67:        command: ["autocapture", "plugins", "list", "--json"]
./docs/spec/autocapture_mx_spec.yaml:75:      - autocapture/plugins/kinds.py
./docs/spec/autocapture_mx_spec.yaml:85:      - autocapture_plugins/
./docs/spec/autocapture_mx_spec.yaml:89:          - mx.core.capture_win
./docs/spec/autocapture_mx_spec.yaml:106:          - capture.source
./docs/spec/autocapture_mx_spec.yaml:107:          - capture.encoder
./docs/spec/autocapture_mx_spec.yaml:131:        command: ["autocapture", "plugins", "verify-defaults"]
./docs/spec/autocapture_mx_spec.yaml:138:      - autocapture/plugins/manager.py
./docs/spec/autocapture_mx_spec.yaml:147:      - autocapture/plugins/manager.py
./docs/spec/autocapture_mx_spec.yaml:148:      - autocapture/plugins/policy_gate.py
./docs/spec/autocapture_mx_spec.yaml:157:      - autocapture/plugins/policy_gate.py
./docs/spec/autocapture_mx_spec.yaml:158:      - autocapture/core/http.py
./docs/spec/autocapture_mx_spec.yaml:161:        target: autocapture.plugins.policy_gate:PolicyGate
./docs/spec/autocapture_mx_spec.yaml:169:      - autocapture/memory/entities.py
./docs/spec/autocapture_mx_spec.yaml:170:      - autocapture/ux/redaction.py
./docs/spec/autocapture_mx_spec.yaml:181:      - autocapture/runtime/governor.py
./docs/spec/autocapture_mx_spec.yaml:182:      - autocapture/runtime/activity.py
./docs/spec/autocapture_mx_spec.yaml:183:      - autocapture/runtime/scheduler.py
./docs/spec/autocapture_mx_spec.yaml:184:      - autocapture/runtime/budgets.py
./docs/spec/autocapture_mx_spec.yaml:193:      - autocapture/runtime/leases.py
./docs/spec/autocapture_mx_spec.yaml:202:      - autocapture/storage/database.py
./docs/spec/autocapture_mx_spec.yaml:203:      - autocapture/storage/sqlcipher.py
./docs/spec/autocapture_mx_spec.yaml:204:      - autocapture/storage/keys.py
./docs/spec/autocapture_mx_spec.yaml:205:      - autocapture/storage/media_store.py
./docs/spec/autocapture_mx_spec.yaml:206:      - autocapture/storage/blob_store.py
./docs/spec/autocapture_mx_spec.yaml:219:      - autocapture/pillars/citable.py
./docs/spec/autocapture_mx_spec.yaml:220:      - autocapture/core/hashing.py
./docs/spec/autocapture_mx_spec.yaml:221:      - autocapture/storage/archive.py
./docs/spec/autocapture_mx_spec.yaml:226:        command: ["autocapture", "provenance", "verify"]
./docs/spec/autocapture_mx_spec.yaml:234:      - autocapture/rules/ledger.py
./docs/spec/autocapture_mx_spec.yaml:235:      - autocapture/rules/store.py
./docs/spec/autocapture_mx_spec.yaml:236:      - autocapture/rules/schema.py
./docs/spec/autocapture_mx_spec.yaml:237:      - autocapture/rules/cli.py
./docs/spec/autocapture_mx_spec.yaml:248:      - autocapture/capture/spool.py
./docs/spec/autocapture_mx_spec.yaml:249:      - autocapture/capture/pipelines.py
./docs/spec/autocapture_mx_spec.yaml:250:      - autocapture/capture/models.py
./docs/spec/autocapture_mx_spec.yaml:253:        target: tests/test_capture_spool_idempotent.py
./docs/spec/autocapture_mx_spec.yaml:259:      - autocapture/ingest/normalizer.py
./docs/spec/autocapture_mx_spec.yaml:260:      - autocapture/ingest/spans.py
./docs/spec/autocapture_mx_spec.yaml:271:      - autocapture/plugins/kinds.py
./docs/spec/autocapture_mx_spec.yaml:280:      - autocapture/indexing/lexical.py
./docs/spec/autocapture_mx_spec.yaml:289:      - autocapture/indexing/vector.py
./docs/spec/autocapture_mx_spec.yaml:298:      - autocapture/indexing/vector.py
./docs/spec/autocapture_mx_spec.yaml:299:      - autocapture/tools/vendor_windows_binaries.py
./docs/spec/autocapture_mx_spec.yaml:308:      - autocapture/indexing/graph.py
./docs/spec/autocapture_mx_spec.yaml:317:      - autocapture/retrieval/tiers.py
./docs/spec/autocapture_mx_spec.yaml:318:      - autocapture/retrieval/fusion.py
./docs/spec/autocapture_mx_spec.yaml:319:      - autocapture/retrieval/rerank.py
./docs/spec/autocapture_mx_spec.yaml:320:      - autocapture/retrieval/signals.py
./docs/spec/autocapture_mx_spec.yaml:331:      - autocapture/memory/context_pack.py
./docs/spec/autocapture_mx_spec.yaml:332:      - autocapture/retrieval/signals.py
./docs/spec/autocapture_mx_spec.yaml:341:      - autocapture/memory/answer_orchestrator.py
./docs/spec/autocapture_mx_spec.yaml:342:      - autocapture/memory/citations.py
./docs/spec/autocapture_mx_spec.yaml:343:      - autocapture/memory/verifier.py
./docs/spec/autocapture_mx_spec.yaml:344:      - autocapture/memory/conflict.py
./docs/spec/autocapture_mx_spec.yaml:357:      - autocapture/gateway/app.py
./docs/spec/autocapture_mx_spec.yaml:358:      - autocapture/gateway/router.py
./docs/spec/autocapture_mx_spec.yaml:359:      - autocapture/gateway/schemas.py
./docs/spec/autocapture_mx_spec.yaml:370:      - autocapture/ux/facade.py
./docs/spec/autocapture_mx_spec.yaml:371:      - autocapture/ux/models.py
./docs/spec/autocapture_mx_spec.yaml:374:        target: autocapture.ux.facade:UXFacade
./docs/spec/autocapture_mx_spec.yaml:382:      - autocapture/ux/settings_schema.py
./docs/spec/autocapture_mx_spec.yaml:383:      - autocapture/ux/preview_tokens.py
./docs/spec/autocapture_mx_spec.yaml:384:      - autocapture/web/routes/settings.py
./docs/spec/autocapture_mx_spec.yaml:397:      - autocapture/web/api.py
./docs/spec/autocapture_mx_spec.yaml:398:      - autocapture/web/routes/query.py
./docs/spec/autocapture_mx_spec.yaml:399:      - autocapture/web/routes/citations.py
./docs/spec/autocapture_mx_spec.yaml:400:      - autocapture/web/routes/plugins.py
./docs/spec/autocapture_mx_spec.yaml:401:      - autocapture/web/routes/health.py
./docs/spec/autocapture_mx_spec.yaml:402:      - autocapture/web/routes/metrics.py
./docs/spec/autocapture_mx_spec.yaml:417:      - autocapture/web/routes/citations.py
./docs/spec/autocapture_mx_spec.yaml:426:      - autocapture/ux/models.py
./docs/spec/autocapture_mx_spec.yaml:427:      - autocapture/web/routes/health.py
./docs/spec/autocapture_mx_spec.yaml:436:      - autocapture/web/routes/metrics.py
./docs/spec/autocapture_mx_spec.yaml:445:      - autocapture/storage/archive.py
./docs/spec/autocapture_mx_spec.yaml:454:      - autocapture/tools/vendor_windows_binaries.py
./docs/spec/autocapture_mx_spec.yaml:463:      - autocapture/promptops/propose.py
./docs/spec/autocapture_mx_spec.yaml:464:      - autocapture/promptops/validate.py
./docs/spec/autocapture_mx_spec.yaml:465:      - autocapture/promptops/evaluate.py
./docs/spec/autocapture_mx_spec.yaml:466:      - autocapture/promptops/patch.py
./docs/spec/autocapture_mx_spec.yaml:467:      - autocapture/promptops/github.py
./docs/spec/autocapture_mx_spec.yaml:476:      - autocapture/training/pipelines.py
./docs/spec/autocapture_mx_spec.yaml:477:      - autocapture/training/lora.py
./docs/spec/autocapture_mx_spec.yaml:478:      - autocapture/training/dpo.py
./docs/spec/autocapture_mx_spec.yaml:479:      - autocapture/training/datasets.py
./docs/spec/autocapture_mx_spec.yaml:488:      - autocapture/research/scout.py
./docs/spec/autocapture_mx_spec.yaml:489:      - autocapture/research/cache.py
./docs/spec/autocapture_mx_spec.yaml:490:      - autocapture/research/diff.py
./docs/spec/autocapture_mx_spec.yaml:499:      - autocapture/tools/pillar_gate.py
./docs/spec/autocapture_mx_spec.yaml:500:      - autocapture/tools/privacy_scanner.py
./docs/spec/autocapture_mx_spec.yaml:501:      - autocapture/tools/provenance_gate.py
./docs/spec/autocapture_mx_spec.yaml:502:      - autocapture/tools/coverage_gate.py
./docs/spec/autocapture_mx_spec.yaml:503:      - autocapture/tools/latency_gate.py
./docs/spec/autocapture_mx_spec.yaml:504:      - autocapture/tools/retrieval_sensitivity.py
./docs/spec/autocapture_mx_spec.yaml:505:      - autocapture/tools/conflict_gate.py
./docs/spec/autocapture_mx_spec.yaml:506:      - autocapture/tools/integrity_gate.py
./docs/spec/autocapture_mx_spec.yaml:509:        command: ["autocapture", "codex", "pillar-gates"]
./docs/spec/autocapture_mx_spec.yaml:516:      - autocapture/codex/cli.py
./docs/spec/autocapture_mx_spec.yaml:517:      - autocapture/codex/spec.py
./docs/spec/autocapture_mx_spec.yaml:518:      - autocapture/codex/validators.py
./docs/spec/autocapture_mx_spec.yaml:519:      - autocapture/codex/report.py
./docs/spec/autocapture_mx_spec.yaml:522:        command: ["autocapture", "codex", "validate", "--json"]
./autocapture_plugins/mx.core.llm_openai_compat.yaml:9:    factory: autocapture.gateway.router:create_openai_provider
./tests/test_storage_encrypted.py:7:from autocapture_nx.plugin_system.api import PluginContext
./tests/test_gateway_policy_block_cloud_default.py:5:from autocapture.gateway.app import get_app
./tests/test_doctor_report_schema.py:3:from autocapture.ux.facade import create_facade
./autocapture/web/routes/plugins.py:7:from autocapture.plugins.manager import PluginManager
./tests/test_citation_overlay_contract.py:5:from autocapture.web.api import get_app
./tests/test_storage_append_only.py:6:from autocapture.config.load import load_config
./tests/test_storage_append_only.py:7:from autocapture.config.models import ConfigPaths
./tests/test_storage_append_only.py:8:from autocapture.storage.blob_store import BlobStore
./tests/test_storage_append_only.py:9:from autocapture.storage.database import EncryptedMetadataStore
./tests/test_storage_append_only.py:10:from autocapture.storage.keys import load_keyring
./docs/safe_mode.md:11:- `autocapture --safe-mode doctor`
./tests/test_research_scout_cache.py:4:from autocapture.research.cache import ResearchCache
./tests/test_research_scout_cache.py:5:from autocapture.research.scout import ResearchScout, ResearchSource, Watchlist
./autocapture_plugins/mx.core.llm_local.yaml:9:    factory: autocapture.memory.answer_orchestrator:create_local_llm
./autocapture_plugins/mx.core.llm_local.yaml:38:    factory: autocapture.memory.answer_orchestrator:create_local_decoder
./tests/test_devtools.py:6:from autocapture_nx.kernel.loader import Kernel, default_config_paths
./tests/test_devtools.py:24:        result = tool.run(scan_root="autocapture_nx")
./contracts/ir_pins.json:5:    "capture.backpressure",
./contracts/ir_pins.json:23:    "capture",
./contracts/ir_pins.json:61:      "id": "builtin.capture.audio.windows"
./contracts/ir_pins.json:65:      "id": "builtin.capture.stub"
./contracts/ir_pins.json:69:      "id": "builtin.capture.windows"
./tests/test_capture_spool_idempotent.py:5:from autocapture.capture.spool import CaptureSpool
./tests/test_capture_spool_idempotent.py:6:from autocapture.capture.models import CaptureSegment
./tests/test_sqlcipher_store.py:5:from autocapture_nx.plugin_system.api import PluginContext
./tests/test_query.py:3:from autocapture_nx.kernel.loader import Kernel, default_config_paths
./tests/test_query.py:14:        result = __import__("autocapture_nx.kernel.query", fromlist=["run_query"]).run_query(system, "test")
./tests/test_plugin_loader.py:7:from autocapture_nx.kernel.config import ConfigPaths, load_config
./tests/test_plugin_loader.py:8:from autocapture_nx.kernel.errors import PluginError
./tests/test_plugin_loader.py:9:from autocapture_nx.plugin_system.registry import PluginRegistry
./autocapture_plugins/mx.core.export_import.yaml:9:    factory: autocapture.storage.archive:create_exporter
./autocapture_plugins/mx.core.export_import.yaml:38:    factory: autocapture.storage.archive:create_importer
./plugins/builtin/input_windows/plugin.py:11:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/input_windows/plugin.py:41:        mode = self.context.config.get("capture", {}).get("input_tracking", {}).get("mode", "raw")
./plugins/builtin/time_basic/plugin.py:8:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./tests/test_canonical_json.py:3:from autocapture_nx.kernel.canonical_json import dumps, CanonicalJSONError
./tests/test_sqlcipher_roundtrip.py:6:from autocapture.storage.sqlcipher import open_metadata_store
./tests/test_sqlcipher_roundtrip.py:7:from autocapture.config.load import load_config
./tests/test_sqlcipher_roundtrip.py:8:from autocapture.config.models import ConfigPaths
./autocapture/promptops/sources.py:10:from autocapture.core.hashing import hash_canonical
./tests/test_qdrant_sidecar_healthcheck.py:3:from autocapture.indexing.vector import qdrant_healthcheck
./tests/test_plugin_kinds_registry.py:3:from autocapture.plugins.kinds import REQUIRED_KINDS
./tests/test_plugin_kinds_registry.py:9:            "capture.source",
./tests/test_plugin_kinds_registry.py:10:            "capture.encoder",
./plugins/builtin/reranker_stub/plugin.py:8:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/reranker_stub/plugin.py:26:        model_path = os.path.join("D:\\autocapture", "models", "reranker")
./autocapture_plugins/mx.core.embed_local.yaml:9:    factory: autocapture.indexing.vector:create_embedder
./tests/test_blueprint_spec_validation.py:11:        spec_path = project_root / "docs" / "spec" / "autocapture_nx_blueprint_2026-01-24.md"
./tests/test_blueprint_spec_validation.py:17:        content = "Source_Document: docs/spec/autocapture_nx_blueprint_2026-01-24.md\n\n# 1. Source_Index\n"
./tests/test_span_ids_stable.py:3:from autocapture.ingest.spans import build_span
./contracts/config_schema.json:52:    "capture": {
./contracts/config_schema.json:755:    "capture",
./docs/reports/repo_tooling_summary.md:3:Source root: `/mnt/d/projects/autocapture_prime`
./docs/reports/repo_tooling_summary.md:6:- Python packaging: `pyproject.toml`, `autocapture/`, `autocapture_nx/`, `tests/`
./docs/reports/repo_tooling_summary.md:9:- Plugins: `plugins/`, `autocapture_plugins/`
./docs/reports/repo_tooling_summary.md:18:- CLI entrypoint: `autocapture = autocapture_nx.cli:main`
./docs/reports/repo_tooling_summary.md:27:- `tools/run_all_tests.py` runs `autocapture_nx doctor`, `autocapture_nx --safe-mode doctor`, and unittest discovery.
./tests/test_provenance_chain.py:6:from autocapture.pillars.citable import Ledger, verify_ledger
./tests/test_provenance_chain.py:18:                "stage": "capture",
./tests/test_plugin_hotswap.py:8:from autocapture.plugins.manager import PluginManager
./autocapture/promptops/propose.py:8:from autocapture.core.hashing import hash_canonical
./autocapture/promptops/propose.py:9:from autocapture.promptops.patch import create_patch
./tests/test_blob_encryption_roundtrip.py:6:from autocapture.storage.blob_store import BlobStore
./tests/test_blob_encryption_roundtrip.py:7:from autocapture.storage.keys import load_keyring
./tests/test_blob_encryption_roundtrip.py:8:from autocapture.config.load import load_config
./tests/test_blob_encryption_roundtrip.py:9:from autocapture.config.models import ConfigPaths
./tests/test_span_bbox_norm.py:3:from autocapture.ingest.normalizer import normalize_bbox
./autocapture_plugins/mx.core.egress_sanitizer.yaml:9:    factory: autocapture.ux.redaction:create_egress_sanitizer
./tests/test_promptops_validation.py:3:from autocapture.promptops import evaluate_prompt, propose_prompt, snapshot_sources, validate_prompt
./tests/test_promptops_validation.py:4:from autocapture.promptops.patch import apply_patch_to_text
./tests/test_plugin_discovery_no_import.py:6:from autocapture.plugins.manager import PluginManager
./docs/reports/grep_subprocess_plugin.txt:6:./docs/blueprints/autocapture_nx_blueprint.md:52:- Network is allowed only for explicitly policy-approved, subprocess-hosted plugins.
./docs/reports/grep_subprocess_plugin.txt:7:./docs/blueprints/autocapture_nx_blueprint.md:70:- **Phase 6: Security + egress hardening** — Least privilege plugins, subprocess sandbox, key separation/rotation, egress ledgering.
./docs/reports/grep_subprocess_plugin.txt:8:./docs/blueprints/autocapture_nx_blueprint.md:128:- [ ] **I051** (Phase 6) — [Capability bridging for subprocess plugins (real capability plumbing)](#i051)
./docs/reports/grep_subprocess_plugin.txt:9:./docs/blueprints/autocapture_nx_blueprint.md:1945:Least privilege plugins, subprocess sandbox, key separation/rotation, egress ledgering.
./docs/reports/grep_subprocess_plugin.txt:10:./docs/blueprints/autocapture_nx_blueprint.md:1963:  - process model: kernel has network denied; egress plugin runs in subprocess
./docs/reports/grep_subprocess_plugin.txt:11:./docs/blueprints/autocapture_nx_blueprint.md:1969:  - Move all network use into subprocess-hosted plugins.
./docs/reports/grep_subprocess_plugin.txt:12:./docs/blueprints/autocapture_nx_blueprint.md:1981:  - plugin registry: inproc_allowlist minimized; default subprocess
./docs/reports/grep_subprocess_plugin.txt:13:./docs/blueprints/autocapture_nx_blueprint.md:1991:### I051 — Capability bridging for subprocess plugins (real capability plumbing)
./docs/reports/grep_subprocess_plugin.txt:14:./docs/blueprints/autocapture_nx_blueprint.md:1998:  - Test: subprocess plugin receives only declared capabilities and can operate
./docs/reports/grep_subprocess_plugin.txt:15:./docs/blueprints/autocapture_nx_blueprint.md:2026:  - filesystem sandboxing for subprocess plugins
./docs/reports/grep_subprocess_plugin.txt:16:./docs/blueprints/autocapture_nx_blueprint.md:2378:  - new clipboard capture plugin (subprocess-hosted by default)
./docs/reports/grep_subprocess_plugin.txt:17:./docs/mx_evidence_bundle.md:169:rg -n "\\bsocket\\b|subprocess\\.|requests\\.|httpx\\." -S autocapture autocapture_plugins || true
./docs/reports/grep_subprocess_plugin.txt:18:./docs/reports/grep_ledger.txt:89:./docs/blueprints/autocapture_nx_blueprint.md:70:- **Phase 6: Security + egress hardening** — Least privilege plugins, subprocess sandbox, key separation/rotation, egress ledgering.
./docs/reports/grep_subprocess_plugin.txt:19:./docs/reports/grep_ledger.txt:152:./docs/blueprints/autocapture_nx_blueprint.md:1945:Least privilege plugins, subprocess sandbox, key separation/rotation, egress ledgering.
./docs/reports/grep_subprocess_plugin.txt:21:./autocapture_nx/plugin_system/registry.py:183:                if hosting_mode == "subprocess" and plugin_id not in inproc_allowlist:
./tests/test_backpressure.py:3:from autocapture_nx.plugin_system.api import PluginContext
./tests/test_settings_preview_tokens.py:6:from autocapture.config.load import load_config
./tests/test_settings_preview_tokens.py:7:from autocapture.config.models import ConfigPaths
./tests/test_settings_preview_tokens.py:8:from autocapture.ux.preview_tokens import preview_tokens
./tests/test_policy_gate.py:3:from autocapture.plugins.policy_gate import PolicyGate
./autocapture_plugins/mx.core.compression_and_verify.yaml:9:    factory: autocapture.storage.archive:create_compressor
./autocapture_plugins/mx.core.compression_and_verify.yaml:38:    factory: autocapture.memory.verifier:create_verifier
./tests/test_observability.py:5:from autocapture_nx.plugin_system.api import PluginContext
./autocapture/web/api.py:7:from autocapture.ux.facade import create_facade
./autocapture/web/api.py:8:from autocapture.web.routes import health, query, settings, citations, plugins, metrics
./plugins/builtin/embedder_stub/plugin.py:8:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/embedder_stub/plugin.py:26:        model_path = os.path.join("D:\\autocapture", "models", "embeddings")
./plugins/builtin/time_advanced/plugin.py:11:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./config/plugin_locks.json:16:    "builtin.capture.audio.windows": {
./config/plugin_locks.json:20:    "builtin.capture.stub": {
./config/plugin_locks.json:24:    "builtin.capture.windows": {
./tests/test_answer_builder.py:3:from autocapture_nx.plugin_system.api import PluginContext
./tests/test_sanitizer_no_raw_pii.py:6:from autocapture.config.load import load_config
./tests/test_sanitizer_no_raw_pii.py:7:from autocapture.config.models import ConfigPaths
./tests/test_sanitizer_no_raw_pii.py:8:from autocapture.ux.redaction import EgressSanitizer
./docs/reports/grep_scheduler_governor.txt:2:./docs/blueprints/autocapture_nx_blueprint.md:43:### Pattern D — Scheduler / governor (activity-authoritative)
./docs/reports/grep_scheduler_governor.txt:3:./docs/blueprints/autocapture_nx_blueprint.md:69:- **Phase 5: Scheduler/governor** — Activity-authoritative gating, budgets, preemption, telemetry integration.
./docs/reports/grep_scheduler_governor.txt:4:./docs/blueprints/autocapture_nx_blueprint.md:121:- [ ] **I044** (Phase 5) — [Real scheduler plugin gates heavy work on user activity](#i044)
./docs/reports/grep_scheduler_governor.txt:5:./docs/blueprints/autocapture_nx_blueprint.md:240:  - When extras missing, plugin is unavailable and scheduler marks jobs as NO_EVIDENCE.
./docs/reports/grep_scheduler_governor.txt:6:./docs/blueprints/autocapture_nx_blueprint.md:492:  - runtime governor → capture fps/quality controller
./docs/reports/grep_scheduler_governor.txt:7:./docs/blueprints/autocapture_nx_blueprint.md:1818:## Phase 5: Scheduler/governor
./docs/reports/grep_scheduler_governor.txt:8:./docs/blueprints/autocapture_nx_blueprint.md:1833:### I044 — Real scheduler plugin gates heavy work on user activity
./docs/reports/grep_scheduler_governor.txt:9:./docs/blueprints/autocapture_nx_blueprint.md:1838:  - new scheduler plugin (builtin): job admission based on activity
./docs/reports/grep_scheduler_governor.txt:10:./docs/blueprints/autocapture_nx_blueprint.md:1839:  - governor API used by all heavy workers
./docs/reports/grep_scheduler_governor.txt:11:./docs/blueprints/autocapture_nx_blueprint.md:1856:  - input_windows exposes aggregated activity signal channel to governor
./docs/reports/grep_scheduler_governor.txt:12:./docs/blueprints/autocapture_nx_blueprint.md:1888:  - governor decisions affect capture rate/quality and enrichment admission
./docs/reports/grep_scheduler_governor.txt:13:./docs/blueprints/autocapture_nx_blueprint.md:1890:  - Integration test: governor changes lead to fps/quality changes within bounded time
./docs/reports/grep_scheduler_governor.txt:14:./docs/blueprints/autocapture_nx_blueprint.md:1892:  - Expose governor outputs: allowed fps range, max CPU%, allow_enrich boolean.
./docs/reports/grep_scheduler_governor.txt:15:./docs/blueprints/autocapture_nx_blueprint.md:1903:  - scheduler cancels/deprioritizes heavy jobs on new input events
./docs/reports/grep_scheduler_governor.txt:16:./docs/blueprints/autocapture_nx_blueprint.md:1908:  - On ACTIVE transition, scheduler pauses queues and releases GPU leases.
./docs/reports/grep_scheduler_governor.txt:17:./docs/blueprints/autocapture_nx_blueprint.md:1918:  - scheduler budgets for model execution (CPU/GPU time, tokens, batch sizes)
./docs/reports/grep_scheduler_governor.txt:18:./docs/blueprints/autocapture_nx_blueprint.md:2291:  - proof/verify dashboard, plugins, keys, settings, jobs/scheduler.
./docs/reports/grep_scheduler_governor.txt:19:./docs/blueprints/autocapture_nx_blueprint.md:2336:  - Stream: capture telemetry (I46), scheduler state (I44), alerts (I81).
./docs/reports/grep_scheduler_governor.txt:20:./docs/blueprints/autocapture_nx_blueprint.md:2385:  - Integrate with scheduler: no heavy parsing while ACTIVE.
./docs/reports/grep_scheduler_governor.txt:21:./docs/autocapture_nx_blueprint_final.md:188:- Kernel runtime governor.
./docs/reports/grep_scheduler_governor.txt:22:./docs/autocapture_nx_blueprint_final.md:311:- Kernel runtime governor controls capture settings.
./docs/reports/grep_scheduler_governor.txt:23:./docs/autocapture_nx_blueprint_final.md:442:- **Kernel**: authoritative scheduler, policy enforcement, routing, and invariants.
./docs/reports/grep_scheduler_governor.txt:24:./docs/autocapture_nx_blueprint_final.md:662:- Kernel governor; capture plugin applies updates.
./docs/reports/grep_scheduler_governor.txt:25:./docs/autocapture_nx_blueprint_final.md:702:- Kernel governor + capture source plugin.
./docs/reports/grep_scheduler_governor.txt:26:./docs/autocapture_mx_implementation_plan.md:23:- Runtime governor + leases -> Capture -> Ingest -> Indexing -> Retrieval -> Answering
./docs/reports/grep_scheduler_governor.txt:27:./docs/autocapture_mx_implementation_plan.md:36:3) PolicyGate/Egress + Sanitizer + Runtime governor/leases (MX-POLICY-0001, MX-SAN-0001, MX-GOV-0001, MX-LEASE-0001)
./docs/reports/grep_scheduler_governor.txt:28:./docs/autocapture_mx_implementation_plan.md:46:| B | MOD-006..011 | redaction + runtime governor/leases + storage v2 + capture spool/pipeline | tests/test_sanitizer_no_raw_pii.py; tests/test_governor_gating.py; tests/test_work_leases.py; tests/test_capture_spool_idempotent.py; tests/test_sqlcipher_roundtrip.py |
./docs/reports/grep_scheduler_governor.txt:29:./docs/autocapture_mx_implementation_plan.md:71:| MX-GOV-0001 | tests/test_governor_gating.py | autocapture/runtime/governor.py; autocapture/runtime/activity.py; autocapture/runtime/scheduler.py; autocapture/runtime/budgets.py |
./docs/reports/grep_scheduler_governor.txt:30:./docs/autocapture_mx_implementation_plan.md:154:- Artifacts: autocapture/runtime/governor.py; autocapture/runtime/activity.py; autocapture/runtime/scheduler.py; autocapture/runtime/budgets.py
./docs/reports/grep_scheduler_governor.txt:31:./docs/autocapture_mx_implementation_plan.md:155:- Validation: unit_test tests/test_governor_gating.py
./docs/reports/grep_scheduler_governor.txt:32:./docs/spec/autocapture_mx_spec.yaml:181:      - autocapture/runtime/governor.py
./docs/reports/grep_scheduler_governor.txt:33:./docs/spec/autocapture_mx_spec.yaml:183:      - autocapture/runtime/scheduler.py
./docs/reports/grep_scheduler_governor.txt:34:./docs/spec/autocapture_mx_spec.yaml:187:        target: tests/test_governor_gating.py
./docs/reports/grep_scheduler_governor.txt:38:./docs/autocapture_mx_blueprint.md:136:    governor.py
./docs/reports/grep_scheduler_governor.txt:39:./docs/autocapture_mx_blueprint.md:139:    scheduler.py
./docs/reports/grep_scheduler_governor.txt:40:./docs/autocapture_mx_blueprint.md:469:The governor publishes a `RuntimeState`:
./docs/reports/grep_scheduler_governor.txt:41:./docs/autocapture_mx_blueprint.md:491:If a stage is skipped due to governor, MX records a deterministic degrade marker:
./docs/reports/grep_scheduler_governor.txt:42:./docs/autocapture_mx_blueprint.md:574:- governor allows, or
./docs/reports/grep_scheduler_governor.txt:43:./docs/autocapture_mx_blueprint.md:596:- governor state.
./docs/reports/grep_scheduler_governor.txt:44:./docs/autocapture_mx_blueprint.md:788:Training is local-only by default and respects governor budgets (never runs during active interaction unless explicitly commanded).
./docs/reports/grep_scheduler_governor.txt:45:./docs/autocapture_mx_blueprint.md:1050:      - autocapture/runtime/governor.py
./docs/reports/grep_scheduler_governor.txt:46:./docs/autocapture_mx_blueprint.md:1052:      - autocapture/runtime/scheduler.py
./docs/reports/grep_scheduler_governor.txt:47:./docs/autocapture_mx_blueprint.md:1056:        target: tests/test_governor_gating.py
./docs/reports/grep_scheduler_governor.txt:48:./autocapture/plugins/kinds.py:40:    "runtime.governor",
./docs/reports/grep_scheduler_governor.txt:52:./docs/mx_gap_matrix.md:97:- Missing (MX paths/tests): autocapture/runtime/governor.py; autocapture/runtime/activity.py; autocapture/runtime/scheduler.py; autocapture/runtime/budgets.py; tests/test_governor_gating.py
./docs/reports/grep_scheduler_governor.txt:53:./docs/mx_gap_matrix.md:99:  - Artifacts: autocapture/runtime/governor.py; autocapture/runtime/activity.py; autocapture/runtime/scheduler.py; autocapture/runtime/budgets.py
./docs/reports/grep_scheduler_governor.txt:87:./autocapture/runtime/__init__.py:5:from .governor import RuntimeGovernor, GovernorDecision
./docs/reports/grep_scheduler_governor.txt:88:./autocapture/runtime/__init__.py:6:from .scheduler import Scheduler, Job
./docs/reports/grep_scheduler_governor.txt:89:./autocapture/runtime/scheduler.py:1:"""Simple scheduler honoring RuntimeGovernor decisions."""
./docs/reports/grep_scheduler_governor.txt:90:./autocapture/runtime/scheduler.py:8:from autocapture.runtime.governor import RuntimeGovernor
./docs/reports/grep_scheduler_governor.txt:91:./autocapture/runtime/scheduler.py:19:    def __init__(self, governor: RuntimeGovernor) -> None:
./docs/reports/grep_scheduler_governor.txt:92:./autocapture/runtime/scheduler.py:20:        self._governor = governor
./docs/reports/grep_scheduler_governor.txt:93:./autocapture/runtime/scheduler.py:27:        decision = self._governor.decide(signals)
./docs/reports/grep_scheduler_governor.txt:94:./autocapture/runtime/governor.py:1:"""Runtime governor enforcing heavy-work gating."""
./docs/reports/grep_scheduler_governor.txt:95:./autocapture/runtime/governor.py:43:def create_governor(plugin_id: str) -> RuntimeGovernor:
./docs/reports/grep_scheduler_governor.txt:96:./tests/test_governor_gating.py:3:from autocapture.runtime.governor import RuntimeGovernor
./docs/reports/grep_scheduler_governor.txt:97:./tests/test_governor_gating.py:4:from autocapture.runtime.scheduler import Scheduler, Job
./plugins/builtin/ocr_stub/plugin.py:8:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./tests/test_plugin_network_block.py:8:from autocapture_nx.kernel.config import ConfigPaths, load_config
./tests/test_plugin_network_block.py:9:from autocapture_nx.kernel.errors import PermissionError
./tests/test_plugin_network_block.py:10:from autocapture_nx.plugin_system.registry import PluginRegistry
./tests/test_network_guard.py:4:from autocapture_nx.plugin_system.runtime import network_guard
./tests/test_network_guard.py:5:from autocapture_nx.kernel.errors import PermissionError
./autocapture_plugins/mx.core.capture_win.yaml:2:plugin_id: mx.core.capture_win
./autocapture_plugins/mx.core.capture_win.yaml:5:description: Windows capture + encoder + activity signal.
./autocapture_plugins/mx.core.capture_win.yaml:8:    kind: capture.source
./autocapture_plugins/mx.core.capture_win.yaml:9:    factory: autocapture.capture.pipelines:create_capture_source
./autocapture_plugins/mx.core.capture_win.yaml:13:      - capture.source
./autocapture_plugins/mx.core.capture_win.yaml:37:    kind: capture.encoder
./autocapture_plugins/mx.core.capture_win.yaml:38:    factory: autocapture.capture.pipelines:create_capture_encoder
./autocapture_plugins/mx.core.capture_win.yaml:42:      - capture.encoder
./autocapture_plugins/mx.core.capture_win.yaml:67:    factory: autocapture.runtime.activity:create_activity_signal
./tests/test_sanitizer.py:8:from autocapture_nx.kernel.config import ConfigPaths, load_config
./tests/test_sanitizer.py:10:from autocapture_nx.plugin_system.api import PluginContext
./tests/test_anchor.py:5:from autocapture_nx.plugin_system.api import PluginContext
./config/default.json:14:  "capture": {
./config/default.json:51:      "collection": "autocapture",
./config/default.json:72:      "capture.backpressure",
./config/default.json:99:      "builtin.capture.audio.windows",
./config/default.json:100:      "builtin.capture.stub",
./config/default.json:101:      "builtin.capture.windows",
./config/default.json:123:      "mx.core.capture_win",
./config/default.json:143:      "builtin.capture.audio.windows",
./config/default.json:144:      "builtin.capture.windows",
./config/default.json:163:      "mx.core.capture_win",
./config/default.json:183:      "builtin.capture.audio.windows": true,
./config/default.json:184:      "builtin.capture.stub": false,
./config/default.json:185:      "builtin.capture.windows": true,
./config/default.json:217:        "builtin.capture.windows",
./config/default.json:218:        "builtin.capture.audio.windows",
./config/default.json:248:      "autocapture_plugins"
./tests/test_rules_ledger_append_only.py:6:from autocapture.rules.ledger import RulesLedger
./tests/test_retrieval.py:3:from autocapture_nx.plugin_system.api import PluginContext
./docs/reports/grep_run_id.txt:13:./docs/blueprints/autocapture_nx_blueprint.md:27:- Fields (minimum): `evidence_id`, `run_id`, `type`, `ts_start_utc`, `ts_end_utc`, `content_hash`, `locator`, `schema_version`.
./docs/reports/grep_run_id.txt:14:./docs/blueprints/autocapture_nx_blueprint.md:65:- **Phase 1: Correctness + immutability blockers** — Fix correctness/security breakers; establish run_id + ID discipline; stop evidence mutation.
./docs/reports/grep_run_id.txt:15:./docs/blueprints/autocapture_nx_blueprint.md:104:- [ ] **I027** (Phase 3) — [Add DB indexes on ts_utc, record_type, run_id](#i027)
./docs/reports/grep_run_id.txt:16:./docs/blueprints/autocapture_nx_blueprint.md:176:- [ ] **I099** (Phase 1) — [Stamp every journal event with run_id](#i099)
./docs/reports/grep_run_id.txt:17:./docs/blueprints/autocapture_nx_blueprint.md:456:Fix correctness/security breakers; establish run_id + ID discipline; stop evidence mutation.
./docs/reports/grep_run_id.txt:18:./docs/blueprints/autocapture_nx_blueprint.md:561:  - kernel run manager (new): run_id creation and propagation
./docs/reports/grep_run_id.txt:19:./docs/blueprints/autocapture_nx_blueprint.md:562:  - all plugins include run_id in IDs and events
./docs/reports/grep_run_id.txt:20:./docs/blueprints/autocapture_nx_blueprint.md:567:  - Create `run_id` as ULID/UUIDv7 at boot or capture start.
./docs/reports/grep_run_id.txt:21:./docs/blueprints/autocapture_nx_blueprint.md:568:  - Prefix all record IDs with `run_id/` and use monotonic seq per type.
./docs/reports/grep_run_id.txt:22:./docs/blueprints/autocapture_nx_blueprint.md:569:  - Store run manifest linking run_id to config/locks hashes.
./docs/reports/grep_run_id.txt:23:./docs/blueprints/autocapture_nx_blueprint.md:598:  - Snapshot: journal schema stable and contains run_id
./docs/reports/grep_run_id.txt:24:./docs/blueprints/autocapture_nx_blueprint.md:765:  - Centralize: run_id, timestamps, schema_version, record_type.
./docs/reports/grep_run_id.txt:25:./docs/blueprints/autocapture_nx_blueprint.md:770:### I099 — Stamp every journal event with run_id
./docs/reports/grep_run_id.txt:26:./docs/blueprints/autocapture_nx_blueprint.md:775:  - JournalWriter automatically inserts run_id (from run manager)
./docs/reports/grep_run_id.txt:27:./docs/blueprints/autocapture_nx_blueprint.md:777:  - Test: all journal events include run_id
./docs/reports/grep_run_id.txt:28:./docs/blueprints/autocapture_nx_blueprint.md:779:  - JournalWriter reads current run_id from kernel context.
./docs/reports/grep_run_id.txt:29:./docs/blueprints/autocapture_nx_blueprint.md:780:  - Reject event appends if run_id is missing (unless in bootstrap mode).
./docs/reports/grep_run_id.txt:30:./docs/blueprints/autocapture_nx_blueprint.md:782:  - Journal is always partitionable by run_id.
./docs/reports/grep_run_id.txt:31:./docs/blueprints/autocapture_nx_blueprint.md:1188:### I027 — Add DB indexes on ts_utc, record_type, run_id
./docs/reports/grep_run_id.txt:32:./docs/blueprints/autocapture_nx_blueprint.md:1193:  - SQLCipher schema: indexes on `ts_utc`, `record_type`, `run_id`
./docs/reports/grep_run_id.txt:33:./docs/blueprints/autocapture_nx_blueprint.md:1275:  - Directory schema: `media/{run_id}/{type}/{yyyy-mm-dd}/...` etc.
./docs/reports/grep_run_id.txt:34:./docs/blueprints/autocapture_nx_blueprint.md:1290:  - Manifest includes: run_id, start/stop timestamps, config hash, locks hashes,
./docs/reports/grep_run_id.txt:35:./docs/reports/grep_journal.txt:17:./docs/blueprints/autocapture_nx_blueprint.md:176:- [ ] **I099** (Phase 1) — [Stamp every journal event with run_id](#i099)
./docs/reports/grep_run_id.txt:36:./docs/reports/grep_journal.txt:29:./docs/blueprints/autocapture_nx_blueprint.md:598:  - Snapshot: journal schema stable and contains run_id
./docs/reports/grep_run_id.txt:37:./docs/reports/grep_journal.txt:31:./docs/blueprints/autocapture_nx_blueprint.md:770:### I099 — Stamp every journal event with run_id
./docs/reports/grep_run_id.txt:38:./docs/reports/grep_journal.txt:32:./docs/blueprints/autocapture_nx_blueprint.md:777:  - Test: all journal events include run_id
./docs/reports/grep_run_id.txt:41:./docs/reports/grep_evidence.txt:54:./docs/blueprints/autocapture_nx_blueprint.md:27:- Fields (minimum): `evidence_id`, `run_id`, `type`, `ts_start_utc`, `ts_end_utc`, `content_hash`, `locator`, `schema_version`.
./docs/reports/grep_run_id.txt:42:./docs/reports/grep_evidence.txt:57:./docs/blueprints/autocapture_nx_blueprint.md:65:- **Phase 1: Correctness + immutability blockers** — Fix correctness/security breakers; establish run_id + ID discipline; stop evidence mutation.
./docs/reports/grep_run_id.txt:43:./docs/reports/grep_evidence.txt:63:./docs/blueprints/autocapture_nx_blueprint.md:456:Fix correctness/security breakers; establish run_id + ID discipline; stop evidence mutation.
./docs/reports/grep_run_id.txt:49:./autocapture/training/pipelines.py:22:        run_id: str | None = None,
./docs/reports/grep_run_id.txt:50:./autocapture/training/pipelines.py:32:                run_id=run_id,
./docs/reports/grep_run_id.txt:51:./autocapture/training/pipelines.py:40:            run_id=run_id,
./docs/reports/grep_run_id.txt:52:./autocapture/training/lora.py:41:    run_id: str | None = None,
./docs/reports/grep_run_id.txt:53:./autocapture/training/lora.py:46:    run_id = run_id or datetime.now(timezone.utc).strftime("%Y%m%dT%H%M%SZ")
./docs/reports/grep_run_id.txt:54:./autocapture/training/lora.py:48:    output_dir = Path(output_dir) / run_id
./docs/reports/grep_run_id.txt:55:./autocapture/training/lora.py:58:        "run_id": run_id,
./docs/reports/grep_run_id.txt:56:./autocapture/training/dpo.py:41:    run_id: str | None = None,
./docs/reports/grep_run_id.txt:57:./autocapture/training/dpo.py:46:    run_id = run_id or datetime.now(timezone.utc).strftime("%Y%m%dT%H%M%SZ")
./docs/reports/grep_run_id.txt:58:./autocapture/training/dpo.py:48:    output_dir = Path(output_dir) / run_id
./docs/reports/grep_run_id.txt:59:./autocapture/training/dpo.py:58:        "run_id": run_id,
./tests/test_safe_mode.py:6:from autocapture_nx.kernel.config import ConfigPaths
./tests/test_safe_mode.py:7:from autocapture_nx.kernel.loader import Kernel
./tests/test_rrf_fusion_determinism.py:3:from autocapture.retrieval.fusion import rrf_fusion
./docs/plugin_model.md:4:Autocapture NX is plugin-forward: all functionality is delivered by plugins. The kernel only:
./tests/test_rules_state_rebuild.py:6:from autocapture.rules.ledger import RulesLedger
./tests/test_rules_state_rebuild.py:7:from autocapture.rules.store import RulesStore
./autocapture_nx/__main__.py:1:"""Module entrypoint for `python -m autocapture_nx`."""
./docs/reports/grep_plugin_manifest.txt:27:./docs/spec/autocapture_mx_spec.yaml:53:    title: Plugin manifest schema + manager + discovery
./docs/reports/grep_plugin_manifest.txt:28:./docs/spec/autocapture_mx_spec.yaml:56:      - autocapture/plugins/manifest.py
./docs/reports/grep_plugin_manifest.txt:29:./docs/spec/autocapture_mx_spec.yaml:63:        target: autocapture.plugins.manifest:ExtensionManifest
./docs/reports/grep_plugin_manifest.txt:30:./docs/spec/autocapture_mx_spec.yaml:442:    title: Export/import bundles with manifest + hash verification
./docs/reports/grep_plugin_manifest.txt:31:./docs/spec/autocapture_mx_spec.yaml:473:    title: Training pipelines (LoRA + DPO) with reproducible manifests
./docs/reports/grep_plugin_manifest.txt:32:./docs/spec/autocapture_mx_spec.yaml:482:        target: tests/test_training_manifest_schema.py
./docs/reports/grep_plugin_manifest.txt:35:./autocapture/plugins/__init__.py:4:from .manifest import ExtensionManifest, PluginManifest
./docs/reports/grep_plugin_manifest.txt:36:./autocapture_nx/plugin_system/registry.py:23:    manifest: dict[str, Any]
./docs/reports/grep_plugin_manifest.txt:37:./autocapture_nx/plugin_system/registry.py:72:    def discover_manifests(self) -> list[Path]:
./docs/reports/grep_plugin_manifest.txt:38:./autocapture_nx/plugin_system/registry.py:76:        manifests: list[Path] = []
./docs/reports/grep_plugin_manifest.txt:39:./autocapture_nx/plugin_system/registry.py:80:            for manifest in root.rglob("plugin.json"):
./docs/reports/grep_plugin_manifest.txt:40:./autocapture_nx/plugin_system/registry.py:81:                manifests.append(manifest)
./docs/reports/grep_plugin_manifest.txt:41:./autocapture_nx/plugin_system/registry.py:82:        return sorted(manifests)
./docs/reports/grep_plugin_manifest.txt:42:./autocapture_nx/plugin_system/registry.py:92:    def _validate_manifest(self, manifest: dict[str, Any]) -> None:
./docs/reports/grep_plugin_manifest.txt:43:./autocapture_nx/plugin_system/registry.py:93:        schema_path = Path("contracts/plugin_manifest.schema.json")
./docs/reports/grep_plugin_manifest.txt:44:./autocapture_nx/plugin_system/registry.py:95:            raise PluginError("Missing plugin manifest schema")
./docs/reports/grep_plugin_manifest.txt:45:./autocapture_nx/plugin_system/registry.py:98:        self._validator.validate(schema, manifest)
./docs/reports/grep_plugin_manifest.txt:46:./autocapture_nx/plugin_system/registry.py:100:    def _check_lock(self, plugin_id: str, manifest_path: Path, plugin_root: Path, lockfile: dict[str, Any]) -> None:
./docs/reports/grep_plugin_manifest.txt:47:./autocapture_nx/plugin_system/registry.py:108:        manifest_hash = sha256_file(manifest_path)
./docs/reports/grep_plugin_manifest.txt:48:./autocapture_nx/plugin_system/registry.py:110:        if manifest_hash != expected.get("manifest_sha256"):
./docs/reports/grep_plugin_manifest.txt:49:./autocapture_nx/plugin_system/registry.py:111:            raise PluginError(f"Plugin {plugin_id} manifest hash mismatch")
./docs/reports/grep_plugin_manifest.txt:50:./autocapture_nx/plugin_system/registry.py:115:    def _check_permissions(self, manifest: dict[str, Any]) -> None:
./docs/reports/grep_plugin_manifest.txt:51:./autocapture_nx/plugin_system/registry.py:116:        perms = manifest.get("permissions", {})
./docs/reports/grep_plugin_manifest.txt:52:./autocapture_nx/plugin_system/registry.py:123:            if manifest.get("plugin_id") not in allowed:
./docs/reports/grep_plugin_manifest.txt:53:./autocapture_nx/plugin_system/registry.py:127:        manifests = self.discover_manifests()
./docs/reports/grep_plugin_manifest.txt:54:./autocapture_nx/plugin_system/registry.py:136:        manifests_by_id: dict[str, tuple[Path, dict[str, Any]]] = {}
./docs/reports/grep_plugin_manifest.txt:55:./autocapture_nx/plugin_system/registry.py:137:        for manifest_path in manifests:
./docs/reports/grep_plugin_manifest.txt:56:./autocapture_nx/plugin_system/registry.py:138:            with manifest_path.open("r", encoding="utf-8") as handle:
./docs/reports/grep_plugin_manifest.txt:57:./autocapture_nx/plugin_system/registry.py:139:                manifest = json.load(handle)
./docs/reports/grep_plugin_manifest.txt:58:./autocapture_nx/plugin_system/registry.py:140:            self._validate_manifest(manifest)
./docs/reports/grep_plugin_manifest.txt:59:./autocapture_nx/plugin_system/registry.py:141:            plugin_id = manifest["plugin_id"]
./docs/reports/grep_plugin_manifest.txt:60:./autocapture_nx/plugin_system/registry.py:142:            manifests_by_id[plugin_id] = (manifest_path, manifest)
./docs/reports/grep_plugin_manifest.txt:61:./autocapture_nx/plugin_system/registry.py:147:        def is_enabled(pid: str, manifest: dict[str, Any]) -> bool:
./docs/reports/grep_plugin_manifest.txt:62:./autocapture_nx/plugin_system/registry.py:152:            return bool(manifest.get("enabled", True))
./docs/reports/grep_plugin_manifest.txt:63:./autocapture_nx/plugin_system/registry.py:156:            for pid, (_path, manifest) in manifests_by_id.items()
./docs/reports/grep_plugin_manifest.txt:64:./autocapture_nx/plugin_system/registry.py:157:            if pid in allowlist and is_enabled(pid, manifest)
./docs/reports/grep_plugin_manifest.txt:65:./autocapture_nx/plugin_system/registry.py:160:        for plugin_id, (manifest_path, manifest) in manifests_by_id.items():
./docs/reports/grep_plugin_manifest.txt:66:./autocapture_nx/plugin_system/registry.py:165:            depends = manifest.get("depends_on", [])
./docs/reports/grep_plugin_manifest.txt:67:./autocapture_nx/plugin_system/registry.py:171:            self._check_permissions(manifest)
./docs/reports/grep_plugin_manifest.txt:68:./autocapture_nx/plugin_system/registry.py:172:            self._check_lock(plugin_id, manifest_path, manifest_path.parent, lockfile)
./docs/reports/grep_plugin_manifest.txt:69:./autocapture_nx/plugin_system/registry.py:174:            entrypoints = manifest.get("entrypoints", [])
./docs/reports/grep_plugin_manifest.txt:70:./autocapture_nx/plugin_system/registry.py:178:                module_path = manifest_path.parent / entry["path"]
./docs/reports/grep_plugin_manifest.txt:71:./autocapture_nx/plugin_system/registry.py:182:                network_allowed = bool(manifest.get("permissions", {}).get("network", False))
./docs/reports/grep_plugin_manifest.txt:72:./autocapture_nx/plugin_system/registry.py:211:                loaded.append(LoadedPlugin(plugin_id, manifest, instance, caps))
./docs/reports/grep_plugin_manifest.txt:73:./autocapture/plugins/manifest.py:1:"""MX plugin manifest loader."""
./docs/reports/grep_plugin_manifest.txt:74:./autocapture/plugins/manifest.py:35:        data = _load_manifest(path)
./docs/reports/grep_plugin_manifest.txt:75:./autocapture/plugins/manifest.py:54:            raise ValueError(f"plugin_id missing in manifest {path}")
./docs/reports/grep_plugin_manifest.txt:76:./autocapture/plugins/manifest.py:56:            raise ValueError(f"schema_version missing in manifest {path}")
./docs/reports/grep_plugin_manifest.txt:77:./autocapture/plugins/manifest.py:68:def _load_manifest(path: Path) -> dict[str, Any]:
./docs/reports/grep_plugin_manifest.txt:80:./autocapture/plugins/manager.py:14:from autocapture.plugins.manifest import ExtensionManifest, PluginManifest
./docs/reports/grep_plugin_manifest.txt:81:./autocapture/plugins/manager.py:20:    manifest: ExtensionManifest
./docs/reports/grep_plugin_manifest.txt:82:./autocapture/plugins/manager.py:28:        self._manifests: list[PluginManifest] = []
./docs/reports/grep_plugin_manifest.txt:83:./autocapture/plugins/manager.py:30:        self._manifest_mtimes: dict[Path, float] = {}
./docs/reports/grep_plugin_manifest.txt:84:./autocapture/plugins/manager.py:31:        self._manifest_hashes: dict[Path, str] = {}
./docs/reports/grep_plugin_manifest.txt:85:./autocapture/plugins/manager.py:36:        manifests = []
./docs/reports/grep_plugin_manifest.txt:86:./autocapture/plugins/manager.py:37:        for path in self._manifest_paths():
./docs/reports/grep_plugin_manifest.txt:87:./autocapture/plugins/manager.py:38:            manifests.append(PluginManifest.from_path(path))
./docs/reports/grep_plugin_manifest.txt:88:./autocapture/plugins/manager.py:39:            self._manifest_mtimes[path] = path.stat().st_mtime_ns
./docs/reports/grep_plugin_manifest.txt:89:./autocapture/plugins/manager.py:40:            self._manifest_hashes[path] = hashlib.sha256(path.read_bytes()).hexdigest()
./docs/reports/grep_plugin_manifest.txt:90:./autocapture/plugins/manager.py:41:        self._manifests = manifests
./docs/reports/grep_plugin_manifest.txt:91:./autocapture/plugins/manager.py:43:    def _manifest_paths(self) -> list[Path]:
./docs/reports/grep_plugin_manifest.txt:92:./autocapture/plugins/manager.py:72:        for manifest in self._manifests:
./docs/reports/grep_plugin_manifest.txt:93:./autocapture/plugins/manager.py:73:            pid = manifest.plugin_id
./docs/reports/grep_plugin_manifest.txt:94:./autocapture/plugins/manager.py:79:                if not self._safe_extensions(manifest.extensions):
./docs/reports/grep_plugin_manifest.txt:95:./autocapture/plugins/manager.py:104:        for manifest in self._manifests:
./docs/reports/grep_plugin_manifest.txt:96:./autocapture/plugins/manager.py:107:                    "plugin_id": manifest.plugin_id,
./docs/reports/grep_plugin_manifest.txt:97:./autocapture/plugins/manager.py:108:                    "enabled": manifest.plugin_id in enabled,
./docs/reports/grep_plugin_manifest.txt:98:./autocapture/plugins/manager.py:109:                    "path": str(manifest.path),
./docs/reports/grep_plugin_manifest.txt:99:./autocapture/plugins/manager.py:117:        for manifest in self._manifests:
./docs/reports/grep_plugin_manifest.txt:100:./autocapture/plugins/manager.py:118:            for ext in manifest.extensions:
./docs/reports/grep_plugin_manifest.txt:101:./autocapture/plugins/manager.py:121:                        "plugin_id": manifest.plugin_id,
./docs/reports/grep_plugin_manifest.txt:102:./autocapture/plugins/manager.py:125:                        "enabled": manifest.plugin_id in enabled,
./docs/reports/grep_plugin_manifest.txt:103:./autocapture/plugins/manager.py:131:        """Reload manifests if they changed. Returns plugin_ids reloaded."""
./docs/reports/grep_plugin_manifest.txt:104:./autocapture/plugins/manager.py:133:        for path, last_mtime in list(self._manifest_mtimes.items()):
./docs/reports/grep_plugin_manifest.txt:105:./autocapture/plugins/manager.py:138:            if mtime != last_mtime or digest != self._manifest_hashes.get(path):
./docs/reports/grep_plugin_manifest.txt:106:./autocapture/plugins/manager.py:139:                manifest = PluginManifest.from_path(path)
./docs/reports/grep_plugin_manifest.txt:107:./autocapture/plugins/manager.py:140:                self._manifest_mtimes[path] = mtime
./docs/reports/grep_plugin_manifest.txt:108:./autocapture/plugins/manager.py:141:                self._manifest_hashes[path] = digest
./docs/reports/grep_plugin_manifest.txt:109:./autocapture/plugins/manager.py:142:                self._manifests = [m for m in self._manifests if m.path != path] + [manifest]
./docs/reports/grep_plugin_manifest.txt:110:./autocapture/plugins/manager.py:143:                reloaded.append(manifest.plugin_id)
./docs/reports/grep_plugin_manifest.txt:111:./autocapture/plugins/manager.py:144:                self._reload_plugins.add(manifest.plugin_id)
./docs/reports/grep_plugin_manifest.txt:112:./autocapture/plugins/manager.py:148:                    if key[0] != manifest.plugin_id
./docs/reports/grep_plugin_manifest.txt:113:./autocapture/plugins/manager.py:177:        for manifest in self._manifests:
./docs/reports/grep_plugin_manifest.txt:114:./autocapture/plugins/manager.py:178:            if manifest.plugin_id not in enabled:
./docs/reports/grep_plugin_manifest.txt:115:./autocapture/plugins/manager.py:180:            for ext in manifest.extensions:
./docs/reports/grep_plugin_manifest.txt:116:./autocapture/plugins/manager.py:185:                cache_key = (manifest.plugin_id, ext.name)
./docs/reports/grep_plugin_manifest.txt:117:./autocapture/plugins/manager.py:188:                force_reload = manifest.plugin_id in self._reload_plugins
./docs/reports/grep_plugin_manifest.txt:118:./autocapture/plugins/manager.py:190:                instance = factory(manifest.plugin_id)
./docs/reports/grep_plugin_manifest.txt:119:./autocapture/plugins/manager.py:192:                    self._reload_plugins.discard(manifest.plugin_id)
./docs/reports/grep_plugin_manifest.txt:120:./autocapture/plugins/manager.py:193:                wrapped = ExtensionInstance(plugin_id=manifest.plugin_id, manifest=ext, instance=instance)
./docs/reports/grep_plugin_manifest.txt:121:./autocapture/plugins/manager.py:199:def load_json_manifest(path: Path) -> dict[str, Any]:
./docs/reports/grep_plugin_manifest.txt:123:./docs/reports/grep_run_id.txt:22:./docs/blueprints/autocapture_nx_blueprint.md:569:  - Store run manifest linking run_id to config/locks hashes.
./docs/reports/grep_plugin_manifest.txt:153:./autocapture/codex/validators.py:162:def _iter_plugin_manifests(root: Path) -> list[Path]:
./docs/reports/grep_plugin_manifest.txt:154:./autocapture/codex/validators.py:173:    from autocapture.plugins.manifest import PluginManifest
./docs/reports/grep_plugin_manifest.txt:155:./autocapture/codex/validators.py:175:    manifests = _iter_plugin_manifests(Path("autocapture_plugins"))
./docs/reports/grep_plugin_manifest.txt:156:./autocapture/codex/validators.py:177:    for manifest in manifests:
./docs/reports/grep_plugin_manifest.txt:157:./autocapture/codex/validators.py:178:        data = PluginManifest.from_path(manifest)
./docs/reports/grep_plugin_manifest.txt:158:./autocapture/codex/validators.py:188:    from autocapture.plugins.manifest import PluginManifest
./docs/reports/grep_plugin_manifest.txt:159:./autocapture/codex/validators.py:190:    manifests = _iter_plugin_manifests(Path("autocapture_plugins"))
./docs/reports/grep_plugin_manifest.txt:160:./autocapture/codex/validators.py:192:    for manifest in manifests:
./docs/reports/grep_plugin_manifest.txt:161:./autocapture/codex/validators.py:193:        data = PluginManifest.from_path(manifest)
./docs/reports/grep_plugin_manifest.txt:162:./docs/reports/grep_ledger.txt:127:./docs/blueprints/autocapture_nx_blueprint.md:1286:  - per-run manifest records (Pattern A) stored and ledgered
./docs/reports/grep_plugin_manifest.txt:163:./docs/reports/grep_ledger.txt:150:./docs/blueprints/autocapture_nx_blueprint.md:1793:  - indexes record version/digest in manifest and query ledger entries
./docs/reports/grep_plugin_manifest.txt:166:./docs/mx_equivalence_map.md:36:- Proof: `autocapture_nx/plugin_system/registry.py` (manifest discovery + validation + lockfile); `contracts/plugin_manifest.schema.json`; `tests/test_plugin_loader.py`
./docs/reports/grep_plugin_manifest.txt:168:./docs/mx_equivalence_map.md:46:- Proof: NX plugin IDs are `builtin.*` not `mx.*`; no `autocapture_plugins/` manifests.
./docs/reports/grep_plugin_manifest.txt:169:./docs/reports/grep_evidence.txt:69:./docs/blueprints/autocapture_nx_blueprint.md:797:  - Store it in run manifest and reference it in evidence records.
./docs/reports/grep_plugin_manifest.txt:170:./docs/reports/grep_evidence.txt:83:./docs/blueprints/autocapture_nx_blueprint.md:1394:  - Test: migrate copies all evidence and manifests; verification passes
./docs/reports/grep_plugin_manifest.txt:171:./docs/reports/grep_evidence.txt:106:./docs/blueprints/autocapture_nx_blueprint.md:1656:  - run manifest evidence record written early and finalized at end
./docs/reports/grep_plugin_manifest.txt:183:./docs/mx_gap_matrix.md:40:- Existing (NX): autocapture_nx/plugin_system/registry.py; contracts/plugin_manifest.schema.json; plugins/**/plugin.json; config/plugin_locks.json
./docs/reports/grep_plugin_manifest.txt:184:./docs/mx_gap_matrix.md:41:- Missing (MX paths/tests): autocapture/plugins/manifest.py, manager.py, kinds.py; tests/test_plugin_discovery_no_import.py; CLI JSON schema
./docs/reports/grep_plugin_manifest.txt:185:./docs/mx_gap_matrix.md:43:  - Artifacts: autocapture/plugins/manifest.py; autocapture/plugins/manager.py; autocapture/plugins/kinds.py
./docs/reports/grep_plugin_manifest.txt:186:./docs/mx_gap_matrix.md:57:- Missing (MX paths/tests): autocapture_plugins/ manifests with mx.* IDs; tests for required IDs/kinds; plugins verify-defaults CLI
./docs/reports/grep_plugin_manifest.txt:189:./docs/mx_gap_matrix.md:297:- Missing (MX paths/tests): autocapture/training/pipelines.py; autocapture/training/lora.py; autocapture/training/dpo.py; autocapture/training/datasets.py; tests/test_training_manifest_schema.py
./docs/reports/grep_plugin_manifest.txt:191:./docs/blueprints/autocapture_nx_blueprint.md:110:- [ ] **I033** (Phase 3) — [Add per-run storage manifest records](#i033)
./docs/reports/grep_plugin_manifest.txt:192:./docs/blueprints/autocapture_nx_blueprint.md:129:- [ ] **I052** (Phase 6) — [Enforce least privilege per plugin manifest](#i052)
./docs/reports/grep_plugin_manifest.txt:193:./docs/blueprints/autocapture_nx_blueprint.md:146:- [ ] **I069** (Phase 4) — [Immutable per-run manifest (config+locks+versions)](#i069)
./docs/reports/grep_plugin_manifest.txt:194:./docs/blueprints/autocapture_nx_blueprint.md:204:- [ ] **I127** (Phase 4) — [Record python/OS/package versions into run manifest](#i127)
./docs/reports/grep_plugin_manifest.txt:195:./docs/blueprints/autocapture_nx_blueprint.md:231:  - builtin plugin manifests declare optional deps
./docs/reports/grep_plugin_manifest.txt:196:./docs/blueprints/autocapture_nx_blueprint.md:569:  - Store run manifest linking run_id to config/locks hashes.
./docs/reports/grep_plugin_manifest.txt:197:./docs/blueprints/autocapture_nx_blueprint.md:797:  - Store it in run manifest and reference it in evidence records.
./docs/reports/grep_plugin_manifest.txt:198:./docs/blueprints/autocapture_nx_blueprint.md:1019:  - manifest and seal records only written after success
./docs/reports/grep_plugin_manifest.txt:199:./docs/blueprints/autocapture_nx_blueprint.md:1281:### I033 — Add per-run storage manifest records
./docs/reports/grep_plugin_manifest.txt:200:./docs/blueprints/autocapture_nx_blueprint.md:1286:  - per-run manifest records (Pattern A) stored and ledgered
./docs/reports/grep_plugin_manifest.txt:201:./docs/blueprints/autocapture_nx_blueprint.md:1288:  - Test: manifest exists for each run and includes expected hashes
./docs/reports/grep_plugin_manifest.txt:202:./docs/blueprints/autocapture_nx_blueprint.md:1293:  - Each run is reproducible/auditable from a single manifest.
./docs/reports/grep_plugin_manifest.txt:203:./docs/blueprints/autocapture_nx_blueprint.md:1394:  - Test: migrate copies all evidence and manifests; verification passes
./docs/reports/grep_plugin_manifest.txt:204:./docs/blueprints/autocapture_nx_blueprint.md:1651:### I069 — Immutable per-run manifest (config+locks+versions)
./docs/reports/grep_plugin_manifest.txt:205:./docs/blueprints/autocapture_nx_blueprint.md:1656:  - run manifest evidence record written early and finalized at end
./docs/reports/grep_plugin_manifest.txt:206:./docs/blueprints/autocapture_nx_blueprint.md:1658:  - Test: manifest includes config/plugin/contracts hashes + versions
./docs/reports/grep_plugin_manifest.txt:207:./docs/blueprints/autocapture_nx_blueprint.md:1663:  - A single manifest summarizes and identifies the full run context.
./docs/reports/grep_plugin_manifest.txt:208:./docs/blueprints/autocapture_nx_blueprint.md:1793:  - indexes record version/digest in manifest and query ledger entries
./docs/reports/grep_plugin_manifest.txt:209:./docs/blueprints/autocapture_nx_blueprint.md:1798:  - Store in manifest and attach to query executions for reproducibility.
./docs/reports/grep_plugin_manifest.txt:210:./docs/blueprints/autocapture_nx_blueprint.md:1803:### I127 — Record python/OS/package versions into run manifest
./docs/reports/grep_plugin_manifest.txt:211:./docs/blueprints/autocapture_nx_blueprint.md:1808:  - run manifest captures environment versions
./docs/reports/grep_plugin_manifest.txt:212:./docs/blueprints/autocapture_nx_blueprint.md:1810:  - Test: manifest contains python version, OS build, package versions list
./docs/reports/grep_plugin_manifest.txt:213:./docs/blueprints/autocapture_nx_blueprint.md:2001:  - Host enforces allowlist of capability methods per plugin manifest.
./docs/reports/grep_plugin_manifest.txt:214:./docs/blueprints/autocapture_nx_blueprint.md:2006:### I052 — Enforce least privilege per plugin manifest
./docs/reports/grep_plugin_manifest.txt:215:./docs/blueprints/autocapture_nx_blueprint.md:2011:  - plugin manifest declares required capabilities; loader enforces deny-by-default
./docs/reports/grep_plugin_manifest.txt:216:./docs/blueprints/autocapture_nx_blueprint.md:2015:  - Add manifest field `capabilities_required`.
./docs/reports/grep_plugin_manifest.txt:217:./docs/blueprints/autocapture_nx_blueprint.md:2027:  - manifest-declared read/readwrite paths enforced
./docs/reports/grep_plugin_manifest.txt:218:./docs/blueprints/autocapture_nx_blueprint.md:2197:  - At runtime, report installed package versions and compare to manifest where feasible.
./docs/reports/grep_plugin_manifest.txt:219:./docs/autocapture_nx_blueprint_final.md:272:Extend plugin manifests with explicit permissions. Network is denied to all plugins except the egress gateway. Add compatibility constraints and dependency locking.
./docs/reports/grep_plugin_manifest.txt:220:./docs/autocapture_nx_blueprint_final.md:481:- `hash_lock`: `{ manifest_sha256, artifact_sha256 }`
./docs/reports/grep_plugin_manifest.txt:223:./docs/autocapture_mx_implementation_plan.md:17:- Plugin manifests: JSON `plugin.json` with schema `contracts/plugin_manifest.schema.json`, lockfile `config/plugin_locks.json`.
./docs/reports/grep_plugin_manifest.txt:224:./docs/autocapture_mx_implementation_plan.md:45:| A | MOD-001..005 | autocapture CLI + config + core utils + plugin system + autocapture_plugins manifests | tests/test_config_defaults.py; tests/test_plugin_discovery_no_import.py; tests/test_plugin_kinds_registry.py; tests/test_policy_gate.py |
./docs/reports/grep_plugin_manifest.txt:225:./docs/autocapture_mx_implementation_plan.md:64:| MX-PLUGIN-0001 | python_import PluginManager + ExtensionManifest; tests/test_plugin_discovery_no_import.py; autocapture plugins list --json | autocapture/plugins/manifest.py; autocapture/plugins/manager.py; autocapture/plugins/kinds.py |
./docs/reports/grep_plugin_manifest.txt:226:./docs/autocapture_mx_implementation_plan.md:96:| MX-TRAIN-0001 | tests/test_training_manifest_schema.py | autocapture/training/pipelines.py; autocapture/training/lora.py; autocapture/training/dpo.py; autocapture/training/datasets.py |
./docs/reports/grep_plugin_manifest.txt:227:./docs/autocapture_mx_implementation_plan.md:119:- Artifacts: autocapture/plugins/manifest.py; autocapture/plugins/manager.py; autocapture/plugins/kinds.py
./docs/reports/grep_plugin_manifest.txt:228:./docs/autocapture_mx_implementation_plan.md:121:- Minimal implementation: manifest parsing/validation, discovery without importing plugin code, list command returns plugins + extensions.
./docs/reports/grep_plugin_manifest.txt:229:./docs/autocapture_mx_implementation_plan.md:131:- Minimal implementation: built-in manifests for required mx.* IDs, enabled by default, kind coverage passes.
./docs/reports/grep_plugin_manifest.txt:230:./docs/autocapture_mx_implementation_plan.md:266:- Minimal implementation: export/import bundles with manifest + hash verification.
./docs/reports/grep_plugin_manifest.txt:231:./docs/autocapture_mx_implementation_plan.md:280:- Validation: unit_test tests/test_training_manifest_schema.py
./docs/reports/grep_plugin_manifest.txt:232:./docs/autocapture_mx_implementation_plan.md:281:- Minimal implementation: reproducible manifests for LoRA + DPO (stub workloads OK).
./docs/reports/grep_plugin_manifest.txt:233:./docs/autocapture_mx_blueprint.md:6:**Compatibility baseline:** Ninjra Autocapture plugin + policy patterns (manifests, policy gate, retrieval tiering, PromptOps, CI gates), extended and enforced for the Autocapture “4 Pillars”.
./docs/reports/grep_plugin_manifest.txt:234:./docs/autocapture_mx_blueprint.md:130:    manifest.py
./docs/reports/grep_plugin_manifest.txt:235:./docs/autocapture_mx_blueprint.md:251:- `autocapture_plugins/` follows the Ninjra-style manifest convention.
./docs/reports/grep_plugin_manifest.txt:236:./docs/autocapture_mx_blueprint.md:252:- Plugin code can live in core package or separate wheels; manifests are the single discovery surface.
./docs/reports/grep_plugin_manifest.txt:237:./docs/autocapture_mx_blueprint.md:295:Each manifest file is YAML with:
./docs/reports/grep_plugin_manifest.txt:238:./docs/autocapture_mx_blueprint.md:335:- Discovery reads manifest YAML without importing plugin code.
./docs/reports/grep_plugin_manifest.txt:239:./docs/autocapture_mx_blueprint.md:341:- watching manifest timestamps,
./docs/reports/grep_plugin_manifest.txt:240:./docs/autocapture_mx_blueprint.md:356:- plugin manifests from external directories are ignored.
./docs/reports/grep_plugin_manifest.txt:241:./docs/autocapture_mx_blueprint.md:376:All built-in plugin manifests live in `autocapture_plugins/` and are enabled by default unless blocked
./docs/reports/grep_plugin_manifest.txt:242:./docs/autocapture_mx_blueprint.md:412:Each built-in manifest declares pillar metadata and is covered by Codex validation.
./docs/reports/grep_plugin_manifest.txt:243:./docs/autocapture_mx_blueprint.md:733:- a manifest JSON (schema versioned)
./docs/reports/grep_plugin_manifest.txt:244:./docs/autocapture_mx_blueprint.md:744:- manifest schema
./docs/reports/grep_plugin_manifest.txt:245:./docs/autocapture_mx_blueprint.md:786:- reproducible run manifests (JSON with hashes)
./docs/reports/grep_plugin_manifest.txt:246:./docs/autocapture_mx_blueprint.md:854:- plugin manifest loading
./docs/reports/grep_plugin_manifest.txt:247:./docs/autocapture_mx_blueprint.md:922:    title: Plugin manifest schema + manager + discovery
./docs/reports/grep_plugin_manifest.txt:248:./docs/autocapture_mx_blueprint.md:925:      - autocapture/plugins/manifest.py
./docs/reports/grep_plugin_manifest.txt:249:./docs/autocapture_mx_blueprint.md:932:        target: autocapture.plugins.manifest:ExtensionManifest
./docs/reports/grep_plugin_manifest.txt:250:./docs/autocapture_mx_blueprint.md:1311:    title: Export/import bundles with manifest + hash verification
./docs/reports/grep_plugin_manifest.txt:251:./docs/autocapture_mx_blueprint.md:1342:    title: Training pipelines (LoRA + DPO) with reproducible manifests
./docs/reports/grep_plugin_manifest.txt:252:./docs/autocapture_mx_blueprint.md:1351:        target: tests/test_training_manifest_schema.py
./docs/reports/grep_plugin_manifest.txt:253:./autocapture/training/lora.py:1:"""LoRA training pipeline (deterministic manifest)."""
./docs/reports/grep_plugin_manifest.txt:254:./autocapture/training/lora.py:56:    manifest = {
./docs/reports/grep_plugin_manifest.txt:255:./autocapture/training/lora.py:57:        "manifest_version": 1,
./docs/reports/grep_plugin_manifest.txt:256:./autocapture/training/lora.py:66:    manifest_hash = hash_canonical(manifest)
./docs/reports/grep_plugin_manifest.txt:257:./autocapture/training/lora.py:67:    manifest["manifest_hash"] = manifest_hash
./docs/reports/grep_plugin_manifest.txt:258:./autocapture/training/lora.py:68:    manifest_path = output_dir / "manifest.json"
./docs/reports/grep_plugin_manifest.txt:259:./autocapture/training/lora.py:69:    manifest_path.write_text(json.dumps(manifest, indent=2, sort_keys=True), encoding="utf-8")
./docs/reports/grep_plugin_manifest.txt:260:./autocapture/training/lora.py:70:    return manifest
./docs/reports/grep_plugin_manifest.txt:264:./plugins/builtin/capture_windows/plugin.json:30:    "manifest_sha256": "",
./docs/reports/grep_plugin_manifest.txt:265:./autocapture_nx/cli.py:62:    manifests = registry.discover_manifests()
./docs/reports/grep_plugin_manifest.txt:266:./autocapture_nx/cli.py:67:    for manifest_path in manifests:
./docs/reports/grep_plugin_manifest.txt:267:./autocapture_nx/cli.py:68:        with open(manifest_path, "r", encoding="utf-8") as handle:
./docs/reports/grep_plugin_manifest.txt:268:./autocapture_nx/cli.py:69:            manifest = json.load(handle)
./docs/reports/grep_plugin_manifest.txt:269:./autocapture_nx/cli.py:70:        pid = manifest["plugin_id"]
./docs/reports/grep_plugin_manifest.txt:270:./autocapture_nx/cli.py:75:                "enabled": enabled.get(pid, manifest.get("enabled", True)),
./docs/reports/grep_plugin_manifest.txt:271:./autocapture_nx/cli.py:76:                "path": str(manifest_path.parent),
./docs/reports/grep_plugin_manifest.txt:272:./autocapture/training/dpo.py:1:"""DPO training pipeline (deterministic manifest)."""
./docs/reports/grep_plugin_manifest.txt:273:./autocapture/training/dpo.py:56:    manifest = {
./docs/reports/grep_plugin_manifest.txt:274:./autocapture/training/dpo.py:57:        "manifest_version": 1,
./docs/reports/grep_plugin_manifest.txt:275:./autocapture/training/dpo.py:66:    manifest_hash = hash_canonical(manifest)
./docs/reports/grep_plugin_manifest.txt:276:./autocapture/training/dpo.py:67:    manifest["manifest_hash"] = manifest_hash
./docs/reports/grep_plugin_manifest.txt:277:./autocapture/training/dpo.py:68:    manifest_path = output_dir / "manifest.json"
./docs/reports/grep_plugin_manifest.txt:278:./autocapture/training/dpo.py:69:    manifest_path.write_text(json.dumps(manifest, indent=2, sort_keys=True), encoding="utf-8")
./docs/reports/grep_plugin_manifest.txt:279:./autocapture/training/dpo.py:70:    return manifest
./docs/reports/grep_plugin_manifest.txt:288:./plugins/builtin/capture_stub/plugin.json:25:    "manifest_sha256": "",
./docs/reports/grep_plugin_manifest.txt:303:./autocapture/storage/archive.py:37:        manifest = {"schema_version": 1, "files": files}
./docs/reports/grep_plugin_manifest.txt:304:./autocapture/storage/archive.py:38:        zf.writestr("manifest.json", json.dumps(manifest, indent=2, sort_keys=True))
./docs/reports/grep_plugin_manifest.txt:305:./autocapture/storage/archive.py:47:            manifest = json.loads(zf.read("manifest.json"))
./docs/reports/grep_plugin_manifest.txt:306:./autocapture/storage/archive.py:49:            return False, ["manifest_missing"]
./docs/reports/grep_plugin_manifest.txt:307:./autocapture/storage/archive.py:50:        files = manifest.get("files", {})
./docs/mx_gap_matrix.md:1:# Autocapture MX Gap Matrix (baseline)
./docs/mx_gap_matrix.md:3:Source blueprint: docs/autocapture_mx_blueprint.md
./docs/mx_gap_matrix.md:4:Spec extract: docs/spec/autocapture_mx_spec.yaml
./docs/mx_gap_matrix.md:16:- Existing (NX): autocapture_nx/kernel/config.py, config/default.json, contracts/config_schema.json
./docs/mx_gap_matrix.md:17:- Missing (MX paths/tests): autocapture/config/models.py, autocapture/config/load.py, autocapture/config/defaults.py, tests/test_config_defaults.py
./docs/mx_gap_matrix.md:19:  - Artifacts: autocapture/config/models.py; autocapture/config/load.py; autocapture/config/defaults.py
./docs/mx_gap_matrix.md:20:  - Validators: python_import autocapture.config.load:load_config; unit_test tests/test_config_defaults.py
./docs/mx_gap_matrix.md:24:- Existing (NX): autocapture_nx/cli.py (no delete/purge/wipe commands detected)
./docs/mx_gap_matrix.md:25:- Missing (MX paths/tests): autocapture/ux/facade.py, autocapture/web/api.py, HTTP route checks
./docs/mx_gap_matrix.md:27:  - Artifacts: autocapture/ux/facade.py; autocapture/web/api.py
./docs/mx_gap_matrix.md:28:  - Validators: cli_output_regex_absent (autocapture --help, delete/purge/wipe); http_routes_absent (/api/delete, /api/purge, /api/wipe)
./docs/mx_gap_matrix.md:32:- Existing (NX): autocapture_nx/kernel/canonical_json.py; autocapture_nx/kernel/hashing.py
./docs/mx_gap_matrix.md:33:- Missing (MX paths/tests): autocapture/core/hashing.py, autocapture/core/ids.py, autocapture/core/jsonschema.py, tests/test_hashing_canonical.py, tests/test_ids_stable.py
./docs/mx_gap_matrix.md:35:  - Artifacts: autocapture/core/hashing.py; autocapture/core/ids.py; autocapture/core/jsonschema.py
./docs/mx_gap_matrix.md:40:- Existing (NX): autocapture_nx/plugin_system/registry.py; contracts/plugin_manifest.schema.json; plugins/**/plugin.json; config/plugin_locks.json
./docs/mx_gap_matrix.md:41:- Missing (MX paths/tests): autocapture/plugins/manifest.py, manager.py, kinds.py; tests/test_plugin_discovery_no_import.py; CLI JSON schema
./docs/mx_gap_matrix.md:43:  - Artifacts: autocapture/plugins/manifest.py; autocapture/plugins/manager.py; autocapture/plugins/kinds.py
./docs/mx_gap_matrix.md:44:  - Validators: python_import PluginManager + ExtensionManifest; unit_test tests/test_plugin_discovery_no_import.py; cli_json autocapture plugins list --json
./docs/mx_gap_matrix.md:49:- Missing (MX paths/tests): autocapture/plugins/kinds.py; tests/test_plugin_kinds_registry.py
./docs/mx_gap_matrix.md:51:  - Artifacts: autocapture/plugins/kinds.py
./docs/mx_gap_matrix.md:57:- Missing (MX paths/tests): autocapture_plugins/ manifests with mx.* IDs; tests for required IDs/kinds; plugins verify-defaults CLI
./docs/mx_gap_matrix.md:59:  - Artifacts: autocapture_plugins/
./docs/mx_gap_matrix.md:60:  - Validators: plugins_have_ids (mx.* list); plugins_have_kinds (required kinds list); cli_exit autocapture plugins verify-defaults
./docs/mx_gap_matrix.md:65:- Missing (MX paths/tests): autocapture/plugins/manager.py hot-swap; tests/test_plugin_hotswap.py
./docs/mx_gap_matrix.md:67:  - Artifacts: autocapture/plugins/manager.py
./docs/mx_gap_matrix.md:72:- Existing (NX): safe_mode config in autocapture_nx/kernel/config.py and autocapture_nx/plugin_system/registry.py; network allowlist in autocapture_nx/kernel/loader.py
./docs/mx_gap_matrix.md:73:- Missing (MX paths/tests): autocapture/plugins/policy_gate.py; (note: tests/test_safe_mode.py exists but targets NX paths/capabilities)
./docs/mx_gap_matrix.md:75:  - Artifacts: autocapture/plugins/manager.py; autocapture/plugins/policy_gate.py
./docs/mx_gap_matrix.md:80:- Existing (NX): autocapture_nx/plugin_system/runtime.py (network_guard); plugins/builtin/egress_gateway/plugin.py
./docs/mx_gap_matrix.md:81:- Missing (MX paths/tests): autocapture/plugins/policy_gate.py; autocapture/core/http.py; tests/test_policy_gate.py
./docs/mx_gap_matrix.md:83:  - Artifacts: autocapture/plugins/policy_gate.py; autocapture/core/http.py
./docs/mx_gap_matrix.md:89:- Missing (MX paths/tests): autocapture/memory/entities.py; autocapture/ux/redaction.py; tests/test_entity_hashing_stable.py; tests/test_sanitizer_no_raw_pii.py
./docs/mx_gap_matrix.md:91:  - Artifacts: autocapture/memory/entities.py; autocapture/ux/redaction.py
./docs/mx_gap_matrix.md:97:- Missing (MX paths/tests): autocapture/runtime/governor.py; autocapture/runtime/activity.py; autocapture/runtime/scheduler.py; autocapture/runtime/budgets.py; tests/test_governor_gating.py
./docs/mx_gap_matrix.md:99:  - Artifacts: autocapture/runtime/governor.py; autocapture/runtime/activity.py; autocapture/runtime/scheduler.py; autocapture/runtime/budgets.py
./docs/mx_gap_matrix.md:105:- Missing (MX paths/tests): autocapture/runtime/leases.py; tests/test_work_leases.py
./docs/mx_gap_matrix.md:107:  - Artifacts: autocapture/runtime/leases.py
./docs/mx_gap_matrix.md:112:- Existing (NX): plugins/builtin/storage_encrypted/plugin.py; plugins/builtin/storage_sqlcipher/plugin.py; autocapture_nx/kernel/crypto.py; autocapture_nx/kernel/keyring.py; autocapture_nx/kernel/key_rotation.py
./docs/mx_gap_matrix.md:113:- Missing (MX paths/tests): autocapture/storage/database.py; autocapture/storage/sqlcipher.py; autocapture/storage/keys.py; autocapture/storage/media_store.py; autocapture/storage/blob_store.py; tests/test_key_export_import_roundtrip.py; tests/test_sqlcipher_roundtrip.py; tests/test_blob_encryption_roundtrip.py
./docs/mx_gap_matrix.md:115:  - Artifacts: autocapture/storage/database.py; autocapture/storage/sqlcipher.py; autocapture/storage/keys.py; autocapture/storage/media_store.py; autocapture/storage/blob_store.py
./docs/mx_gap_matrix.md:121:- Missing (MX paths/tests): autocapture/pillars/citable.py; autocapture/storage/archive.py; tests/test_provenance_chain.py; CLI provenance verify
./docs/mx_gap_matrix.md:123:  - Artifacts: autocapture/pillars/citable.py; autocapture/core/hashing.py; autocapture/storage/archive.py
./docs/mx_gap_matrix.md:124:  - Validators: unit_test tests/test_provenance_chain.py; cli_exit autocapture provenance verify
./docs/mx_gap_matrix.md:129:- Missing (MX paths/tests): autocapture/rules/ledger.py; autocapture/rules/store.py; autocapture/rules/schema.py; autocapture/rules/cli.py; tests/test_rules_ledger_append_only.py; tests/test_rules_state_rebuild.py
./docs/mx_gap_matrix.md:131:  - Artifacts: autocapture/rules/ledger.py; autocapture/rules/store.py; autocapture/rules/schema.py; autocapture/rules/cli.py
./docs/mx_gap_matrix.md:136:- Existing (NX): plugins/builtin/capture_windows/plugin.py; plugins/builtin/capture_stub/plugin.py; plugins/builtin/audio_windows/plugin.py; plugins/builtin/window_metadata_windows/plugin.py
./docs/mx_gap_matrix.md:137:- Missing (MX paths/tests): autocapture/capture/spool.py; autocapture/capture/pipelines.py; autocapture/capture/models.py; tests/test_capture_spool_idempotent.py
./docs/mx_gap_matrix.md:139:  - Artifacts: autocapture/capture/spool.py; autocapture/capture/pipelines.py; autocapture/capture/models.py
./docs/mx_gap_matrix.md:140:  - Validators: unit_test tests/test_capture_spool_idempotent.py
./docs/mx_gap_matrix.md:145:- Missing (MX paths/tests): autocapture/ingest/normalizer.py; autocapture/ingest/spans.py; tests/test_span_ids_stable.py; tests/test_span_bbox_norm.py
./docs/mx_gap_matrix.md:147:  - Artifacts: autocapture/ingest/normalizer.py; autocapture/ingest/spans.py
./docs/mx_gap_matrix.md:153:- Missing (MX paths/tests): autocapture/plugins/kinds.py entries + table extractor implementation; tests/test_table_extractor_strategies.py
./docs/mx_gap_matrix.md:155:  - Artifacts: autocapture/plugins/kinds.py
./docs/mx_gap_matrix.md:161:- Missing (MX paths/tests): autocapture/indexing/lexical.py; tests/test_fts_query_returns_hits.py
./docs/mx_gap_matrix.md:163:  - Artifacts: autocapture/indexing/lexical.py
./docs/mx_gap_matrix.md:169:- Missing (MX paths/tests): autocapture/indexing/vector.py; tests/test_vector_index_roundtrip.py
./docs/mx_gap_matrix.md:171:  - Artifacts: autocapture/indexing/vector.py
./docs/mx_gap_matrix.md:177:- Missing (MX paths/tests): autocapture/indexing/vector.py; autocapture/tools/vendor_windows_binaries.py; tests/test_qdrant_sidecar_healthcheck.py
./docs/mx_gap_matrix.md:179:  - Artifacts: autocapture/indexing/vector.py; autocapture/tools/vendor_windows_binaries.py
./docs/mx_gap_matrix.md:185:- Missing (MX paths/tests): autocapture/indexing/graph.py; tests/test_graph_adapter_contract.py
./docs/mx_gap_matrix.md:187:  - Artifacts: autocapture/indexing/graph.py
./docs/mx_gap_matrix.md:192:- Existing (NX): plugins/builtin/retrieval_basic/plugin.py; plugins/builtin/reranker_stub/plugin.py; autocapture_nx/kernel/query.py
./docs/mx_gap_matrix.md:193:- Missing (MX paths/tests): autocapture/retrieval/tiers.py; autocapture/retrieval/fusion.py; autocapture/retrieval/rerank.py; autocapture/retrieval/signals.py; tests/test_rrf_fusion_determinism.py; tests/test_tier_planner_escalation.py
./docs/mx_gap_matrix.md:195:  - Artifacts: autocapture/retrieval/tiers.py; autocapture/retrieval/fusion.py; autocapture/retrieval/rerank.py; autocapture/retrieval/signals.py
./docs/mx_gap_matrix.md:201:- Missing (MX paths/tests): autocapture/memory/context_pack.py; tests/test_context_pack_formats.py
./docs/mx_gap_matrix.md:203:  - Artifacts: autocapture/memory/context_pack.py; autocapture/retrieval/signals.py
./docs/mx_gap_matrix.md:208:- Existing (NX): plugins/builtin/answer_basic/plugin.py; plugins/builtin/citation_basic/plugin.py; autocapture_nx/kernel/query.py
./docs/mx_gap_matrix.md:209:- Missing (MX paths/tests): autocapture/memory/answer_orchestrator.py; autocapture/memory/citations.py; autocapture/memory/verifier.py; autocapture/memory/conflict.py; tests/test_citation_validation.py; tests/test_verifier_enforced.py; tests/test_conflict_reporting.py
./docs/mx_gap_matrix.md:211:  - Artifacts: autocapture/memory/answer_orchestrator.py; autocapture/memory/citations.py; autocapture/memory/verifier.py; autocapture/memory/conflict.py
./docs/mx_gap_matrix.md:217:- Missing (MX paths/tests): autocapture/gateway/app.py; autocapture/gateway/router.py; autocapture/gateway/schemas.py; tests/test_gateway_schema_enforced.py; tests/test_gateway_policy_block_cloud_default.py
./docs/mx_gap_matrix.md:219:  - Artifacts: autocapture/gateway/app.py; autocapture/gateway/router.py; autocapture/gateway/schemas.py
./docs/mx_gap_matrix.md:225:- Missing (MX paths/tests): autocapture/ux/facade.py; autocapture/ux/models.py; tests/test_ux_facade_parity.py
./docs/mx_gap_matrix.md:227:  - Artifacts: autocapture/ux/facade.py; autocapture/ux/models.py
./docs/mx_gap_matrix.md:233:- Missing (MX paths/tests): autocapture/ux/settings_schema.py; autocapture/ux/preview_tokens.py; autocapture/web/routes/settings.py; tests/test_settings_preview_tokens.py
./docs/mx_gap_matrix.md:235:  - Artifacts: autocapture/ux/settings_schema.py; autocapture/ux/preview_tokens.py; autocapture/web/routes/settings.py
./docs/mx_gap_matrix.md:241:- Missing (MX paths/tests): autocapture/web/api.py; autocapture/web/routes/query.py; autocapture/web/routes/citations.py; autocapture/web/routes/plugins.py; autocapture/web/routes/health.py; autocapture/web/routes/metrics.py; tests/test_* web validators
./docs/mx_gap_matrix.md:243:  - Artifacts: autocapture/web/api.py; autocapture/web/routes/query.py; autocapture/web/routes/citations.py; autocapture/web/routes/plugins.py; autocapture/web/routes/health.py; autocapture/web/routes/metrics.py
./docs/mx_gap_matrix.md:249:- Missing (MX paths/tests): autocapture/web/routes/citations.py; tests/test_citation_overlay_contract.py
./docs/mx_gap_matrix.md:251:  - Artifacts: autocapture/web/routes/citations.py
./docs/mx_gap_matrix.md:256:- Existing (NX): autocapture_nx/cli.py (doctor); autocapture_nx/kernel/loader.py (doctor checks)
./docs/mx_gap_matrix.md:257:- Missing (MX paths/tests): autocapture/ux/models.py; autocapture/web/routes/health.py; tests/test_doctor_report_schema.py
./docs/mx_gap_matrix.md:259:  - Artifacts: autocapture/ux/models.py; autocapture/web/routes/health.py
./docs/mx_gap_matrix.md:265:- Missing (MX paths/tests): autocapture/web/routes/metrics.py; tests/test_metrics_endpoint_exposes_counters.py; OTel/Prometheus integrations
./docs/mx_gap_matrix.md:267:  - Artifacts: autocapture/web/routes/metrics.py
./docs/mx_gap_matrix.md:273:- Missing (MX paths/tests): autocapture/storage/archive.py; tests/test_export_import_roundtrip.py
./docs/mx_gap_matrix.md:275:  - Artifacts: autocapture/storage/archive.py
./docs/mx_gap_matrix.md:281:- Missing (MX paths/tests): autocapture/tools/vendor_windows_binaries.py; tests/test_vendor_binaries_hashcheck.py
./docs/mx_gap_matrix.md:283:  - Artifacts: autocapture/tools/vendor_windows_binaries.py
./docs/mx_gap_matrix.md:289:- Missing (MX paths/tests): autocapture/promptops/propose.py; validate.py; evaluate.py; patch.py; github.py; tests/test_promptops_validation.py
./docs/mx_gap_matrix.md:291:  - Artifacts: autocapture/promptops/propose.py; autocapture/promptops/validate.py; autocapture/promptops/evaluate.py; autocapture/promptops/patch.py; autocapture/promptops/github.py
./docs/mx_gap_matrix.md:297:- Missing (MX paths/tests): autocapture/training/pipelines.py; autocapture/training/lora.py; autocapture/training/dpo.py; autocapture/training/datasets.py; tests/test_training_manifest_schema.py
./docs/mx_gap_matrix.md:299:  - Artifacts: autocapture/training/pipelines.py; autocapture/training/lora.py; autocapture/training/dpo.py; autocapture/training/datasets.py
./docs/mx_gap_matrix.md:305:- Missing (MX paths/tests): autocapture/research/scout.py; autocapture/research/cache.py; autocapture/research/diff.py; tests/test_research_scout_cache.py
./docs/mx_gap_matrix.md:307:  - Artifacts: autocapture/research/scout.py; autocapture/research/cache.py; autocapture/research/diff.py
./docs/mx_gap_matrix.md:313:- Missing (MX paths/tests): autocapture/tools/pillar_gate.py; privacy_scanner.py; provenance_gate.py; coverage_gate.py; latency_gate.py; retrieval_sensitivity.py; conflict_gate.py; integrity_gate.py; CLI codex pillar-gates
./docs/mx_gap_matrix.md:315:  - Artifacts: autocapture/tools/pillar_gate.py; autocapture/tools/privacy_scanner.py; autocapture/tools/provenance_gate.py; autocapture/tools/coverage_gate.py; autocapture/tools/latency_gate.py; autocapture/tools/retrieval_sensitivity.py; autocapture/tools/conflict_gate.py; autocapture/tools/integrity_gate.py
./docs/mx_gap_matrix.md:316:  - Validators: cli_exit autocapture codex pillar-gates
./docs/mx_gap_matrix.md:321:- Missing (MX paths/tests): autocapture/codex/cli.py; autocapture/codex/spec.py; autocapture/codex/validators.py; autocapture/codex/report.py; codex validate CLI
./docs/mx_gap_matrix.md:323:  - Artifacts: autocapture/codex/cli.py; autocapture/codex/spec.py; autocapture/codex/validators.py; autocapture/codex/report.py
./docs/mx_gap_matrix.md:324:  - Validators: cli_exit autocapture codex validate --json
./plugins/builtin/egress_sanitizer/plugin.py:13:from autocapture_nx.kernel.crypto import derive_key
./plugins/builtin/egress_sanitizer/plugin.py:14:from autocapture_nx.kernel.keyring import KeyRing
./plugins/builtin/egress_sanitizer/plugin.py:15:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/storage_sqlcipher/plugin.py:9:from autocapture_nx.kernel.keyring import KeyRing
./plugins/builtin/storage_sqlcipher/plugin.py:10:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/observability_basic/plugin.py:10:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./docs/mx_evidence_bundle.md:1:# Autocapture MX Evidence Bundle
./docs/mx_evidence_bundle.md:4:Branch: autocaptureprime/mx-replace
./docs/mx_evidence_bundle.md:5:Repo root: /mnt/d/projects/autocapture_prime
./docs/mx_evidence_bundle.md:8:- docs/spec/autocapture_mx_spec.yaml
./docs/mx_evidence_bundle.md:10:- docs/autocapture_mx_blueprint.md
./docs/mx_evidence_bundle.md:26:name = "autocapture_nx"
./docs/mx_evidence_bundle.md:29:autocapture = "autocapture_nx.cli:main"
./docs/mx_evidence_bundle.md:33:  "autocapture",
./docs/mx_evidence_bundle.md:34:  "autocapture.config",
./docs/mx_evidence_bundle.md:35:  "autocapture.core",
./docs/mx_evidence_bundle.md:36:  "autocapture.codex",
./docs/mx_evidence_bundle.md:37:  "autocapture.tools",
./docs/mx_evidence_bundle.md:38:  "autocapture.plugins",
./docs/mx_evidence_bundle.md:39:  "autocapture.memory",
./docs/mx_evidence_bundle.md:40:  "autocapture.ux",
./docs/mx_evidence_bundle.md:41:  "autocapture.runtime",
./docs/mx_evidence_bundle.md:42:  "autocapture.storage",
./docs/mx_evidence_bundle.md:43:  "autocapture.pillars",
./docs/mx_evidence_bundle.md:44:  "autocapture.capture",
./docs/mx_evidence_bundle.md:45:  "autocapture.ingest",
./docs/mx_evidence_bundle.md:46:  "autocapture.indexing",
./docs/mx_evidence_bundle.md:47:  "autocapture.retrieval",
./docs/mx_evidence_bundle.md:48:  "autocapture.web",
./docs/mx_evidence_bundle.md:49:  "autocapture.gateway",
./docs/mx_evidence_bundle.md:50:  "autocapture.promptops",
./docs/mx_evidence_bundle.md:51:  "autocapture.training",
./docs/mx_evidence_bundle.md:52:  "autocapture.research",
./docs/mx_evidence_bundle.md:53:  "autocapture.rules",
./docs/mx_evidence_bundle.md:54:  "autocapture_nx",
./docs/mx_evidence_bundle.md:55:  "autocapture_nx.kernel",
./docs/mx_evidence_bundle.md:56:  "autocapture_nx.plugin_system",
./docs/mx_evidence_bundle.md:57:  "autocapture_nx.windows",
./docs/mx_evidence_bundle.md:78:sed -n '1,200p' docs/spec/autocapture_mx_spec.yaml
./docs/mx_evidence_bundle.md:86:          - mx.core.capture_win
./docs/mx_evidence_bundle.md:104:      - autocapture/gateway/app.py
./docs/mx_evidence_bundle.md:105:      - autocapture/gateway/router.py
./docs/mx_evidence_bundle.md:106:      - autocapture/gateway/schemas.py
./docs/mx_evidence_bundle.md:128:sed -n '260,320p' docs/autocapture_mx_blueprint.md
./docs/mx_evidence_bundle.md:137:- `capture.source`
./docs/mx_evidence_bundle.md:138:- `capture.encoder`
./docs/mx_evidence_bundle.md:169:rg -n "\\bsocket\\b|subprocess\\.|requests\\.|httpx\\." -S autocapture autocapture_plugins || true
./docs/mx_evidence_bundle.md:173:autocapture/codex/validators.py:32:def _run_command(command: Iterable[str]) -> subprocess.CompletedProcess:
./docs/mx_evidence_bundle.md:174:autocapture/codex/validators.py:36:    return subprocess.run(cmd, env=env, capture_output=True, text=True)
./docs/mx_evidence_bundle.md:175:autocapture/codex/validators.py:54:    result = subprocess.run(
./docs/mx_evidence_bundle.md:176:autocapture/core/http.py:59:            with httpx.Client(timeout=self.timeout_s) as client:
./docs/mx_evidence_bundle.md:182:python3 -m autocapture_nx plugins list --json
./docs/mx_evidence_bundle.md:191:python3 -m autocapture_nx codex validate --json
./docs/mx_evidence_bundle.md:207:python3 -m autocapture_nx provenance verify
./autocapture_nx/__init__.py:1:"""Autocapture NX package."""
./docs/reports/grep_network_policy.txt:2:./docs/mx_equivalence_map.md:62:- Gap to MX: add `autocapture/plugins/policy_gate.py` and `autocapture/core/http.py` as sole network surface.
./docs/reports/grep_network_policy.txt:3:./docs/blueprints/autocapture_nx_blueprint.md:9:- **P3 Secure**: offline-by-default; network only when policy allows; fail closed for encryption/auth; least privilege for plugins.
./docs/reports/grep_network_policy.txt:4:./docs/blueprints/autocapture_nx_blueprint.md:172:- [ ] **I095** (Phase 0) — [Doctor validates locks, storage, anchors, and network policy](#i095)
./docs/reports/grep_network_policy.txt:5:./docs/blueprints/autocapture_nx_blueprint.md:420:### I095 — Doctor validates locks, storage, anchors, and network policy
./docs/reports/grep_network_policy.txt:6:./docs/blueprints/autocapture_nx_blueprint.md:431:  - anchor signing availability, network policy, path resolution.
./docs/reports/grep_network_policy.txt:9:./docs/reports/grep_anchor.txt:23:./docs/blueprints/autocapture_nx_blueprint.md:172:- [ ] **I095** (Phase 0) — [Doctor validates locks, storage, anchors, and network policy](#i095)
./docs/reports/grep_network_policy.txt:10:./docs/reports/grep_anchor.txt:28:./docs/blueprints/autocapture_nx_blueprint.md:420:### I095 — Doctor validates locks, storage, anchors, and network policy
./docs/reports/grep_network_policy.txt:11:./docs/reports/grep_anchor.txt:29:./docs/blueprints/autocapture_nx_blueprint.md:431:  - anchor signing availability, network policy, path resolution.
./autocapture/ux/redaction.py:7:from autocapture.memory.entities import build_hasher
./autocapture/ux/redaction.py:101:    from autocapture.config.defaults import default_config_paths
./autocapture/ux/redaction.py:102:    from autocapture.config.load import load_config
./docs/mx_equivalence_map.md:1:# Autocapture MX Equivalence Map (NX -> MX)
./docs/mx_equivalence_map.md:21:- Proof: `autocapture_nx/kernel/config.py` (load_config + safe_mode); `config/default.json` (privacy.cloud.enabled=false); `tests/test_config.py`
./docs/mx_equivalence_map.md:22:- Gap to MX: add `autocapture/config/*` modules + `tests/test_config_defaults.py` and wire Codex paths.
./docs/mx_equivalence_map.md:26:- Proof: `autocapture_nx/cli.py` (argparse subcommands, no delete/purge/wipe); repo search found no delete/purge/wipe in CLI or web code
./docs/mx_equivalence_map.md:27:- Gap to MX: add `autocapture/ux/facade.py`, `autocapture/web/api.py`, and ensure HTTP routes absent per validator.
./docs/mx_equivalence_map.md:31:- Proof: `autocapture_nx/kernel/canonical_json.py` (canonical JSON); `autocapture_nx/kernel/hashing.py` (sha256 helpers); `tests/test_canonical_json.py`
./docs/mx_equivalence_map.md:32:- Gap to MX: add `autocapture/core/ids.py` (stable IDs) and MX tests; confirm hashing primitive (blake3 vs sha256).
./docs/mx_equivalence_map.md:36:- Proof: `autocapture_nx/plugin_system/registry.py` (manifest discovery + validation + lockfile); `contracts/plugin_manifest.schema.json`; `tests/test_plugin_loader.py`
./docs/mx_equivalence_map.md:42:- Gap to MX: add explicit registry `autocapture/plugins/kinds.py` + required kinds test.
./docs/mx_equivalence_map.md:46:- Proof: NX plugin IDs are `builtin.*` not `mx.*`; no `autocapture_plugins/` manifests.
./docs/mx_equivalence_map.md:47:- Gap to MX: create `autocapture_plugins/` with required `mx.*` plugin IDs and default enablement.
./docs/mx_equivalence_map.md:51:- Proof: no hot-swap logic in `autocapture_nx/plugin_system/registry.py`.
./docs/mx_equivalence_map.md:56:- Proof: `autocapture_nx/kernel/config.py` safe_mode; `autocapture_nx/plugin_system/registry.py` default pack; `tests/test_safe_mode.py`.
./docs/mx_equivalence_map.md:61:- Proof: `autocapture_nx/plugin_system/runtime.py` (network_guard); `plugins/builtin/egress_gateway/plugin.py` (egress checks); `tests/test_network_guard.py`; `tests/test_egress_gateway.py`
./docs/mx_equivalence_map.md:62:- Gap to MX: add `autocapture/plugins/policy_gate.py` and `autocapture/core/http.py` as sole network surface.
./docs/mx_equivalence_map.md:67:- Gap to MX: add `autocapture/memory/entities.py` + `autocapture/ux/redaction.py` + MX tests.
./docs/mx_equivalence_map.md:76:- Proof: no lease manager in `autocapture_nx/`.
./docs/mx_equivalence_map.md:77:- Gap to MX: implement `autocapture/runtime/leases.py` + tests.
./docs/mx_equivalence_map.md:81:- Proof: `plugins/builtin/storage_encrypted/plugin.py` (encrypted metadata/blob/entity map); `autocapture_nx/kernel/keyring.py`; `autocapture_nx/kernel/key_rotation.py`; `tests/test_storage_encrypted.py`; `tests/test_key_rotation.py`; `plugins/builtin/storage_sqlcipher/plugin.py`; `tests/test_sqlcipher_store.py`
./docs/mx_equivalence_map.md:82:- Gap to MX: formal storage modules under `autocapture/storage/*` + key export/import + MX tests.
./docs/mx_equivalence_map.md:87:- Gap to MX: add provenance verify CLI and `autocapture/pillars/citable.py` + `autocapture/storage/archive.py`.
./docs/mx_equivalence_map.md:96:- Proof: `plugins/builtin/capture_windows/plugin.py` (segment capture + encrypted storage hooks); `plugins/builtin/capture_stub/plugin.py`
./docs/mx_equivalence_map.md:97:- Gap to MX: add capture spool + pipelines + models + idempotent spool test.
./docs/mx_equivalence_map.md:102:- Gap to MX: implement `autocapture/ingest/*` + tests.
./docs/mx_equivalence_map.md:112:- Gap to MX: implement `autocapture/indexing/lexical.py` + tests.
./docs/mx_equivalence_map.md:117:- Gap to MX: implement `autocapture/indexing/vector.py` + tests.
./docs/mx_equivalence_map.md:127:- Gap to MX: implement `autocapture/indexing/graph.py` + tests.
./docs/mx_equivalence_map.md:137:- Gap to MX: implement `autocapture/memory/context_pack.py` + tests.
./docs/mx_equivalence_map.md:141:- Proof: `plugins/builtin/answer_basic/plugin.py`; `plugins/builtin/citation_basic/plugin.py`; `autocapture_nx/kernel/query.py`; `tests/test_answer_builder.py`; `tests/test_query.py`
./docs/mx_equivalence_map.md:152:- Gap to MX: implement `autocapture/ux/*` + tests.
./docs/mx_equivalence_map.md:171:- Proof: `autocapture_nx/cli.py` (doctor command); `autocapture_nx/kernel/loader.py` (doctor checks)
./docs/mx_equivalence_map.md:182:- Gap to MX: implement `autocapture/storage/archive.py` + tests.
./docs/mx_equivalence_map.md:187:- Gap to MX: implement `autocapture/tools/vendor_windows_binaries.py` + tests.
./docs/mx_equivalence_map.md:212:- Gap to MX: implement `autocapture/codex/*` and CLI commands.
./docs/reports/grep_ledger.txt:11:./contracts/security.md:28:- `autocapture keys rotate` records a ledger entry and rewraps stores.
./docs/reports/grep_ledger.txt:31:./docs/STATE.md:22:- Keyring + rotation implemented via `autocapture keys rotate` with ledger + anchor entries.
./docs/reports/grep_ledger.txt:36:./plugins/builtin/capture_windows/plugin.py:49:        ledger = self.context.get_capability("ledger.writer")
./docs/reports/grep_ledger.txt:37:./plugins/builtin/capture_windows/plugin.py:64:                if not self._check_disk(logger, journal, ledger, anchor, warn_free, critical_free):
./docs/reports/grep_ledger.txt:38:./plugins/builtin/capture_windows/plugin.py:67:                self._flush_segment(frames, storage_media, storage_meta, journal, ledger, anchor, sequence)
./docs/reports/grep_ledger.txt:39:./plugins/builtin/capture_windows/plugin.py:76:    def _flush_segment(self, frames, storage_media, storage_meta, journal, ledger, anchor, sequence):
./docs/reports/grep_ledger.txt:40:./plugins/builtin/capture_windows/plugin.py:106:        ledger_hash = ledger.append(
./docs/reports/grep_ledger.txt:41:./plugins/builtin/capture_windows/plugin.py:118:        anchor.anchor(ledger_hash)
./docs/reports/grep_ledger.txt:42:./plugins/builtin/capture_windows/plugin.py:120:    def _check_disk(self, logger, journal, ledger, anchor, warn_free, critical_free) -> bool:
./docs/reports/grep_ledger.txt:43:./plugins/builtin/capture_windows/plugin.py:141:            ledger_hash = ledger.append(
./docs/reports/grep_ledger.txt:44:./plugins/builtin/capture_windows/plugin.py:153:            anchor.anchor(ledger_hash)
./docs/reports/grep_ledger.txt:46:./plugins/builtin/capture_windows/plugin.json:25:    "builtin.ledger.basic",
./docs/reports/grep_ledger.txt:47:./autocapture_nx/cli.py:231:    from autocapture.pillars.citable import verify_ledger
./docs/reports/grep_ledger.txt:48:./autocapture_nx/cli.py:234:        ledger_path = Path(args.path)
./docs/reports/grep_ledger.txt:49:./autocapture_nx/cli.py:238:        ledger_path = data_dir / "ledger.ndjson"
./docs/reports/grep_ledger.txt:50:./autocapture_nx/cli.py:240:    if not ledger_path.exists():
./docs/reports/grep_ledger.txt:51:./autocapture_nx/cli.py:241:        print(f"OK ledger_missing: {ledger_path}")
./docs/reports/grep_ledger.txt:52:./autocapture_nx/cli.py:244:    ok, errors = verify_ledger(ledger_path)
./docs/reports/grep_ledger.txt:53:./autocapture_nx/cli.py:246:        print("OK ledger_verified")
./docs/reports/grep_ledger.txt:54:./autocapture_nx/cli.py:248:    _print_json({"ok": False, "errors": errors, "path": str(ledger_path)})
./docs/reports/grep_ledger.txt:55:./docs/spec/autocapture_mx_spec.yaml:216:    title: Provenance ledger hash chain + verification CLI
./docs/reports/grep_ledger.txt:56:./docs/spec/autocapture_mx_spec.yaml:231:    title: Append-only rules ledger with state rebuild and query integration
./docs/reports/grep_ledger.txt:57:./docs/spec/autocapture_mx_spec.yaml:234:      - autocapture/rules/ledger.py
./docs/reports/grep_ledger.txt:58:./docs/spec/autocapture_mx_spec.yaml:240:        target: tests/test_rules_ledger_append_only.py
./docs/reports/grep_ledger.txt:66:./docs/autocapture_mx_blueprint.md:40:- **P4 Citable**: deterministic evidence + claim-level citations, validation, and provenance ledger.
./docs/reports/grep_ledger.txt:67:./docs/autocapture_mx_blueprint.md:174:    ledger.py
./docs/reports/grep_ledger.txt:68:./docs/autocapture_mx_blueprint.md:434:### 6.3 Provenance ledger (append-only)
./docs/reports/grep_ledger.txt:69:./docs/autocapture_mx_blueprint.md:493:- appended to ledger,
./docs/reports/grep_ledger.txt:70:./docs/autocapture_mx_blueprint.md:637:Sanitization is performed by `egress.sanitizer` plugin and recorded in ledger with a stable run id.
./docs/reports/grep_ledger.txt:71:./docs/autocapture_mx_blueprint.md:650:- `provenance`: ledger ids for query and answer
./docs/reports/grep_ledger.txt:72:./docs/autocapture_mx_blueprint.md:693:- per-request provenance ledger entries.
./docs/reports/grep_ledger.txt:73:./docs/autocapture_mx_blueprint.md:740:Every export appends a ledger entry.
./docs/reports/grep_ledger.txt:74:./docs/autocapture_mx_blueprint.md:776:These are stored locally and optionally appended to the repo ledger (.memory) for development traceability.
./docs/reports/grep_ledger.txt:75:./docs/autocapture_mx_blueprint.md:1085:    title: Provenance ledger hash chain + verification CLI
./docs/reports/grep_ledger.txt:76:./docs/autocapture_mx_blueprint.md:1100:    title: Append-only rules ledger with state rebuild and query integration
./docs/reports/grep_ledger.txt:77:./docs/autocapture_mx_blueprint.md:1103:      - autocapture/rules/ledger.py
./docs/reports/grep_ledger.txt:78:./docs/autocapture_mx_blueprint.md:1109:        target: tests/test_rules_ledger_append_only.py
./docs/reports/grep_ledger.txt:81:./docs/autocapture_mx_implementation_plan.md:75:| MX-RULES-0001 | tests/test_rules_ledger_append_only.py; tests/test_rules_state_rebuild.py | autocapture/rules/ledger.py; autocapture/rules/store.py; autocapture/rules/schema.py; autocapture/rules/cli.py |
./docs/reports/grep_ledger.txt:82:./docs/autocapture_mx_implementation_plan.md:171:- Minimal implementation: ledger append with hash chaining; CLI verify.
./docs/reports/grep_ledger.txt:83:./docs/autocapture_mx_implementation_plan.md:174:- Artifacts: autocapture/rules/ledger.py; autocapture/rules/store.py; autocapture/rules/schema.py; autocapture/rules/cli.py
./docs/reports/grep_ledger.txt:84:./docs/autocapture_mx_implementation_plan.md:175:- Validation: unit_test tests/test_rules_ledger_append_only.py; tests/test_rules_state_rebuild.py
./docs/reports/grep_ledger.txt:85:./docs/autocapture_mx_implementation_plan.md:176:- Minimal implementation: append-only rules ledger, rebuildable state, query integration hook.
./docs/reports/grep_ledger.txt:86:./docs/blueprints/autocapture_nx_blueprint.md:10:- **P4 Citable**: every non-trivial output must be traceable to immutable evidence with verifiable provenance (hashes, ledger, anchors).
./docs/reports/grep_ledger.txt:87:./docs/blueprints/autocapture_nx_blueprint.md:18:- **Deterministic, verifiable provenance**: hash-chained ledger + anchors + verification CLI.
./docs/reports/grep_ledger.txt:88:./docs/blueprints/autocapture_nx_blueprint.md:40:- Anchors are periodic signed/HMAC heads of the ledger to enable tamper detection.
./docs/reports/grep_ledger.txt:89:./docs/blueprints/autocapture_nx_blueprint.md:70:- **Phase 6: Security + egress hardening** — Least privilege plugins, subprocess sandbox, key separation/rotation, egress ledgering.
./docs/reports/grep_ledger.txt:90:./docs/blueprints/autocapture_nx_blueprint.md:78:- [ ] **I001** (Phase 1) — [Eliminate floats from journal/ledger payloads](#i001)
./docs/reports/grep_ledger.txt:91:./docs/blueprints/autocapture_nx_blueprint.md:84:- [ ] **I007** (Phase 1) — [Make ledger writing thread-safe](#i007)
./docs/reports/grep_ledger.txt:92:./docs/blueprints/autocapture_nx_blueprint.md:139:- [ ] **I062** (Phase 6) — [Add verify commands (ledger/anchors/evidence)](#i062)
./docs/reports/grep_ledger.txt:93:./docs/blueprints/autocapture_nx_blueprint.md:140:- [ ] **I063** (Phase 6) — [Audit security events in ledger (key rotations, lock updates, config)](#i063)
./docs/reports/grep_ledger.txt:94:./docs/blueprints/autocapture_nx_blueprint.md:153:- [ ] **I076** (Phase 4) — [Proof bundles export (evidence + ledger slice + anchors)](#i076)
./docs/reports/grep_ledger.txt:95:./docs/blueprints/autocapture_nx_blueprint.md:166:- [ ] **I089** (Phase 0) — [Add canonical-json safety tests for journal/ledger payloads](#i089)
./docs/reports/grep_ledger.txt:96:./docs/blueprints/autocapture_nx_blueprint.md:167:- [ ] **I090** (Phase 0) — [Add concurrency tests for ledger/journal append correctness](#i090)
./docs/reports/grep_ledger.txt:97:./docs/blueprints/autocapture_nx_blueprint.md:168:- [ ] **I091** (Phase 0) — [Add golden chain test: ledger verify + anchor verify](#i091)
./docs/reports/grep_ledger.txt:98:./docs/blueprints/autocapture_nx_blueprint.md:179:- [ ] **I102** (Phase 3) — [Track partial failures explicitly in journal/ledger](#i102)
./docs/reports/grep_ledger.txt:99:./docs/blueprints/autocapture_nx_blueprint.md:180:- [ ] **I103** (Phase 3) — [Add segment sealing ledger entry after successful write](#i103)
./docs/reports/grep_ledger.txt:100:./docs/blueprints/autocapture_nx_blueprint.md:200:- [ ] **I123** (Phase 1) — [Write kernel boot ledger entry system.start](#i123)
./docs/reports/grep_ledger.txt:101:./docs/blueprints/autocapture_nx_blueprint.md:201:- [ ] **I124** (Phase 1) — [Write kernel shutdown ledger entry system.stop](#i124)
./docs/reports/grep_ledger.txt:102:./docs/blueprints/autocapture_nx_blueprint.md:202:- [ ] **I125** (Phase 1) — [Write crash ledger entry on next startup](#i125)
./docs/reports/grep_ledger.txt:103:./docs/blueprints/autocapture_nx_blueprint.md:318:### I089 — Add canonical-json safety tests for journal/ledger payloads
./docs/reports/grep_ledger.txt:104:./docs/blueprints/autocapture_nx_blueprint.md:335:### I090 — Add concurrency tests for ledger/journal append correctness
./docs/reports/grep_ledger.txt:105:./docs/blueprints/autocapture_nx_blueprint.md:340:  - Thread-safety tests for ledger/journal writers
./docs/reports/grep_ledger.txt:106:./docs/blueprints/autocapture_nx_blueprint.md:352:### I091 — Add golden chain test: ledger verify + anchor verify
./docs/reports/grep_ledger.txt:107:./docs/blueprints/autocapture_nx_blueprint.md:357:  - Golden test corpus for ledger chain + anchors
./docs/reports/grep_ledger.txt:108:./docs/blueprints/autocapture_nx_blueprint.md:358:  - Gate: `tools/gate_ledger.py` verifies replay
./docs/reports/grep_ledger.txt:109:./docs/blueprints/autocapture_nx_blueprint.md:364:  - Commit small golden ledgers in `tests/golden/`.
./docs/reports/grep_ledger.txt:110:./docs/blueprints/autocapture_nx_blueprint.md:469:### I001 — Eliminate floats from journal/ledger payloads
./docs/reports/grep_ledger.txt:111:./docs/blueprints/autocapture_nx_blueprint.md:534:  - Writer batches writes into derived artifact blocks; ledger/journal at batch boundaries.
./docs/reports/grep_ledger.txt:112:./docs/blueprints/autocapture_nx_blueprint.md:574:### I007 — Make ledger writing thread-safe
./docs/reports/grep_ledger.txt:113:./docs/blueprints/autocapture_nx_blueprint.md:579:  - ledger writer: single-writer lock + atomic append semantics
./docs/reports/grep_ledger.txt:114:./docs/blueprints/autocapture_nx_blueprint.md:759:  - All plugins use EventBuilder for journal/ledger payloads
./docs/reports/grep_ledger.txt:115:./docs/blueprints/autocapture_nx_blueprint.md:802:### I123 — Write kernel boot ledger entry system.start
./docs/reports/grep_ledger.txt:116:./docs/blueprints/autocapture_nx_blueprint.md:807:  - kernel boot sequence writes `system.start` ledger entry
./docs/reports/grep_ledger.txt:117:./docs/blueprints/autocapture_nx_blueprint.md:809:  - Golden ledger test includes start entry
./docs/reports/grep_ledger.txt:118:./docs/blueprints/autocapture_nx_blueprint.md:812:  - At boot/capture start, write ledger entry including hashes:
./docs/reports/grep_ledger.txt:119:./docs/blueprints/autocapture_nx_blueprint.md:815:  - Every run has a verifiable origin entry in the ledger.
./docs/reports/grep_ledger.txt:120:./docs/blueprints/autocapture_nx_blueprint.md:818:### I124 — Write kernel shutdown ledger entry system.stop
./docs/reports/grep_ledger.txt:121:./docs/blueprints/autocapture_nx_blueprint.md:823:  - kernel shutdown writes `system.stop` ledger entry with final head hash
./docs/reports/grep_ledger.txt:122:./docs/blueprints/autocapture_nx_blueprint.md:827:  - On controlled shutdown, write final ledger entry referencing last head.
./docs/reports/grep_ledger.txt:123:./docs/blueprints/autocapture_nx_blueprint.md:833:### I125 — Write crash ledger entry on next startup
./docs/reports/grep_ledger.txt:124:./docs/blueprints/autocapture_nx_blueprint.md:843:  - Link to last known ledger head and recovery actions taken (I104).
./docs/reports/grep_ledger.txt:125:./docs/blueprints/autocapture_nx_blueprint.md:876:  - Stage 3 encrypts+writes atomically and emits evidence+ledger entries.
./docs/reports/grep_ledger.txt:126:./docs/blueprints/autocapture_nx_blueprint.md:1104:  - Treat audio as derived artifact if sourced from callback stream; ledger derivation.
./docs/reports/grep_ledger.txt:127:./docs/blueprints/autocapture_nx_blueprint.md:1286:  - per-run manifest records (Pattern A) stored and ledgered
./docs/reports/grep_ledger.txt:128:./docs/blueprints/autocapture_nx_blueprint.md:1305:  - Define fsync levels: journal+ledger always fsync; evidence seals fsync; bulk media optional.
./docs/reports/grep_ledger.txt:129:./docs/blueprints/autocapture_nx_blueprint.md:1326:### I102 — Track partial failures explicitly in journal/ledger
./docs/reports/grep_ledger.txt:130:./docs/blueprints/autocapture_nx_blueprint.md:1331:  - all failures emit typed journal/ledger events
./docs/reports/grep_ledger.txt:131:./docs/blueprints/autocapture_nx_blueprint.md:1341:### I103 — Add segment sealing ledger entry after successful write
./docs/reports/grep_ledger.txt:132:./docs/blueprints/autocapture_nx_blueprint.md:1346:  - segment lifecycle includes explicit `segment.sealed` ledger entry
./docs/reports/grep_ledger.txt:133:./docs/blueprints/autocapture_nx_blueprint.md:1362:  - writes recovery actions to ledger/journal
./docs/reports/grep_ledger.txt:134:./docs/blueprints/autocapture_nx_blueprint.md:1520:  - query execution writes ledger entry: inputs + retrieval plan + outputs
./docs/reports/grep_ledger.txt:135:./docs/blueprints/autocapture_nx_blueprint.md:1522:  - Golden: query ledger entry reproducible for fixed corpus
./docs/reports/grep_ledger.txt:136:./docs/blueprints/autocapture_nx_blueprint.md:1527:  - Every answer can be tied to a ledgered query execution record.
./docs/reports/grep_ledger.txt:137:./docs/blueprints/autocapture_nx_blueprint.md:1535:  - extraction writes ledger entry linking inputs/outputs
./docs/reports/grep_ledger.txt:138:./docs/blueprints/autocapture_nx_blueprint.md:1537:  - Test: derived artifacts have corresponding ledger derivation entries
./docs/reports/grep_ledger.txt:139:./docs/blueprints/autocapture_nx_blueprint.md:1555:  - span_start/end, ledger_head_ref, anchor_ref.
./docs/reports/grep_ledger.txt:140:./docs/blueprints/autocapture_nx_blueprint.md:1569:  - Resolver steps: load evidence, verify content_hash, verify ledger chain,
./docs/reports/grep_ledger.txt:141:./docs/blueprints/autocapture_nx_blueprint.md:1615:  - Compute hashes at write time and store in metadata and ledger.
./docs/reports/grep_ledger.txt:142:./docs/blueprints/autocapture_nx_blueprint.md:1626:  - ledger coverage expanded across all plugins and transitions
./docs/reports/grep_ledger.txt:143:./docs/blueprints/autocapture_nx_blueprint.md:1641:  - anchor plugin anchors ledger head on schedule
./docs/reports/grep_ledger.txt:144:./docs/blueprints/autocapture_nx_blueprint.md:1646:  - Anchor includes timestamp, ledger head hash, and signature/HMAC (I61).
./docs/reports/grep_ledger.txt:145:./docs/blueprints/autocapture_nx_blueprint.md:1660:  - Manifest initial write at start; finalize at stop with counters and last ledger head.
./docs/reports/grep_ledger.txt:146:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_ledger.txt:147:./docs/blueprints/autocapture_nx_blueprint.md:1717:  - ledger entries reference derivation edges
./docs/reports/grep_ledger.txt:148:./docs/blueprints/autocapture_nx_blueprint.md:1758:### I076 — Proof bundles export (evidence + ledger slice + anchors)
./docs/reports/grep_ledger.txt:149:./docs/blueprints/autocapture_nx_blueprint.md:1768:  - ledger slice covering them, relevant anchors, and verification reports.
./docs/reports/grep_ledger.txt:150:./docs/blueprints/autocapture_nx_blueprint.md:1793:  - indexes record version/digest in manifest and query ledger entries
./docs/reports/grep_ledger.txt:151:./docs/blueprints/autocapture_nx_blueprint.md:1938:  - Persist checkpoints in derived store; ledger transitions record progress.
./docs/reports/grep_ledger.txt:152:./docs/blueprints/autocapture_nx_blueprint.md:1945:Least privilege plugins, subprocess sandbox, key separation/rotation, egress ledgering.
./docs/reports/grep_ledger.txt:153:./docs/blueprints/autocapture_nx_blueprint.md:2000:  - Define capability RPC endpoints for safe operations (storage, journal, ledger).
./docs/reports/grep_ledger.txt:154:./docs/blueprints/autocapture_nx_blueprint.md:2147:  - anchor plugin uses HMAC/signature over ledger head
./docs/reports/grep_ledger.txt:155:./docs/blueprints/autocapture_nx_blueprint.md:2154:  - Anchors provide tamper evidence independent of ledger storage.
./docs/reports/grep_ledger.txt:156:./docs/blueprints/autocapture_nx_blueprint.md:2157:### I062 — Add verify commands (ledger/anchors/evidence)
./docs/reports/grep_ledger.txt:157:./docs/blueprints/autocapture_nx_blueprint.md:2162:  - verify CLI/API: `verify ledger`, `verify anchors`, `verify evidence`
./docs/reports/grep_ledger.txt:158:./docs/blueprints/autocapture_nx_blueprint.md:2172:### I063 — Audit security events in ledger (key rotations, lock updates, config)
./docs/reports/grep_ledger.txt:159:./docs/blueprints/autocapture_nx_blueprint.md:2177:  - ledger event types for security-relevant operations
./docs/reports/grep_ledger.txt:160:./docs/blueprints/autocapture_nx_blueprint.md:2179:  - Test: key rotation and lock updates emit ledger entries
./docs/reports/grep_ledger.txt:161:./docs/blueprints/autocapture_nx_blueprint.md:2222:  - egress gateway writes ledger entry for each sanitized outbound packet
./docs/reports/grep_ledger.txt:162:./docs/blueprints/autocapture_nx_blueprint.md:2224:  - Test: egress attempt emits `egress.packet` ledger entry with hash + schema version
./docs/reports/grep_ledger.txt:163:./docs/blueprints/autocapture_nx_blueprint.md:2380:  - Test: disabled by default; when enabled, records are append-only and ledgered
./docs/reports/grep_ledger.txt:164:./docs/autocapture_nx_blueprint_final.md:63:All significant actions affecting evidence, processing, retrieval, and egress are recorded in an append-only ledger.
./docs/reports/grep_ledger.txt:165:./docs/autocapture_nx_blueprint_final.md:71:All pipeline actions are recorded in a hash-chained ledger with periodic anchoring.
./docs/reports/grep_ledger.txt:166:./docs/autocapture_nx_blueprint_final.md:147:### D3 Versioned journal and ledger schemas with canonical serialization
./docs/reports/grep_ledger.txt:167:./docs/autocapture_nx_blueprint_final.md:150:Define `journal_v1` and `ledger_v1` schemas and a strict `canonical_json` function used for hashing.
./docs/reports/grep_ledger.txt:168:./docs/autocapture_nx_blueprint_final.md:164:- Kernel-owned append-only writers: `journal.writer`, `ledger.writer`.
./docs/reports/grep_ledger.txt:169:./docs/autocapture_nx_blueprint_final.md:222:Define a key hierarchy with separation between stores, deterministic derivation, and rotation recorded in the ledger.
./docs/reports/grep_ledger.txt:170:./docs/autocapture_nx_blueprint_final.md:266:- Tests: no retention job runs; no evidence file deletion events appear in ledger.
./docs/reports/grep_ledger.txt:171:./docs/autocapture_nx_blueprint_final.md:364:- Gate: config write without ledger entry fails.
./docs/reports/grep_ledger.txt:172:./docs/autocapture_nx_blueprint_final.md:416:Anchor ledger head hashes periodically in a second storage domain to improve tamper evidence.
./docs/reports/grep_ledger.txt:173:./docs/autocapture_nx_blueprint_final.md:419:- **INFERENCE:** Local hash chain alone is weaker if an attacker can rewrite both data and ledger.
./docs/reports/grep_ledger.txt:174:./docs/autocapture_nx_blueprint_final.md:433:- Tamper simulation tests: rewrite DB+ledger but not anchor → detection triggers.
./docs/reports/grep_ledger.txt:175:./docs/autocapture_nx_blueprint_final.md:434:- Gate: citation emission requires ledger+anchor verification.
./docs/reports/grep_ledger.txt:176:./docs/autocapture_nx_blueprint_final.md:448:  - append-only ledger files
./docs/reports/grep_ledger.txt:177:./docs/autocapture_nx_blueprint_final.md:471:- `ledger.writer`
./docs/reports/grep_ledger.txt:178:./docs/autocapture_nx_blueprint_final.md:548:### Ledger schema `ledger_v1`
./docs/reports/grep_ledger.txt:179:./docs/autocapture_nx_blueprint_final.md:911:6. Emit ledger entry of type `egress.sanitize` with hashes only.
./docs/reports/grep_ledger.txt:180:./docs/autocapture_nx_blueprint_final.md:974:- Anchor store records periodic `(ts_utc, ledger_head_hash, anchor_seq)` entries in a second domain.
./docs/reports/grep_ledger.txt:181:./docs/autocapture_nx_blueprint_final.md:1019:- Rotation events are recorded in the ledger and anchored.
./docs/reports/grep_ledger.txt:182:./docs/autocapture_nx_blueprint_final.md:1047:- Config changes always recorded to ledger.
./docs/reports/grep_ledger.txt:183:./docs/autocapture_nx_blueprint_final.md:1060:- ledger integrity + anchor verification
./docs/reports/grep_ledger.txt:184:./docs/autocapture_nx_blueprint_final.md:1146:- ledger rewrite
./docs/reports/grep_ledger.txt:185:./docs/autocapture_nx_blueprint_final.md:1150:- hash-chained ledger
./docs/reports/grep_ledger.txt:186:./docs/autocapture_nx_blueprint_final.md:1180:- periodic snapshots hashed into the ledger
./docs/reports/grep_ledger.txt:204:./docs/mx_gap_matrix.md:129:- Missing (MX paths/tests): autocapture/rules/ledger.py; autocapture/rules/store.py; autocapture/rules/schema.py; autocapture/rules/cli.py; tests/test_rules_ledger_append_only.py; tests/test_rules_state_rebuild.py
./docs/reports/grep_ledger.txt:205:./docs/mx_gap_matrix.md:131:  - Artifacts: autocapture/rules/ledger.py; autocapture/rules/store.py; autocapture/rules/schema.py; autocapture/rules/cli.py
./docs/reports/grep_ledger.txt:209:./tests/test_provenance_chain.py:6:from autocapture.pillars.citable import Ledger, verify_ledger
./docs/reports/grep_ledger.txt:225:./tests/test_rules_state_rebuild.py:6:from autocapture.rules.ledger import RulesLedger
./docs/reports/grep_ledger.txt:230:./tests/test_rules_ledger_append_only.py:6:from autocapture.rules.ledger import RulesLedger
./docs/reports/grep_ledger.txt:236:./autocapture/rules/__init__.py:3:from .ledger import RulesLedger
./docs/reports/grep_ledger.txt:237:./autocapture/rules/store.py:1:"""Rules store rebuilt from ledger."""
./docs/reports/grep_ledger.txt:238:./autocapture/rules/store.py:7:from autocapture.rules.ledger import RulesLedger
./docs/reports/grep_ledger.txt:239:./autocapture/rules/store.py:11:    def __init__(self, ledger: RulesLedger) -> None:
./docs/reports/grep_ledger.txt:240:./autocapture/rules/store.py:12:        self.ledger = ledger
./docs/reports/grep_ledger.txt:241:./autocapture/rules/store.py:16:        for entry in self.ledger.iter_entries():
./docs/reports/grep_ledger.txt:242:./autocapture/tools/provenance_gate.py:1:"""Provenance gate for schema + ledger integrity prerequisites."""
./docs/reports/grep_ledger.txt:243:./autocapture/tools/provenance_gate.py:19:    for rel in ("contracts/ledger_schema.json", "contracts/journal_schema.json"):
./docs/reports/grep_ledger.txt:244:./autocapture/rules/ledger.py:1:"""Append-only rules ledger."""
./docs/reports/grep_ledger.txt:245:./autocapture/rules/cli.py:10:from autocapture.rules.ledger import RulesLedger
./docs/reports/grep_ledger.txt:246:./autocapture/rules/cli.py:16:    parser.add_argument("--ledger", default="data/rules.ndjson")
./docs/reports/grep_ledger.txt:247:./autocapture/rules/cli.py:26:    ledger = RulesLedger(Path(args.ledger))
./docs/reports/grep_ledger.txt:248:./autocapture/rules/cli.py:36:        ledger.append(entry)
./docs/reports/grep_ledger.txt:249:./autocapture/rules/cli.py:40:        store = RulesStore(ledger)
./docs/reports/grep_ledger.txt:250:./autocapture_nx/kernel/key_rotation.py:35:    ledger = system.get("ledger.writer")
./docs/reports/grep_ledger.txt:251:./autocapture_nx/kernel/key_rotation.py:45:    ledger_hash = ledger.append(entry)
./docs/reports/grep_ledger.txt:252:./autocapture_nx/kernel/key_rotation.py:47:    anchor.anchor(ledger_hash)
./docs/reports/grep_ledger.txt:253:./autocapture_nx/kernel/key_rotation.py:53:        "ledger_hash": ledger_hash,
./docs/reports/grep_ledger.txt:254:./autocapture/pillars/__init__.py:3:from .citable import Ledger, verify_ledger
./docs/reports/grep_ledger.txt:255:./autocapture/pillars/__init__.py:5:__all__ = ["Ledger", "verify_ledger"]
./docs/reports/grep_ledger.txt:256:./autocapture/pillars/citable.py:1:"""Citable ledger utilities."""
./docs/reports/grep_ledger.txt:257:./autocapture/pillars/citable.py:56:def verify_ledger(path: str | Path) -> tuple[bool, list[str]]:
./autocapture/codex/validators.py:14:from autocapture.codex.report import RequirementReport, ValidatorReport
./autocapture/codex/validators.py:15:from autocapture.codex.spec import RequirementSpec, ValidatorSpec
./autocapture/codex/validators.py:27:    if cmd[0] == "autocapture":
./autocapture/codex/validators.py:28:        return [sys.executable, "-m", "autocapture_nx", *cmd[1:]]
./autocapture/codex/validators.py:36:    return subprocess.run(cmd, env=env, capture_output=True, text=True)
./autocapture/codex/validators.py:57:        capture_output=True,
./autocapture/codex/validators.py:67:    return len(cmd) >= 3 and cmd[0] == "autocapture" and cmd[1] == "codex" and cmd[2] == "validate"
./autocapture/codex/validators.py:112:    module = importlib.import_module("autocapture.web.api")
./autocapture/codex/validators.py:121:    raise RuntimeError("FastAPI app not found in autocapture.web.api")
./autocapture/codex/validators.py:173:    from autocapture.plugins.manifest import PluginManifest
./autocapture/codex/validators.py:175:    manifests = _iter_plugin_manifests(Path("autocapture_plugins"))
./autocapture/codex/validators.py:188:    from autocapture.plugins.manifest import PluginManifest
./autocapture/codex/validators.py:190:    manifests = _iter_plugin_manifests(Path("autocapture_plugins"))
./autocapture/ux/preview_tokens.py:5:from autocapture.ux.redaction import EgressSanitizer
./docs/devtools.md:5:- Command: `autocapture devtools diffusion --axis <name> -k N`
./autocapture/indexing/vector.py:148:    from autocapture.config.defaults import default_config_paths
./autocapture/indexing/vector.py:149:    from autocapture.config.load import load_config
./autocapture/indexing/vector.py:158:        collection = qcfg.get("collection", "autocapture")
./autocapture/indexing/vector.py:164:    from autocapture.config.defaults import default_config_paths
./autocapture/indexing/vector.py:165:    from autocapture.config.load import load_config
./autocapture/indexing/vector.py:173:    from autocapture.config.defaults import default_config_paths
./autocapture/indexing/vector.py:174:    from autocapture.config.load import load_config
./autocapture/gateway/router.py:8:from autocapture.config.defaults import default_config_paths
./autocapture/gateway/router.py:9:from autocapture.config.load import load_config
./autocapture/gateway/router.py:10:from autocapture.gateway.schemas import ChatRequest, ChatResponse, ChatChoice, ChatMessage
./autocapture/gateway/router.py:11:from autocapture.memory.answer_orchestrator import create_local_llm
./autocapture/gateway/router.py:12:from autocapture.plugins.policy_gate import PolicyGate
./autocapture/gateway/router.py:13:from autocapture.ux.redaction import EgressSanitizer
./autocapture/gateway/router.py:14:from autocapture.core.http import EgressClient
./autocapture/ingest/spans.py:8:from autocapture.core.ids import stable_id
./docs/reports/grep_journal.txt:11:./docs/blueprints/autocapture_nx_blueprint.md:78:- [ ] **I001** (Phase 1) — [Eliminate floats from journal/ledger payloads](#i001)
./docs/reports/grep_journal.txt:12:./docs/blueprints/autocapture_nx_blueprint.md:85:- [ ] **I008** (Phase 1) — [Make journal writing thread-safe; centralize sequences](#i008)
./docs/reports/grep_journal.txt:13:./docs/blueprints/autocapture_nx_blueprint.md:122:- [ ] **I045** (Phase 5) — [Input tracker exposes activity signals (not only journal)](#i045)
./docs/reports/grep_journal.txt:14:./docs/blueprints/autocapture_nx_blueprint.md:158:- [ ] **I081** (Phase 7) — [Alerts panel driven by journal events](#i081)
./docs/reports/grep_journal.txt:15:./docs/blueprints/autocapture_nx_blueprint.md:166:- [ ] **I089** (Phase 0) — [Add canonical-json safety tests for journal/ledger payloads](#i089)
./docs/reports/grep_journal.txt:16:./docs/blueprints/autocapture_nx_blueprint.md:167:- [ ] **I090** (Phase 0) — [Add concurrency tests for ledger/journal append correctness](#i090)
./docs/reports/grep_journal.txt:17:./docs/blueprints/autocapture_nx_blueprint.md:176:- [ ] **I099** (Phase 1) — [Stamp every journal event with run_id](#i099)
./docs/reports/grep_journal.txt:18:./docs/blueprints/autocapture_nx_blueprint.md:179:- [ ] **I102** (Phase 3) — [Track partial failures explicitly in journal/ledger](#i102)
./docs/reports/grep_journal.txt:19:./docs/blueprints/autocapture_nx_blueprint.md:192:- [ ] **I115** (Phase 8) — [File activity capture plugin (USN journal / watcher)](#i115)
./docs/reports/grep_journal.txt:20:./docs/blueprints/autocapture_nx_blueprint.md:318:### I089 — Add canonical-json safety tests for journal/ledger payloads
./docs/reports/grep_journal.txt:21:./docs/blueprints/autocapture_nx_blueprint.md:335:### I090 — Add concurrency tests for ledger/journal append correctness
./docs/reports/grep_journal.txt:22:./docs/blueprints/autocapture_nx_blueprint.md:340:  - Thread-safety tests for ledger/journal writers
./docs/reports/grep_journal.txt:23:./docs/blueprints/autocapture_nx_blueprint.md:349:  - Ledger/journal remain valid under concurrent writes.
./docs/reports/grep_journal.txt:24:./docs/blueprints/autocapture_nx_blueprint.md:469:### I001 — Eliminate floats from journal/ledger payloads
./docs/reports/grep_journal.txt:25:./docs/blueprints/autocapture_nx_blueprint.md:499:  - Log changes as journal events (`capture.rate_change`).
./docs/reports/grep_journal.txt:26:./docs/blueprints/autocapture_nx_blueprint.md:534:  - Writer batches writes into derived artifact blocks; ledger/journal at batch boundaries.
./docs/reports/grep_journal.txt:27:./docs/blueprints/autocapture_nx_blueprint.md:589:### I008 — Make journal writing thread-safe; centralize sequences
./docs/reports/grep_journal.txt:28:./docs/blueprints/autocapture_nx_blueprint.md:594:  - journal writer centralizes sequencing and timestamps
./docs/reports/grep_journal.txt:29:./docs/blueprints/autocapture_nx_blueprint.md:598:  - Snapshot: journal schema stable and contains run_id
./docs/reports/grep_journal.txt:30:./docs/blueprints/autocapture_nx_blueprint.md:759:  - All plugins use EventBuilder for journal/ledger payloads
./docs/reports/grep_journal.txt:31:./docs/blueprints/autocapture_nx_blueprint.md:770:### I099 — Stamp every journal event with run_id
./docs/reports/grep_journal.txt:32:./docs/blueprints/autocapture_nx_blueprint.md:777:  - Test: all journal events include run_id
./docs/reports/grep_journal.txt:33:./docs/blueprints/autocapture_nx_blueprint.md:890:  - Test: drops are recorded in metadata and journal
./docs/reports/grep_journal.txt:34:./docs/blueprints/autocapture_nx_blueprint.md:1305:  - Define fsync levels: journal+ledger always fsync; evidence seals fsync; bulk media optional.
./docs/reports/grep_journal.txt:35:./docs/blueprints/autocapture_nx_blueprint.md:1326:### I102 — Track partial failures explicitly in journal/ledger
./docs/reports/grep_journal.txt:36:./docs/blueprints/autocapture_nx_blueprint.md:1331:  - all failures emit typed journal/ledger events
./docs/reports/grep_journal.txt:37:./docs/blueprints/autocapture_nx_blueprint.md:1362:  - writes recovery actions to ledger/journal
./docs/reports/grep_journal.txt:38:./docs/blueprints/autocapture_nx_blueprint.md:1842:  - Test: IDLE mode allows bounded enrichment and records budgets in journal
./docs/reports/grep_journal.txt:39:./docs/blueprints/autocapture_nx_blueprint.md:1851:### I045 — Input tracker exposes activity signals (not only journal)
./docs/reports/grep_journal.txt:40:./docs/blueprints/autocapture_nx_blueprint.md:1923:  - Record budget usage in telemetry/journal for audit and tuning.
./docs/reports/grep_journal.txt:41:./docs/blueprints/autocapture_nx_blueprint.md:2000:  - Define capability RPC endpoints for safe operations (storage, journal, ledger).
./docs/reports/grep_journal.txt:42:./docs/blueprints/autocapture_nx_blueprint.md:2077:  - Surface errors via alerts and journal.
./docs/reports/grep_journal.txt:43:./docs/blueprints/autocapture_nx_blueprint.md:2297:### I081 — Alerts panel driven by journal events
./docs/reports/grep_journal.txt:44:./docs/blueprints/autocapture_nx_blueprint.md:2302:  - alerts derived from journal/telemetry streams
./docs/reports/grep_journal.txt:45:./docs/blueprints/autocapture_nx_blueprint.md:2390:### I115 — File activity capture plugin (USN journal / watcher)
./docs/reports/grep_journal.txt:46:./docs/blueprints/autocapture_nx_blueprint.md:2395:  - new file activity plugin (Windows USN journal or watcher)
./docs/reports/grep_journal.txt:47:./docs/blueprints/autocapture_nx_blueprint.md:2399:  - Prefer USN journal for low-overhead file change timelines.
./docs/reports/grep_journal.txt:51:./docs/autocapture_nx_blueprint_final.md:147:### D3 Versioned journal and ledger schemas with canonical serialization
./docs/reports/grep_journal.txt:52:./docs/autocapture_nx_blueprint_final.md:150:Define `journal_v1` and `ledger_v1` schemas and a strict `canonical_json` function used for hashing.
./docs/reports/grep_journal.txt:53:./docs/autocapture_nx_blueprint_final.md:164:- Kernel-owned append-only writers: `journal.writer`, `ledger.writer`.
./docs/reports/grep_journal.txt:54:./docs/autocapture_nx_blueprint_final.md:447:  - append-only journal files
./docs/reports/grep_journal.txt:55:./docs/autocapture_nx_blueprint_final.md:470:- `journal.writer`
./docs/reports/grep_journal.txt:56:./docs/autocapture_nx_blueprint_final.md:506:- `ACTIVE_CAPTURE_ONLY`: capture + minimal journaling only.
./docs/reports/grep_journal.txt:57:./docs/autocapture_nx_blueprint_final.md:534:### Journal schema `journal_v1`
./docs/reports/grep_journal.txt:58:./docs/autocapture_nx_blueprint_final.md:610:- Crash tolerance: on restart, journals and partially written segments are recoverable.
./docs/reports/grep_journal.txt:59:./docs/autocapture_nx_blueprint_final.md:626:- Segment metadata is journaled:
./docs/reports/grep_journal.txt:60:./docs/autocapture_nx_blueprint_final.md:707:- Soak: restart recovery from journals.
./docs/reports/grep_journal.txt:61:./docs/autocapture_nx_blueprint_final.md:1104:- journal-first design with restart replay
./docs/reports/grep_journal.txt:75:./docs/reports/grep_ledger.txt:37:./plugins/builtin/capture_windows/plugin.py:64:                if not self._check_disk(logger, journal, ledger, anchor, warn_free, critical_free):
./docs/reports/grep_journal.txt:76:./docs/reports/grep_ledger.txt:38:./plugins/builtin/capture_windows/plugin.py:67:                self._flush_segment(frames, storage_media, storage_meta, journal, ledger, anchor, sequence)
./docs/reports/grep_journal.txt:77:./docs/reports/grep_ledger.txt:39:./plugins/builtin/capture_windows/plugin.py:76:    def _flush_segment(self, frames, storage_media, storage_meta, journal, ledger, anchor, sequence):
./docs/reports/grep_journal.txt:78:./docs/reports/grep_ledger.txt:42:./plugins/builtin/capture_windows/plugin.py:120:    def _check_disk(self, logger, journal, ledger, anchor, warn_free, critical_free) -> bool:
./docs/reports/grep_journal.txt:80:./docs/reports/grep_ledger.txt:90:./docs/blueprints/autocapture_nx_blueprint.md:78:- [ ] **I001** (Phase 1) — [Eliminate floats from journal/ledger payloads](#i001)
./docs/reports/grep_journal.txt:81:./docs/reports/grep_ledger.txt:95:./docs/blueprints/autocapture_nx_blueprint.md:166:- [ ] **I089** (Phase 0) — [Add canonical-json safety tests for journal/ledger payloads](#i089)
./docs/reports/grep_journal.txt:82:./docs/reports/grep_ledger.txt:96:./docs/blueprints/autocapture_nx_blueprint.md:167:- [ ] **I090** (Phase 0) — [Add concurrency tests for ledger/journal append correctness](#i090)
./docs/reports/grep_journal.txt:83:./docs/reports/grep_ledger.txt:98:./docs/blueprints/autocapture_nx_blueprint.md:179:- [ ] **I102** (Phase 3) — [Track partial failures explicitly in journal/ledger](#i102)
./docs/reports/grep_journal.txt:84:./docs/reports/grep_ledger.txt:103:./docs/blueprints/autocapture_nx_blueprint.md:318:### I089 — Add canonical-json safety tests for journal/ledger payloads
./docs/reports/grep_journal.txt:85:./docs/reports/grep_ledger.txt:104:./docs/blueprints/autocapture_nx_blueprint.md:335:### I090 — Add concurrency tests for ledger/journal append correctness
./docs/reports/grep_journal.txt:86:./docs/reports/grep_ledger.txt:105:./docs/blueprints/autocapture_nx_blueprint.md:340:  - Thread-safety tests for ledger/journal writers
./docs/reports/grep_journal.txt:87:./docs/reports/grep_ledger.txt:110:./docs/blueprints/autocapture_nx_blueprint.md:469:### I001 — Eliminate floats from journal/ledger payloads
./docs/reports/grep_journal.txt:88:./docs/reports/grep_ledger.txt:111:./docs/blueprints/autocapture_nx_blueprint.md:534:  - Writer batches writes into derived artifact blocks; ledger/journal at batch boundaries.
./docs/reports/grep_journal.txt:89:./docs/reports/grep_ledger.txt:114:./docs/blueprints/autocapture_nx_blueprint.md:759:  - All plugins use EventBuilder for journal/ledger payloads
./docs/reports/grep_journal.txt:90:./docs/reports/grep_ledger.txt:128:./docs/blueprints/autocapture_nx_blueprint.md:1305:  - Define fsync levels: journal+ledger always fsync; evidence seals fsync; bulk media optional.
./docs/reports/grep_journal.txt:91:./docs/reports/grep_ledger.txt:129:./docs/blueprints/autocapture_nx_blueprint.md:1326:### I102 — Track partial failures explicitly in journal/ledger
./docs/reports/grep_journal.txt:92:./docs/reports/grep_ledger.txt:130:./docs/blueprints/autocapture_nx_blueprint.md:1331:  - all failures emit typed journal/ledger events
./docs/reports/grep_journal.txt:93:./docs/reports/grep_ledger.txt:133:./docs/blueprints/autocapture_nx_blueprint.md:1362:  - writes recovery actions to ledger/journal
./docs/reports/grep_journal.txt:94:./docs/reports/grep_ledger.txt:153:./docs/blueprints/autocapture_nx_blueprint.md:2000:  - Define capability RPC endpoints for safe operations (storage, journal, ledger).
./docs/reports/grep_journal.txt:95:./docs/reports/grep_ledger.txt:166:./docs/autocapture_nx_blueprint_final.md:147:### D3 Versioned journal and ledger schemas with canonical serialization
./docs/reports/grep_journal.txt:96:./docs/reports/grep_ledger.txt:167:./docs/autocapture_nx_blueprint_final.md:150:Define `journal_v1` and `ledger_v1` schemas and a strict `canonical_json` function used for hashing.
./docs/reports/grep_journal.txt:97:./docs/reports/grep_ledger.txt:168:./docs/autocapture_nx_blueprint_final.md:164:- Kernel-owned append-only writers: `journal.writer`, `ledger.writer`.
./docs/reports/grep_journal.txt:112:./docs/reports/grep_ledger.txt:243:./autocapture/tools/provenance_gate.py:19:    for rel in ("contracts/ledger_schema.json", "contracts/journal_schema.json"):
./docs/reports/grep_journal.txt:121:./docs/reports/blueprint_items.md:135:| I115 | Phase 8: Optional expansion plugins | File activity capture plugin (USN journal / watcher) |  |  |  |
./docs/reports/grep_journal.txt:122:./plugins/builtin/capture_windows/plugin.py:48:        journal = self.context.get_capability("journal.writer")
./docs/reports/grep_journal.txt:123:./plugins/builtin/capture_windows/plugin.py:64:                if not self._check_disk(logger, journal, ledger, anchor, warn_free, critical_free):
./docs/reports/grep_journal.txt:124:./plugins/builtin/capture_windows/plugin.py:67:                self._flush_segment(frames, storage_media, storage_meta, journal, ledger, anchor, sequence)
./docs/reports/grep_journal.txt:125:./plugins/builtin/capture_windows/plugin.py:76:    def _flush_segment(self, frames, storage_media, storage_meta, journal, ledger, anchor, sequence):
./docs/reports/grep_journal.txt:126:./plugins/builtin/capture_windows/plugin.py:94:        journal.append(
./docs/reports/grep_journal.txt:127:./plugins/builtin/capture_windows/plugin.py:120:    def _check_disk(self, logger, journal, ledger, anchor, warn_free, critical_free) -> bool:
./docs/reports/grep_journal.txt:128:./plugins/builtin/capture_windows/plugin.py:129:            journal.append(
./docs/reports/grep_journal.txt:135:./plugins/builtin/capture_windows/plugin.json:24:    "builtin.journal.basic",
./docs/reports/grep_journal.txt:146:./tools/blueprint_items.json:1029:    "title": "File activity capture plugin (USN journal / watcher)",
./docs/reports/grep_journal.txt:151:./autocapture/tools/provenance_gate.py:19:    for rel in ("contracts/ledger_schema.json", "contracts/journal_schema.json"):
./autocapture/codex/spec.py:34:DEFAULT_SPEC_PATH = Path("docs/spec/autocapture_mx_spec.yaml")
./plugins/builtin/egress_gateway/plugin.py:9:from autocapture_nx.kernel.config import SchemaLiteValidator
./plugins/builtin/egress_gateway/plugin.py:10:from autocapture_nx.kernel.errors import ConfigError
./plugins/builtin/egress_gateway/plugin.py:12:from autocapture_nx.kernel.errors import NetworkDisabledError, PermissionError
./plugins/builtin/egress_gateway/plugin.py:13:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/storage_memory/plugin.py:9:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./docs/configuration.md:12:- `autocapture config reset` backs up `config/user.json` to `config/backup/user.json` and restores defaults.
./docs/configuration.md:13:- `autocapture config restore` restores the backup.
./autocapture/indexing/lexical.py:28:    from autocapture.config.defaults import default_config_paths
./autocapture/indexing/lexical.py:29:    from autocapture.config.load import load_config
./autocapture/plugins/manager.py:14:from autocapture.plugins.manifest import ExtensionManifest, PluginManifest
./autocapture/plugins/manager.py:45:        builtin_root = Path("autocapture_plugins")
./autocapture/gateway/app.py:7:from autocapture.gateway import router
./autocapture/ingest/normalizer.py:7:from autocapture.ingest.spans import Span, build_span
./plugins/builtin/meta_policy_noop/plugin.py:7:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./docs/reports/grep_evidence.txt:10:./docs/autocapture_mx_blueprint.md:40:- **P4 Citable**: deterministic evidence + claim-level citations, validation, and provenance ledger.
./docs/reports/grep_evidence.txt:11:./docs/autocapture_mx_blueprint.md:447:- tamper evidence,
./docs/reports/grep_evidence.txt:12:./docs/autocapture_mx_blueprint.md:593:- evidence count,
./docs/reports/grep_evidence.txt:13:./docs/autocapture_mx_blueprint.md:624:Each evidence item includes:
./docs/reports/grep_evidence.txt:14:./docs/autocapture_mx_blueprint.md:649:- `no_evidence` flag when applicable
./docs/reports/grep_evidence.txt:15:./docs/autocapture_mx_blueprint.md:676:If conflict detector finds contradictory evidence:
./docs/reports/grep_evidence.txt:18:./docs/autocapture_nx_blueprint_final.md:39:**Invariant P2.1 Full-fidelity local evidence**  
./docs/reports/grep_evidence.txt:19:./docs/autocapture_nx_blueprint_final.md:40:Locally stored evidence must be exact and unredacted. No “privacy transformations” are applied to local capture, storage, or indexing.
./docs/reports/grep_evidence.txt:20:./docs/autocapture_nx_blueprint_final.md:46:If some evidence is not yet extracted/indexed, queries must trigger targeted on-demand extraction so recent activity remains searchable.
./docs/reports/grep_evidence.txt:21:./docs/autocapture_nx_blueprint_final.md:51:All persisted evidence (media + metadata) is encrypted by default.
./docs/reports/grep_evidence.txt:22:./docs/autocapture_nx_blueprint_final.md:56:**Invariant P3.2.1 No raw evidence to cloud by default**  
./docs/reports/grep_evidence.txt:23:./docs/autocapture_nx_blueprint_final.md:63:All significant actions affecting evidence, processing, retrieval, and egress are recorded in an append-only ledger.
./docs/reports/grep_evidence.txt:24:./docs/autocapture_nx_blueprint_final.md:68:Answers are emitted as claims with citations referencing immutable local evidence spans.
./docs/reports/grep_evidence.txt:25:./docs/autocapture_nx_blueprint_final.md:81:- Do not locally mask, filter, redact, replace, or delete evidence.  
./docs/reports/grep_evidence.txt:26:./docs/autocapture_nx_blueprint_final.md:94:Remove privacy sanitization and exclusion from capture/processing. Introduce a dedicated **privacy egress layer** that sanitizes outbound requests by tokenizing entities while preserving intent. Local evidence remains full-fidelity.
./docs/reports/grep_evidence.txt:27:./docs/autocapture_nx_blueprint_final.md:105:- P2 Accurate, P4 Citable: no local evidence loss; citations remain faithful.
./docs/reports/grep_evidence.txt:28:./docs/autocapture_nx_blueprint_final.md:120:- “Canary secret” tests: inject unique secrets into local evidence; verify they never appear in outbound payloads.
./docs/reports/grep_evidence.txt:29:./docs/autocapture_nx_blueprint_final.md:158:- P3 Secure: stronger tamper evidence.
./docs/reports/grep_evidence.txt:30:./docs/autocapture_nx_blueprint_final.md:245:### D7 No deletion of local evidence, only additive derivatives and egress views
./docs/reports/grep_evidence.txt:31:./docs/autocapture_nx_blueprint_final.md:248:Remove media TTL and deletion features for local evidence. Any “sanitization” is implemented as **derived egress/export views** that do not mutate or remove local evidence.
./docs/reports/grep_evidence.txt:32:./docs/autocapture_nx_blueprint_final.md:254:- P2 Accurate, P4 Citable: evidence remains available for verification.
./docs/reports/grep_evidence.txt:33:./docs/autocapture_nx_blueprint_final.md:262:- Retention manager is disabled for evidence stores.
./docs/reports/grep_evidence.txt:34:./docs/autocapture_nx_blueprint_final.md:266:- Tests: no retention job runs; no evidence file deletion events appear in ledger.
./docs/reports/grep_evidence.txt:35:./docs/autocapture_nx_blueprint_final.md:321:Introduce an observability data policy that forbids evidence text/pixels in logs/metrics by default and enforces attribute allowlists.
./docs/reports/grep_evidence.txt:36:./docs/autocapture_nx_blueprint_final.md:329:- P4 Citable: audit artifacts are shareable without exposing evidence.
./docs/reports/grep_evidence.txt:37:./docs/autocapture_nx_blueprint_final.md:376:- P4 Citable: reproducible evidence selection.
./docs/reports/grep_evidence.txt:38:./docs/autocapture_nx_blueprint_final.md:387:- Golden query suite with stable expected evidence sets.
./docs/reports/grep_evidence.txt:39:./docs/autocapture_nx_blueprint_final.md:399:- P2 Accurate: predictable evidence coverage (no silent failure).
./docs/reports/grep_evidence.txt:40:./docs/autocapture_nx_blueprint_final.md:416:Anchor ledger head hashes periodically in a second storage domain to improve tamper evidence.
./docs/reports/grep_evidence.txt:41:./docs/autocapture_nx_blueprint_final.md:422:- P4 Citable: stronger tamper evidence.
./docs/reports/grep_evidence.txt:42:./docs/autocapture_nx_blueprint_final.md:518:Local evidence is stored as immutable “atoms”. Derived artifacts are additive.
./docs/reports/grep_evidence.txt:43:./docs/autocapture_nx_blueprint_final.md:579:- P3 Secure: prevents raw evidence egress.
./docs/reports/grep_evidence.txt:44:./docs/autocapture_nx_blueprint_final.md:695:- P2 Accurate: preserves full raw evidence for later extraction.
./docs/reports/grep_evidence.txt:45:./docs/autocapture_nx_blueprint_final.md:856:Rule: the gateway rejects any outbound payload that contains raw evidence fields unless `allow_raw_egress=true`.
./docs/reports/grep_evidence.txt:46:./docs/autocapture_nx_blueprint_final.md:948:- No automatic deletion of evidence.
./docs/reports/grep_evidence.txt:47:./docs/autocapture_nx_blueprint_final.md:1051:- Metrics and traces avoid evidence payloads by default.
./docs/reports/grep_evidence.txt:48:./docs/autocapture_nx_blueprint_final.md:1118:- logs accidentally contain evidence
./docs/reports/grep_evidence.txt:49:./docs/autocapture_nx_blueprint_final.md:1277:    evidence: infinite
./docs/reports/grep_evidence.txt:51:./docs/blueprints/autocapture_nx_blueprint.md:8:- **P2 Accurate**: do not exceed evidence; no hidden assumptions; deterministic IDs/time handling; no lossy overwrite of evidence.
./docs/reports/grep_evidence.txt:52:./docs/blueprints/autocapture_nx_blueprint.md:10:- **P4 Citable**: every non-trivial output must be traceable to immutable evidence with verifiable provenance (hashes, ledger, anchors).
./docs/reports/grep_evidence.txt:53:./docs/blueprints/autocapture_nx_blueprint.md:17:- **Append-only evidence**: primary evidence is immutable; derived artifacts are separate records linked to parents.
./docs/reports/grep_evidence.txt:54:./docs/blueprints/autocapture_nx_blueprint.md:27:- Fields (minimum): `evidence_id`, `run_id`, `type`, `ts_start_utc`, `ts_end_utc`, `content_hash`, `locator`, `schema_version`.
./docs/reports/grep_evidence.txt:55:./docs/blueprints/autocapture_nx_blueprint.md:29:- Ledger entry written for: `evidence.write` (includes hashes + locator digest).
./docs/reports/grep_evidence.txt:56:./docs/blueprints/autocapture_nx_blueprint.md:33:- Derived record references `parent_evidence_id` and a precise `span_ref` (time/frame/offset).
./docs/reports/grep_evidence.txt:57:./docs/blueprints/autocapture_nx_blueprint.md:65:- **Phase 1: Correctness + immutability blockers** — Fix correctness/security breakers; establish run_id + ID discipline; stop evidence mutation.
./docs/reports/grep_evidence.txt:58:./docs/blueprints/autocapture_nx_blueprint.md:82:- [ ] **I005** (Phase 1) — [Stop mutating primary evidence metadata during query](#i005)
./docs/reports/grep_evidence.txt:59:./docs/blueprints/autocapture_nx_blueprint.md:118:- [ ] **I041** (Phase 4) — [Citations point to immutable evidence IDs + spans](#i041)
./docs/reports/grep_evidence.txt:60:./docs/blueprints/autocapture_nx_blueprint.md:139:- [ ] **I062** (Phase 6) — [Add verify commands (ledger/anchors/evidence)](#i062)
./docs/reports/grep_evidence.txt:61:./docs/blueprints/autocapture_nx_blueprint.md:142:- [ ] **I065** (Phase 4) — [Define canonical evidence model (EvidenceObject)](#i065)
./docs/reports/grep_evidence.txt:62:./docs/blueprints/autocapture_nx_blueprint.md:153:- [ ] **I076** (Phase 4) — [Proof bundles export (evidence + ledger slice + anchors)](#i076)
./docs/reports/grep_evidence.txt:63:./docs/blueprints/autocapture_nx_blueprint.md:456:Fix correctness/security breakers; establish run_id + ID discipline; stop evidence mutation.
./docs/reports/grep_evidence.txt:64:./docs/blueprints/autocapture_nx_blueprint.md:539:### I005 — Stop mutating primary evidence metadata during query
./docs/reports/grep_evidence.txt:65:./docs/blueprints/autocapture_nx_blueprint.md:545:  - metadata store API: forbid overwrites for primary evidence
./docs/reports/grep_evidence.txt:66:./docs/blueprints/autocapture_nx_blueprint.md:547:  - Gate-IMMUT: detect `put_replace` on evidence types
./docs/reports/grep_evidence.txt:67:./docs/blueprints/autocapture_nx_blueprint.md:550:  - Introduce evidence/derived record types; enforce immutability for evidence.
./docs/reports/grep_evidence.txt:68:./docs/blueprints/autocapture_nx_blueprint.md:553:  - No query path mutates primary evidence; citations remain stable over time.
./docs/reports/grep_evidence.txt:69:./docs/blueprints/autocapture_nx_blueprint.md:797:  - Store it in run manifest and reference it in evidence records.
./docs/reports/grep_evidence.txt:70:./docs/blueprints/autocapture_nx_blueprint.md:876:  - Stage 3 encrypts+writes atomically and emits evidence+ledger entries.
./docs/reports/grep_evidence.txt:71:./docs/blueprints/autocapture_nx_blueprint.md:904:  - media container format for primary capture evidence
./docs/reports/grep_evidence.txt:72:./docs/blueprints/autocapture_nx_blueprint.md:914:  - Primary capture evidence is efficient to store and seek deterministically.
./docs/reports/grep_evidence.txt:73:./docs/blueprints/autocapture_nx_blueprint.md:1021:  - Test: crash mid-write does not produce partially visible evidence
./docs/reports/grep_evidence.txt:74:./docs/blueprints/autocapture_nx_blueprint.md:1027:  - No partial evidence becomes 'valid' without explicit seal.
./docs/reports/grep_evidence.txt:75:./docs/blueprints/autocapture_nx_blueprint.md:1243:  - Gate-IMMUT: evidence types cannot call replace; tests enforce
./docs/reports/grep_evidence.txt:76:./docs/blueprints/autocapture_nx_blueprint.md:1245:  - Add mutability policy by record_type: evidence immutable; derived immutable;
./docs/reports/grep_evidence.txt:77:./docs/blueprints/autocapture_nx_blueprint.md:1305:  - Define fsync levels: journal+ledger always fsync; evidence seals fsync; bulk media optional.
./docs/reports/grep_evidence.txt:78:./docs/blueprints/autocapture_nx_blueprint.md:1320:  - Compute streaming SHA-256 on plaintext and store in metadata evidence record.
./docs/reports/grep_evidence.txt:79:./docs/blueprints/autocapture_nx_blueprint.md:1335:  - Standardize failure events: `evidence.write_failed`, `encode.failed`, etc.
./docs/reports/grep_evidence.txt:80:./docs/blueprints/autocapture_nx_blueprint.md:1350:  - Write evidence record(s) then seal with final hashes, durations, and counters.
./docs/reports/grep_evidence.txt:81:./docs/blueprints/autocapture_nx_blueprint.md:1366:  - Scan for temp files/unsealed evidence.
./docs/reports/grep_evidence.txt:82:./docs/blueprints/autocapture_nx_blueprint.md:1382:  - Link binary blob evidence to summary record via derivation graph (I73).
./docs/reports/grep_evidence.txt:83:./docs/blueprints/autocapture_nx_blueprint.md:1394:  - Test: migrate copies all evidence and manifests; verification passes
./docs/reports/grep_evidence.txt:84:./docs/blueprints/autocapture_nx_blueprint.md:1411:  - Track bytes/day for evidence and derived separately.
./docs/reports/grep_evidence.txt:85:./docs/blueprints/autocapture_nx_blueprint.md:1424:  - Gate-IMMUT: compaction never touches primary evidence
./docs/reports/grep_evidence.txt:86:./docs/blueprints/autocapture_nx_blueprint.md:1430:  - Storage is optimized without compromising evidence immutability or citations.
./docs/reports/grep_evidence.txt:87:./docs/blueprints/autocapture_nx_blueprint.md:1457:  - Accuracy: golden queries return expected evidence set deterministically
./docs/reports/grep_evidence.txt:88:./docs/blueprints/autocapture_nx_blueprint.md:1472:  - retrieval sorts by stable keys: time, record_type, evidence_id
./docs/reports/grep_evidence.txt:89:./docs/blueprints/autocapture_nx_blueprint.md:1509:  - Derived record fields: parent_evidence_id, span_ref, method (ocr/vlm),
./docs/reports/grep_evidence.txt:90:./docs/blueprints/autocapture_nx_blueprint.md:1525:  - candidate IDs, final cited evidence IDs.
./docs/reports/grep_evidence.txt:91:./docs/blueprints/autocapture_nx_blueprint.md:1545:### I041 — Citations point to immutable evidence IDs + spans
./docs/reports/grep_evidence.txt:92:./docs/blueprints/autocapture_nx_blueprint.md:1550:  - citation schema uses evidence_id + span_ref + hashes
./docs/reports/grep_evidence.txt:93:./docs/blueprints/autocapture_nx_blueprint.md:1554:  - Citations include: evidence_id, evidence_hash, span_kind/time offsets,
./docs/reports/grep_evidence.txt:94:./docs/blueprints/autocapture_nx_blueprint.md:1565:  - citation resolver service + CLI validates evidence and provenance
./docs/reports/grep_evidence.txt:95:./docs/blueprints/autocapture_nx_blueprint.md:1569:  - Resolver steps: load evidence, verify content_hash, verify ledger chain,
./docs/reports/grep_evidence.txt:96:./docs/blueprints/autocapture_nx_blueprint.md:1570:  - verify anchor, validate span exists in evidence.
./docs/reports/grep_evidence.txt:97:./docs/blueprints/autocapture_nx_blueprint.md:1582:  - Golden tests: unresolved citations produce `state=no_evidence` or `state=partial`
./docs/reports/grep_evidence.txt:98:./docs/blueprints/autocapture_nx_blueprint.md:1584:  - Define answer states: ok | partial | no_evidence | conflict.
./docs/reports/grep_evidence.txt:99:./docs/blueprints/autocapture_nx_blueprint.md:1590:### I065 — Define canonical evidence model (EvidenceObject)
./docs/reports/grep_evidence.txt:100:./docs/blueprints/autocapture_nx_blueprint.md:1595:  - contracts: evidence schema and versioning
./docs/reports/grep_evidence.txt:101:./docs/blueprints/autocapture_nx_blueprint.md:1598:  - Schema tests cover all evidence types and require minimal fields
./docs/reports/grep_evidence.txt:102:./docs/blueprints/autocapture_nx_blueprint.md:1618:  - Every evidence/derived object is hash-addressable and verifiable.
./docs/reports/grep_evidence.txt:103:./docs/blueprints/autocapture_nx_blueprint.md:1628:  - Gate: required event types appear for each run (start, evidence writes, stop/crash)
./docs/reports/grep_evidence.txt:104:./docs/blueprints/autocapture_nx_blueprint.md:1630:  - Define a required transition list per evidence type.
./docs/reports/grep_evidence.txt:105:./docs/blueprints/autocapture_nx_blueprint.md:1648:  - Ledger heads are periodically sealed for tamper evidence.
./docs/reports/grep_evidence.txt:106:./docs/blueprints/autocapture_nx_blueprint.md:1656:  - run manifest evidence record written early and finalized at end
./docs/reports/grep_evidence.txt:107:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_evidence.txt:108:./docs/blueprints/autocapture_nx_blueprint.md:1703:  - Gate-IMMUT catches any overwrite on evidence/derived records
./docs/reports/grep_evidence.txt:109:./docs/blueprints/autocapture_nx_blueprint.md:1724:  - Any derived output can be traced back to its precise evidence parents.
./docs/reports/grep_evidence.txt:110:./docs/blueprints/autocapture_nx_blueprint.md:1758:### I076 — Proof bundles export (evidence + ledger slice + anchors)
./docs/reports/grep_evidence.txt:111:./docs/blueprints/autocapture_nx_blueprint.md:1767:  - Bundle includes: selected evidence blobs, their metadata, derivation edges,
./docs/reports/grep_evidence.txt:112:./docs/blueprints/autocapture_nx_blueprint.md:1937:  - Define checkpointing per job: last processed evidence_id/span.
./docs/reports/grep_evidence.txt:113:./docs/blueprints/autocapture_nx_blueprint.md:2154:  - Anchors provide tamper evidence independent of ledger storage.
./docs/reports/grep_evidence.txt:114:./docs/blueprints/autocapture_nx_blueprint.md:2157:### I062 — Add verify commands (ledger/anchors/evidence)
./docs/reports/grep_evidence.txt:115:./docs/blueprints/autocapture_nx_blueprint.md:2162:  - verify CLI/API: `verify ledger`, `verify anchors`, `verify evidence`
./docs/reports/grep_evidence.txt:116:./docs/blueprints/autocapture_nx_blueprint.md:2166:  - Ledger verify: recompute chain; anchor verify: verify signatures; evidence verify: hash checks.
./docs/reports/grep_evidence.txt:117:./docs/blueprints/autocapture_nx_blueprint.md:2384:  - Store clipboard content as evidence (Pattern A) locally encrypted.
./docs/reports/grep_evidence.txt:118:./docs/blueprints/autocapture_nx_blueprint.md:2400:  - Store as append-only evidence: file path (normalized), operation, timestamps.
./docs/reports/grep_evidence.txt:119:./docs/blueprints/autocapture_nx_blueprint.md:2403:  - File activity timeline can be correlated with other evidence by time.
./docs/reports/grep_evidence.txt:125:./docs/reports/grep_journal.txt:34:./docs/blueprints/autocapture_nx_blueprint.md:1305:  - Define fsync levels: journal+ledger always fsync; evidence seals fsync; bulk media optional.
./docs/reports/grep_evidence.txt:126:./docs/reports/grep_journal.txt:90:./docs/reports/grep_ledger.txt:128:./docs/blueprints/autocapture_nx_blueprint.md:1305:  - Define fsync levels: journal+ledger always fsync; evidence seals fsync; bulk media optional.
./docs/reports/grep_evidence.txt:129:./docs/reports/grep_ledger.txt:66:./docs/autocapture_mx_blueprint.md:40:- **P4 Citable**: deterministic evidence + claim-level citations, validation, and provenance ledger.
./docs/reports/grep_evidence.txt:131:./docs/reports/grep_ledger.txt:86:./docs/blueprints/autocapture_nx_blueprint.md:10:- **P4 Citable**: every non-trivial output must be traceable to immutable evidence with verifiable provenance (hashes, ledger, anchors).
./docs/reports/grep_evidence.txt:132:./docs/reports/grep_ledger.txt:92:./docs/blueprints/autocapture_nx_blueprint.md:139:- [ ] **I062** (Phase 6) — [Add verify commands (ledger/anchors/evidence)](#i062)
./docs/reports/grep_evidence.txt:133:./docs/reports/grep_ledger.txt:94:./docs/blueprints/autocapture_nx_blueprint.md:153:- [ ] **I076** (Phase 4) — [Proof bundles export (evidence + ledger slice + anchors)](#i076)
./docs/reports/grep_evidence.txt:134:./docs/reports/grep_ledger.txt:125:./docs/blueprints/autocapture_nx_blueprint.md:876:  - Stage 3 encrypts+writes atomically and emits evidence+ledger entries.
./docs/reports/grep_evidence.txt:135:./docs/reports/grep_ledger.txt:128:./docs/blueprints/autocapture_nx_blueprint.md:1305:  - Define fsync levels: journal+ledger always fsync; evidence seals fsync; bulk media optional.
./docs/reports/grep_evidence.txt:136:./docs/reports/grep_ledger.txt:140:./docs/blueprints/autocapture_nx_blueprint.md:1569:  - Resolver steps: load evidence, verify content_hash, verify ledger chain,
./docs/reports/grep_evidence.txt:137:./docs/reports/grep_ledger.txt:146:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_evidence.txt:138:./docs/reports/grep_ledger.txt:148:./docs/blueprints/autocapture_nx_blueprint.md:1758:### I076 — Proof bundles export (evidence + ledger slice + anchors)
./docs/reports/grep_evidence.txt:139:./docs/reports/grep_ledger.txt:155:./docs/blueprints/autocapture_nx_blueprint.md:2154:  - Anchors provide tamper evidence independent of ledger storage.
./docs/reports/grep_evidence.txt:140:./docs/reports/grep_ledger.txt:156:./docs/blueprints/autocapture_nx_blueprint.md:2157:### I062 — Add verify commands (ledger/anchors/evidence)
./docs/reports/grep_evidence.txt:141:./docs/reports/grep_ledger.txt:157:./docs/blueprints/autocapture_nx_blueprint.md:2162:  - verify CLI/API: `verify ledger`, `verify anchors`, `verify evidence`
./docs/reports/grep_evidence.txt:142:./docs/reports/grep_ledger.txt:164:./docs/autocapture_nx_blueprint_final.md:63:All significant actions affecting evidence, processing, retrieval, and egress are recorded in an append-only ledger.
./docs/reports/grep_evidence.txt:143:./docs/reports/grep_ledger.txt:170:./docs/autocapture_nx_blueprint_final.md:266:- Tests: no retention job runs; no evidence file deletion events appear in ledger.
./docs/reports/grep_evidence.txt:144:./docs/reports/grep_ledger.txt:172:./docs/autocapture_nx_blueprint_final.md:416:Anchor ledger head hashes periodically in a second storage domain to improve tamper evidence.
./docs/reports/grep_evidence.txt:157:./autocapture/ux/facade.py:49:                "text": f"Found {len(spans)} evidence items for query.",
./autocapture/ux/facade.py:8:from autocapture.config.defaults import default_config_paths
./autocapture/ux/facade.py:9:from autocapture.config.load import load_config
./autocapture/ux/facade.py:10:from autocapture.indexing.lexical import LexicalIndex
./autocapture/ux/facade.py:11:from autocapture.indexing.vector import VectorIndex, LocalEmbedder
./autocapture/ux/facade.py:12:from autocapture.memory.answer_orchestrator import AnswerOrchestrator
./autocapture/ux/facade.py:13:from autocapture.memory.context_pack import build_context_pack
./autocapture/ux/facade.py:14:from autocapture.retrieval.rerank import Reranker
./autocapture/ux/facade.py:15:from autocapture.retrieval.tiers import TieredRetriever
./autocapture/ux/facade.py:16:from autocapture.ux.models import DoctorCheck, DoctorReport
./autocapture/ux/facade.py:17:from autocapture.ux.settings_schema import get_schema
./autocapture/ux/facade.py:60:        from autocapture_nx.kernel.loader import Kernel, default_config_paths as nx_paths
./autocapture/plugins/kinds.py:6:    "capture.source",
./autocapture/plugins/kinds.py:7:    "capture.encoder",
./docs/reports/grep_derived.txt:8:./docs/autocapture_mx_blueprint.md:48:- **Evidence**: captured artifacts + derived spans that can be cited.
./docs/reports/grep_derived.txt:9:./docs/blueprints/autocapture_nx_blueprint.md:17:- **Append-only evidence**: primary evidence is immutable; derived artifacts are separate records linked to parents.
./docs/reports/grep_derived.txt:10:./docs/blueprints/autocapture_nx_blueprint.md:35:- Ledger entry written for: `derived.write` (includes parent hash + method + model identity).
./docs/reports/grep_derived.txt:11:./docs/blueprints/autocapture_nx_blueprint.md:67:- **Phase 3: Storage scaling + durability** — SQLCipher/indices, binary encrypted blobs, atomic writes, recovery, compaction for derived.
./docs/reports/grep_derived.txt:12:./docs/blueprints/autocapture_nx_blueprint.md:68:- **Phase 4: Retrieval + provenance + citations** — Deterministic retrieval, derived artifacts, citation resolver, proof bundles, replay.
./docs/reports/grep_derived.txt:13:./docs/blueprints/autocapture_nx_blueprint.md:143:- [ ] **I066** (Phase 4) — [Hash everything that matters (media/metadata/derived)](#i066)
./docs/reports/grep_derived.txt:14:./docs/blueprints/autocapture_nx_blueprint.md:149:- [ ] **I072** (Phase 4) — [Metadata immutable by default; derived never overwrites](#i072)
./docs/reports/grep_derived.txt:15:./docs/blueprints/autocapture_nx_blueprint.md:185:- [ ] **I108** (Phase 3) — [Add compact binary input log (derived) + JSON summary](#i108)
./docs/reports/grep_derived.txt:16:./docs/blueprints/autocapture_nx_blueprint.md:187:- [ ] **I110** (Phase 2) — [Store audio as PCM/FLAC/Opus derived artifact](#i110)
./docs/reports/grep_derived.txt:17:./docs/blueprints/autocapture_nx_blueprint.md:207:- [ ] **I130** (Phase 3) — [Storage compaction for derived artifacts only](#i130)
./docs/reports/grep_derived.txt:18:./docs/blueprints/autocapture_nx_blueprint.md:534:  - Writer batches writes into derived artifact blocks; ledger/journal at batch boundaries.
./docs/reports/grep_derived.txt:19:./docs/blueprints/autocapture_nx_blueprint.md:548:  - Test: extraction creates `derived.*` record; parent unchanged (hash stable)
./docs/reports/grep_derived.txt:20:./docs/blueprints/autocapture_nx_blueprint.md:550:  - Introduce evidence/derived record types; enforce immutability for evidence.
./docs/reports/grep_derived.txt:21:./docs/blueprints/autocapture_nx_blueprint.md:551:  - Extraction writes derived records (Pattern B) and links to parent via derivation graph.
./docs/reports/grep_derived.txt:22:./docs/blueprints/autocapture_nx_blueprint.md:893:  - Prefer dropping derived/per-frame detail over dropping segment boundaries.
./docs/reports/grep_derived.txt:23:./docs/blueprints/autocapture_nx_blueprint.md:986:  - correlation references stored in derived artifacts
./docs/reports/grep_derived.txt:24:./docs/blueprints/autocapture_nx_blueprint.md:1089:  - Record device identity and mode in derived artifact metadata.
./docs/reports/grep_derived.txt:25:./docs/blueprints/autocapture_nx_blueprint.md:1094:### I110 — Store audio as PCM/FLAC/Opus derived artifact
./docs/reports/grep_derived.txt:26:./docs/blueprints/autocapture_nx_blueprint.md:1099:  - audio stored as derived artifact blocks with clear encoding
./docs/reports/grep_derived.txt:27:./docs/blueprints/autocapture_nx_blueprint.md:1104:  - Treat audio as derived artifact if sourced from callback stream; ledger derivation.
./docs/reports/grep_derived.txt:28:./docs/blueprints/autocapture_nx_blueprint.md:1157:SQLCipher/indices, binary encrypted blobs, atomic writes, recovery, compaction for derived.
./docs/reports/grep_derived.txt:29:./docs/blueprints/autocapture_nx_blueprint.md:1229:  - Adopt chunked AEAD: each chunk uses derived nonce (base + counter).
./docs/reports/grep_derived.txt:30:./docs/blueprints/autocapture_nx_blueprint.md:1245:  - Add mutability policy by record_type: evidence immutable; derived immutable;
./docs/reports/grep_derived.txt:31:./docs/blueprints/autocapture_nx_blueprint.md:1351:  - Seal references all constituent blob hashes and derived indexes (if any).
./docs/reports/grep_derived.txt:32:./docs/blueprints/autocapture_nx_blueprint.md:1372:### I108 — Add compact binary input log (derived) + JSON summary
./docs/reports/grep_derived.txt:33:./docs/blueprints/autocapture_nx_blueprint.md:1377:  - input pipeline writes compact binary derived log + JSON summary records
./docs/reports/grep_derived.txt:34:./docs/blueprints/autocapture_nx_blueprint.md:1411:  - Track bytes/day for evidence and derived separately.
./docs/reports/grep_derived.txt:35:./docs/blueprints/autocapture_nx_blueprint.md:1417:### I130 — Storage compaction for derived artifacts only
./docs/reports/grep_derived.txt:36:./docs/blueprints/autocapture_nx_blueprint.md:1422:  - compaction applies only to derived artifacts and rebuildable indexes
./docs/reports/grep_derived.txt:37:./docs/blueprints/autocapture_nx_blueprint.md:1427:  - Define derived compaction strategies: recompress text indexes, prune caches,
./docs/reports/grep_derived.txt:38:./docs/blueprints/autocapture_nx_blueprint.md:1428:  - dedupe derived blobs using content hashes.
./docs/reports/grep_derived.txt:39:./docs/blueprints/autocapture_nx_blueprint.md:1435:Deterministic retrieval, derived artifacts, citation resolver, proof bundles, replay.
./docs/reports/grep_derived.txt:40:./docs/blueprints/autocapture_nx_blueprint.md:1493:  - Extraction only runs on candidates; results stored as derived artifacts (I38).
./docs/reports/grep_derived.txt:41:./docs/blueprints/autocapture_nx_blueprint.md:1503:  - schema: `derived.text.*` records
./docs/reports/grep_derived.txt:42:./docs/blueprints/autocapture_nx_blueprint.md:1506:  - Test: derived text record includes parent reference and span_ref
./docs/reports/grep_derived.txt:43:./docs/blueprints/autocapture_nx_blueprint.md:1512:  - All extraction outputs are provenance-tracked derived artifacts.
./docs/reports/grep_derived.txt:44:./docs/blueprints/autocapture_nx_blueprint.md:1537:  - Test: derived artifacts have corresponding ledger derivation entries
./docs/reports/grep_derived.txt:45:./docs/blueprints/autocapture_nx_blueprint.md:1540:  - output hash and derived record id.
./docs/reports/grep_derived.txt:46:./docs/blueprints/autocapture_nx_blueprint.md:1601:  - All primary capture, audio, window, input, and derived artifacts conform.
./docs/reports/grep_derived.txt:47:./docs/blueprints/autocapture_nx_blueprint.md:1606:### I066 — Hash everything that matters (media/metadata/derived)
./docs/reports/grep_derived.txt:48:./docs/blueprints/autocapture_nx_blueprint.md:1618:  - Every evidence/derived object is hash-addressable and verifiable.
./docs/reports/grep_derived.txt:49:./docs/blueprints/autocapture_nx_blueprint.md:1696:### I072 — Metadata immutable by default; derived never overwrites
./docs/reports/grep_derived.txt:50:./docs/blueprints/autocapture_nx_blueprint.md:1703:  - Gate-IMMUT catches any overwrite on evidence/derived records
./docs/reports/grep_derived.txt:51:./docs/blueprints/autocapture_nx_blueprint.md:1719:  - Test: derived artifacts create derivation edge to parent
./docs/reports/grep_derived.txt:52:./docs/blueprints/autocapture_nx_blueprint.md:1724:  - Any derived output can be traced back to its precise evidence parents.
./docs/reports/grep_derived.txt:53:./docs/blueprints/autocapture_nx_blueprint.md:1732:  - model identity schema and recording in derived artifacts
./docs/reports/grep_derived.txt:54:./docs/blueprints/autocapture_nx_blueprint.md:1735:  - Test: derived artifacts contain model_name + model_digest + params
./docs/reports/grep_derived.txt:55:./docs/blueprints/autocapture_nx_blueprint.md:1877:  - Emit periodic `telemetry.capture` records (derived/monitoring).
./docs/reports/grep_derived.txt:56:./docs/blueprints/autocapture_nx_blueprint.md:1938:  - Persist checkpoints in derived store; ledger transitions record progress.
./docs/reports/grep_derived.txt:57:./docs/blueprints/autocapture_nx_blueprint.md:2134:  - Test: rotating one key does not break others; derived artifacts remain readable as policy dictates
./docs/reports/grep_derived.txt:58:./docs/blueprints/autocapture_nx_blueprint.md:2275:  - Ensure CLI output is derived from structured responses.
./docs/reports/grep_derived.txt:59:./docs/blueprints/autocapture_nx_blueprint.md:2302:  - alerts derived from journal/telemetry streams
./docs/reports/grep_derived.txt:60:./docs/blueprints/autocapture_nx_blueprint.md:2307:  - Store alerts as derived records; show current and historical alerts.
./docs/reports/grep_derived.txt:61:./docs/reports/grep_journal.txt:26:./docs/blueprints/autocapture_nx_blueprint.md:534:  - Writer batches writes into derived artifact blocks; ledger/journal at batch boundaries.
./docs/reports/grep_derived.txt:62:./docs/reports/grep_journal.txt:44:./docs/blueprints/autocapture_nx_blueprint.md:2302:  - alerts derived from journal/telemetry streams
./docs/reports/grep_derived.txt:63:./docs/reports/grep_journal.txt:88:./docs/reports/grep_ledger.txt:111:./docs/blueprints/autocapture_nx_blueprint.md:534:  - Writer batches writes into derived artifact blocks; ledger/journal at batch boundaries.
./docs/reports/grep_derived.txt:64:./docs/autocapture_nx_blueprint_final.md:248:Remove media TTL and deletion features for local evidence. Any “sanitization” is implemented as **derived egress/export views** that do not mutate or remove local evidence.
./docs/reports/grep_derived.txt:65:./docs/autocapture_nx_blueprint_final.md:523:- `frame.keyframe`: extracted still frame for indexing, derived
./docs/reports/grep_derived.txt:66:./docs/autocapture_nx_blueprint_final.md:524:- `text.ocr_span`: OCR text + offsets, derived
./docs/reports/grep_derived.txt:67:./docs/autocapture_nx_blueprint_final.md:525:- `text.vlm_span`: VLM extracted UI text/layout, derived
./docs/reports/grep_derived.txt:68:./docs/autocapture_nx_blueprint_final.md:574:- `facts[]`: each fact is `{type, ts_utc, fields}` where `fields` is a map and all user-derived string values are tokenized.
./docs/reports/grep_derived.txt:69:./docs/autocapture_nx_blueprint_final.md:726:All derived outputs are stored as new immutable atoms linked to source segments/frames.
./docs/reports/grep_derived.txt:70:./docs/autocapture_nx_blueprint_final.md:879:- optional local entity table derived from OCR/VLM outputs
./docs/reports/grep_derived.txt:71:./docs/autocapture_nx_blueprint_final.md:925:- If pixels must be sent, generate a derived sanitized image view that replaces detected sensitive text regions with typed tokens. This derived view is never used for local memory; it is egress-only.
./docs/reports/grep_derived.txt:72:./docs/autocapture_nx_blueprint_final.md:1014:- Never reuse the same derived key across media, metadata, and entity tokenization.
./docs/reports/grep_derived.txt:73:./docs/reports/grep_ledger.txt:111:./docs/blueprints/autocapture_nx_blueprint.md:534:  - Writer batches writes into derived artifact blocks; ledger/journal at batch boundaries.
./docs/reports/grep_derived.txt:74:./docs/reports/grep_ledger.txt:126:./docs/blueprints/autocapture_nx_blueprint.md:1104:  - Treat audio as derived artifact if sourced from callback stream; ledger derivation.
./docs/reports/grep_derived.txt:75:./docs/reports/grep_ledger.txt:138:./docs/blueprints/autocapture_nx_blueprint.md:1537:  - Test: derived artifacts have corresponding ledger derivation entries
./docs/reports/grep_derived.txt:76:./docs/reports/grep_ledger.txt:151:./docs/blueprints/autocapture_nx_blueprint.md:1938:  - Persist checkpoints in derived store; ledger transitions record progress.
./docs/reports/grep_derived.txt:82:./docs/reports/grep_evidence.txt:31:./docs/autocapture_nx_blueprint_final.md:248:Remove media TTL and deletion features for local evidence. Any “sanitization” is implemented as **derived egress/export views** that do not mutate or remove local evidence.
./docs/reports/grep_derived.txt:83:./docs/reports/grep_evidence.txt:53:./docs/blueprints/autocapture_nx_blueprint.md:17:- **Append-only evidence**: primary evidence is immutable; derived artifacts are separate records linked to parents.
./docs/reports/grep_derived.txt:84:./docs/reports/grep_evidence.txt:67:./docs/blueprints/autocapture_nx_blueprint.md:550:  - Introduce evidence/derived record types; enforce immutability for evidence.
./docs/reports/grep_derived.txt:85:./docs/reports/grep_evidence.txt:76:./docs/blueprints/autocapture_nx_blueprint.md:1245:  - Add mutability policy by record_type: evidence immutable; derived immutable;
./docs/reports/grep_derived.txt:86:./docs/reports/grep_evidence.txt:84:./docs/blueprints/autocapture_nx_blueprint.md:1411:  - Track bytes/day for evidence and derived separately.
./docs/reports/grep_derived.txt:87:./docs/reports/grep_evidence.txt:102:./docs/blueprints/autocapture_nx_blueprint.md:1618:  - Every evidence/derived object is hash-addressable and verifiable.
./docs/reports/grep_derived.txt:88:./docs/reports/grep_evidence.txt:108:./docs/blueprints/autocapture_nx_blueprint.md:1703:  - Gate-IMMUT catches any overwrite on evidence/derived records
./docs/reports/grep_derived.txt:89:./docs/reports/grep_evidence.txt:109:./docs/blueprints/autocapture_nx_blueprint.md:1724:  - Any derived output can be traced back to its precise evidence parents.
./docs/reports/grep_derived.txt:90:./autocapture/storage/sqlcipher.py:23:        # For now, use encrypted store with derived keys.
./autocapture/codex/cli.py:11:from autocapture.codex.report import build_report
./autocapture/codex/cli.py:12:from autocapture.codex.spec import DEFAULT_SPEC_PATH, load_spec
./autocapture/codex/cli.py:13:from autocapture.codex.validators import validate_requirement
./autocapture/codex/cli.py:76:    from autocapture.tools.pillar_gate import run_all_gates
./autocapture/codex/cli.py:83:    parser = argparse.ArgumentParser(prog="autocapture codex")
./docs/blueprints/autocapture_nx_blueprint.md:1:# Autocapture NX Blueprint (P1–P4 Optimized)
./docs/blueprints/autocapture_nx_blueprint.md:7:- **P1 Performant**: minimize user-visible completion time; optimize end-to-end flow; keep capture invisible while user active.
./docs/blueprints/autocapture_nx_blueprint.md:15:- **Local-first capture**: capture everything locally; sanitize only on egress; cloud never sees raw PII.
./docs/blueprints/autocapture_nx_blueprint.md:66:- **Phase 2: Capture pipeline refactor** — Streaming capture, backpressure, bounded memory, accurate timestamps, and correlation signals.
./docs/blueprints/autocapture_nx_blueprint.md:79:- [ ] **I002** (Phase 1) — [Make backpressure actually affect capture rate](#i002)
./docs/blueprints/autocapture_nx_blueprint.md:89:- [ ] **I012** (Phase 1) — [Align default config with implemented capture backend](#i012)
./docs/blueprints/autocapture_nx_blueprint.md:93:- [ ] **I016** (Phase 2) — [Split capture into grab → encode/pack → encrypt/write pipeline](#i016)
./docs/blueprints/autocapture_nx_blueprint.md:96:- [ ] **I019** (Phase 2) — [Add GPU-accelerated capture/encode backend (NVENC/DD)](#i019)
./docs/blueprints/autocapture_nx_blueprint.md:98:- [ ] **I021** (Phase 2) — [Record capture parameters per segment](#i021)
./docs/blueprints/autocapture_nx_blueprint.md:101:- [ ] **I024** (Phase 2) — [Disk pressure degrades capture quality before stopping](#i024)
./docs/blueprints/autocapture_nx_blueprint.md:169:- [ ] **I092** (Phase 0) — [Add performance regression tests (capture latency/memory/query latency)](#i092)
./docs/blueprints/autocapture_nx_blueprint.md:186:- [ ] **I109** (Phase 2) — [Add WASAPI loopback option for system audio capture](#i109)
./docs/blueprints/autocapture_nx_blueprint.md:190:- [ ] **I113** (Phase 2) — [Optional cursor position+shape capture](#i113)
./docs/blueprints/autocapture_nx_blueprint.md:191:- [ ] **I114** (Phase 8) — [Clipboard capture plugin (local-only, append-only)](#i114)
./docs/blueprints/autocapture_nx_blueprint.md:192:- [ ] **I115** (Phase 8) — [File activity capture plugin (USN journal / watcher)](#i115)
./docs/blueprints/autocapture_nx_blueprint.md:233:  - CI matrix: minimal install runs capture+stores without ML deps
./docs/blueprints/autocapture_nx_blueprint.md:242:  - Base installation captures and queries metadata without importing heavy ML deps.
./docs/blueprints/autocapture_nx_blueprint.md:252:  - `autocapture_nx/kernel/paths.py` (new) centralizes path resolution
./docs/blueprints/autocapture_nx_blueprint.md:275:  - Adopt OS-specific defaults: `%APPDATA%/Autocapture` (config),
./docs/blueprints/autocapture_nx_blueprint.md:276:  - `%LOCALAPPDATA%/Autocapture` (data), with overrides in config.
./docs/blueprints/autocapture_nx_blueprint.md:290:  - Wheel install test: `autocapture doctor` lists builtin plugins
./docs/blueprints/autocapture_nx_blueprint.md:369:### I092 — Add performance regression tests (capture latency/memory/query latency)
./docs/blueprints/autocapture_nx_blueprint.md:374:  - Perf suite: capture tick latency, memory ceiling, query latency
./docs/blueprints/autocapture_nx_blueprint.md:377:  - Bench: sustained capture at configured fps; assert bounded RAM
./docs/blueprints/autocapture_nx_blueprint.md:425:  - `autocapture doctor` (new) + `tools/gate_doctor.py`
./docs/blueprints/autocapture_nx_blueprint.md:442:  - `autocapture_nx/kernel/hashing.py` sha256_directory ordering
./docs/blueprints/autocapture_nx_blueprint.md:478:  - Test: capture disk-pressure event emits integer bytes, not floats
./docs/blueprints/autocapture_nx_blueprint.md:486:### I002 — Make backpressure actually affect capture rate
./docs/blueprints/autocapture_nx_blueprint.md:491:  - capture_windows pipeline timing loop
./docs/blueprints/autocapture_nx_blueprint.md:492:  - runtime governor → capture fps/quality controller
./docs/blueprints/autocapture_nx_blueprint.md:495:  - Perf: capture tick p95 stays within budget under disk pressure
./docs/blueprints/autocapture_nx_blueprint.md:499:  - Log changes as journal events (`capture.rate_change`).
./docs/blueprints/autocapture_nx_blueprint.md:501:  - When disk/queue pressure rises, capture rate drops within 1 second.
./docs/blueprints/autocapture_nx_blueprint.md:509:  - capture_windows: segment packer/writer
./docs/blueprints/autocapture_nx_blueprint.md:512:  - Perf: sustained capture uses bounded RAM (ceiling configured)
./docs/blueprints/autocapture_nx_blueprint.md:531:  - Perf: audio capture has no xruns under load (best-effort check)
./docs/blueprints/autocapture_nx_blueprint.md:544:  - query pipeline (`autocapture_nx/kernel/query.py`)
./docs/blueprints/autocapture_nx_blueprint.md:567:  - Create `run_id` as ULID/UUIDv7 at boot or capture start.
./docs/blueprints/autocapture_nx_blueprint.md:644:  - capture timing: use monotonic for intervals; UTC timestamps for provenance
./docs/blueprints/autocapture_nx_blueprint.md:648:  - Use `time.monotonic()` to drive capture loop and durations.
./docs/blueprints/autocapture_nx_blueprint.md:654:### I012 — Align default config with implemented capture backend
./docs/blueprints/autocapture_nx_blueprint.md:660:  - capture plugin selection logic
./docs/blueprints/autocapture_nx_blueprint.md:663:  - Test: default config runs capture without unsupported backend errors
./docs/blueprints/autocapture_nx_blueprint.md:758:  - New `autocapture_nx/kernel/event_builder.py`
./docs/blueprints/autocapture_nx_blueprint.md:791:  - capture records store `policy_hash` only
./docs/blueprints/autocapture_nx_blueprint.md:793:  - Perf test: capture loop no longer recomputes policy hash per segment
./docs/blueprints/autocapture_nx_blueprint.md:812:  - At boot/capture start, write ledger entry including hashes:
./docs/blueprints/autocapture_nx_blueprint.md:850:Streaming capture, backpressure, bounded memory, accurate timestamps, and correlation signals.
./docs/blueprints/autocapture_nx_blueprint.md:863:### I016 — Split capture into grab → encode/pack → encrypt/write pipeline
./docs/blueprints/autocapture_nx_blueprint.md:868:  - capture_windows plugin refactor into 3-stage pipeline
./docs/blueprints/autocapture_nx_blueprint.md:871:  - Perf: capture tick p95 within budget while pipeline backlog grows
./docs/blueprints/autocapture_nx_blueprint.md:886:  - queue primitives in capture/audio/input pipelines
./docs/blueprints/autocapture_nx_blueprint.md:894:  - Emit `capture.drop`/`audio.drop` events with counters.
./docs/blueprints/autocapture_nx_blueprint.md:904:  - media container format for primary capture evidence
./docs/blueprints/autocapture_nx_blueprint.md:914:  - Primary capture evidence is efficient to store and seek deterministically.
./docs/blueprints/autocapture_nx_blueprint.md:917:### I019 — Add GPU-accelerated capture/encode backend (NVENC/DD)
./docs/blueprints/autocapture_nx_blueprint.md:922:  - New capture backend plugin(s): Desktop Duplication + NVENC
./docs/blueprints/autocapture_nx_blueprint.md:923:  - Config: `capture.backend` selects backend
./docs/blueprints/autocapture_nx_blueprint.md:928:  - Implement Windows Desktop Duplication capture and NVENC encode.
./docs/blueprints/autocapture_nx_blueprint.md:932:  - On capable GPUs, capture runs with minimal CPU while maintaining fidelity.
./docs/blueprints/autocapture_nx_blueprint.md:940:  - capture metadata schema includes `ts_start_utc` and `ts_end_utc`
./docs/blueprints/autocapture_nx_blueprint.md:950:### I021 — Record capture parameters per segment
./docs/blueprints/autocapture_nx_blueprint.md:955:  - capture metadata includes capture parameters and achieved metrics
./docs/blueprints/autocapture_nx_blueprint.md:957:  - Schema test ensures required capture params exist
./docs/blueprints/autocapture_nx_blueprint.md:991:  - If cursor capture enabled (I113), store cursor timeline with timestamps.
./docs/blueprints/autocapture_nx_blueprint.md:996:### I024 — Disk pressure degrades capture quality before stopping
./docs/blueprints/autocapture_nx_blueprint.md:1001:  - disk pressure controller in capture pipeline
./docs/blueprints/autocapture_nx_blueprint.md:1004:  - Test: under simulated low disk, capture degrades (fps/quality) before stop
./docs/blueprints/autocapture_nx_blueprint.md:1005:  - Journal: emits `disk.pressure` and `capture.degrade` events
./docs/blueprints/autocapture_nx_blueprint.md:1075:  - Input capture is scalable without overwhelming IO.
./docs/blueprints/autocapture_nx_blueprint.md:1078:### I109 — Add WASAPI loopback option for system audio capture
./docs/blueprints/autocapture_nx_blueprint.md:1083:  - audio_windows supports WASAPI loopback capture mode
./docs/blueprints/autocapture_nx_blueprint.md:1088:  - Implement loopback capture path on Windows.
./docs/blueprints/autocapture_nx_blueprint.md:1091:  - System audio can be captured as a first-class source when enabled.
./docs/blueprints/autocapture_nx_blueprint.md:1136:  - Window location can be correlated with capture frames deterministically.
./docs/blueprints/autocapture_nx_blueprint.md:1139:### I113 — Optional cursor position+shape capture
./docs/blueprints/autocapture_nx_blueprint.md:1144:  - optional cursor capture plugin or extension to capture_windows
./docs/blueprints/autocapture_nx_blueprint.md:1146:  - Test: cursor capture disabled by default; when enabled, schema valid
./docs/blueprints/autocapture_nx_blueprint.md:1147:  - Security: ensure cursor capture does not leak privileged info beyond local store
./docs/blueprints/autocapture_nx_blueprint.md:1601:  - All primary capture, audio, window, input, and derived artifacts conform.
./docs/blueprints/autocapture_nx_blueprint.md:1808:  - run manifest captures environment versions
./docs/blueprints/autocapture_nx_blueprint.md:1872:  - capture pipeline emits telemetry events and exposes metrics endpoint
./docs/blueprints/autocapture_nx_blueprint.md:1877:  - Emit periodic `telemetry.capture` records (derived/monitoring).
./docs/blueprints/autocapture_nx_blueprint.md:1888:  - governor decisions affect capture rate/quality and enrichment admission
./docs/blueprints/autocapture_nx_blueprint.md:1986:  - Allow inproc only for capture primitives that require minimal overhead.
./docs/blueprints/autocapture_nx_blueprint.md:1988:  - Kernel attack surface reduced while keeping capture performance.
./docs/blueprints/autocapture_nx_blueprint.md:2046:  - Add limits to job object; configure per plugin class (capture vs enrichment).
./docs/blueprints/autocapture_nx_blueprint.md:2079:  - Plugin failures do not stall capture or UI.
./docs/blueprints/autocapture_nx_blueprint.md:2304:  - Test: disk pressure and capture drops appear as alerts
./docs/blueprints/autocapture_nx_blueprint.md:2336:  - Stream: capture telemetry (I46), scheduler state (I44), alerts (I81).
./docs/blueprints/autocapture_nx_blueprint.md:2373:### I114 — Clipboard capture plugin (local-only, append-only)
./docs/blueprints/autocapture_nx_blueprint.md:2378:  - new clipboard capture plugin (subprocess-hosted by default)
./docs/blueprints/autocapture_nx_blueprint.md:2387:  - Clipboard history is captured locally with provenance and controlled overhead.
./docs/blueprints/autocapture_nx_blueprint.md:2390:### I115 — File activity capture plugin (USN journal / watcher)
./autocapture/core/__init__.py:3:from .errors import AutocaptureError, ConfigError, SchemaValidationError
./autocapture/core/__init__.py:9:    "AutocaptureError",
./autocapture_nx/windows/win_capture.py:1:"""Windows capture helpers using optional dependencies."""
./autocapture_nx/windows/win_capture.py:27:        raise RuntimeError("Screen capture supported on Windows only")
./autocapture_nx/windows/win_capture.py:32:        raise RuntimeError(f"Missing capture dependencies: {exc}")
./docs/reports/grep_citation.txt:2:./autocapture_plugins/mx.training.default.yaml:34:        produces_citations: true
./docs/reports/grep_citation.txt:3:./autocapture_plugins/mx.training.default.yaml:35:        citation_granularity: claim
./docs/reports/grep_citation.txt:6:./autocapture_plugins/mx.research.default.yaml:34:        produces_citations: true
./docs/reports/grep_citation.txt:7:./autocapture_plugins/mx.research.default.yaml:35:        citation_granularity: claim
./docs/reports/grep_citation.txt:8:./autocapture_plugins/mx.research.default.yaml:63:        produces_citations: true
./docs/reports/grep_citation.txt:9:./autocapture_plugins/mx.research.default.yaml:64:        citation_granularity: claim
./docs/reports/grep_citation.txt:15:./autocapture_plugins/mx.prompts.default.yaml:34:        produces_citations: true
./docs/reports/grep_citation.txt:16:./autocapture_plugins/mx.prompts.default.yaml:35:        citation_granularity: claim
./docs/reports/grep_citation.txt:20:./autocapture_plugins/mx.core.web_ui.yaml:34:        produces_citations: true
./docs/reports/grep_citation.txt:21:./autocapture_plugins/mx.core.web_ui.yaml:35:        citation_granularity: claim
./docs/reports/grep_citation.txt:22:./autocapture_plugins/mx.core.web_ui.yaml:63:        produces_citations: true
./docs/reports/grep_citation.txt:23:./autocapture_plugins/mx.core.web_ui.yaml:64:        citation_granularity: claim
./docs/reports/grep_citation.txt:25:./autocapture_plugins/mx.core.vector_local.yaml:34:        produces_citations: true
./docs/reports/grep_citation.txt:26:./autocapture_plugins/mx.core.vector_local.yaml:35:        citation_granularity: span
./docs/reports/grep_citation.txt:27:./autocapture_plugins/mx.core.storage_sqlite.yaml:34:        produces_citations: true
./docs/reports/grep_citation.txt:28:./autocapture_plugins/mx.core.storage_sqlite.yaml:35:        citation_granularity: span
./docs/reports/grep_citation.txt:29:./autocapture_plugins/mx.core.storage_sqlite.yaml:63:        produces_citations: true
./docs/reports/grep_citation.txt:30:./autocapture_plugins/mx.core.storage_sqlite.yaml:64:        citation_granularity: span
./docs/reports/grep_citation.txt:31:./autocapture_plugins/mx.core.storage_sqlite.yaml:92:        produces_citations: true
./docs/reports/grep_citation.txt:32:./autocapture_plugins/mx.core.storage_sqlite.yaml:93:        citation_granularity: span
./docs/reports/grep_citation.txt:33:./autocapture_plugins/mx.core.retrieval_tiers.yaml:34:        produces_citations: true
./docs/reports/grep_citation.txt:34:./autocapture_plugins/mx.core.retrieval_tiers.yaml:35:        citation_granularity: span
./docs/reports/grep_citation.txt:35:./autocapture_plugins/mx.core.retrieval_tiers.yaml:63:        produces_citations: true
./docs/reports/grep_citation.txt:36:./autocapture_plugins/mx.core.retrieval_tiers.yaml:64:        citation_granularity: span
./docs/reports/grep_citation.txt:37:./autocapture_plugins/mx.core.ocr_local.yaml:34:        produces_citations: true
./docs/reports/grep_citation.txt:38:./autocapture_plugins/mx.core.ocr_local.yaml:35:        citation_granularity: span
./docs/reports/grep_citation.txt:39:./autocapture_plugins/mx.core.llm_openai_compat.yaml:34:        produces_citations: true
./docs/reports/grep_citation.txt:40:./autocapture_plugins/mx.core.llm_openai_compat.yaml:35:        citation_granularity: claim
./docs/reports/grep_citation.txt:41:./autocapture_plugins/mx.core.llm_local.yaml:34:        produces_citations: true
./docs/reports/grep_citation.txt:42:./autocapture_plugins/mx.core.llm_local.yaml:35:        citation_granularity: claim
./docs/reports/grep_citation.txt:43:./autocapture_plugins/mx.core.llm_local.yaml:63:        produces_citations: true
./docs/reports/grep_citation.txt:44:./autocapture_plugins/mx.core.llm_local.yaml:64:        citation_granularity: claim
./docs/reports/grep_citation.txt:47:./autocapture_plugins/mx.core.export_import.yaml:34:        produces_citations: true
./docs/reports/grep_citation.txt:48:./autocapture_plugins/mx.core.export_import.yaml:35:        citation_granularity: event
./docs/reports/grep_citation.txt:49:./autocapture_plugins/mx.core.export_import.yaml:63:        produces_citations: true
./docs/reports/grep_citation.txt:50:./autocapture_plugins/mx.core.export_import.yaml:64:        citation_granularity: event
./docs/reports/grep_citation.txt:51:./autocapture/memory/__init__.py:5:from .citations import Citation, CitationValidator
./docs/reports/grep_citation.txt:78:./autocapture_plugins/mx.core.embed_local.yaml:34:        produces_citations: false
./docs/reports/grep_citation.txt:79:./autocapture_plugins/mx.core.embed_local.yaml:35:        citation_granularity: event
./docs/reports/grep_citation.txt:80:./autocapture/memory/verifier.py:1:"""Answer verification for citations."""
./docs/reports/grep_citation.txt:81:./autocapture/memory/verifier.py:5:from autocapture.memory.citations import CitationValidator, Citation
./docs/reports/grep_citation.txt:82:./autocapture/memory/verifier.py:14:            citations = [Citation(**c) if isinstance(c, dict) else c for c in claim.get("citations", [])]
./docs/reports/grep_citation.txt:83:./autocapture/memory/verifier.py:15:            if not citations:
./docs/reports/grep_citation.txt:84:./autocapture/memory/verifier.py:16:                raise ValueError("Claim missing citations")
./docs/reports/grep_citation.txt:85:./autocapture/memory/verifier.py:17:            self._validator.validate(citations, span_ids)
./docs/reports/grep_citation.txt:86:./tests/test_citation_validation.py:3:from autocapture.memory.citations import Citation, CitationValidator
./docs/reports/grep_citation.txt:87:./autocapture/web/routes/citations.py:15:@router.post("/api/citations/overlay")
./docs/reports/grep_citation.txt:88:./autocapture_plugins/mx.core.egress_sanitizer.yaml:34:        produces_citations: false
./docs/reports/grep_citation.txt:89:./autocapture_plugins/mx.core.egress_sanitizer.yaml:35:        citation_granularity: event
./docs/reports/grep_citation.txt:92:./autocapture/web/api.py:8:from autocapture.web.routes import health, query, settings, citations, plugins, metrics
./docs/reports/grep_citation.txt:93:./autocapture/web/api.py:17:    app.include_router(citations.router)
./docs/reports/grep_citation.txt:94:./autocapture/promptops/evaluate.py:13:    require_citations: bool = True,
./docs/reports/grep_citation.txt:95:./autocapture/promptops/evaluate.py:17:    citation_hits = 0
./docs/reports/grep_citation.txt:96:./autocapture/promptops/evaluate.py:24:        needs_citation = example.get("requires_citation", require_citations)
./docs/reports/grep_citation.txt:97:./autocapture/promptops/evaluate.py:25:        if needs_citation:
./docs/reports/grep_citation.txt:98:./autocapture/promptops/evaluate.py:26:            if "[citation]" in prompt.lower() or "[source]" in prompt.lower():
./docs/reports/grep_citation.txt:99:./autocapture/promptops/evaluate.py:27:                citation_hits += 1
./docs/reports/grep_citation.txt:100:./autocapture/promptops/evaluate.py:29:    citation_coverage = citation_hits / total if total else 1.0
./docs/reports/grep_citation.txt:101:./autocapture/promptops/evaluate.py:30:    ok = pass_rate >= min_pass_rate and (citation_coverage > 0 or not require_citations)
./docs/reports/grep_citation.txt:102:./autocapture/promptops/evaluate.py:34:        "citation_coverage": citation_coverage,
./docs/reports/grep_citation.txt:103:./autocapture_plugins/mx.core.compression_and_verify.yaml:34:        produces_citations: false
./docs/reports/grep_citation.txt:104:./autocapture_plugins/mx.core.compression_and_verify.yaml:35:        citation_granularity: event
./docs/reports/grep_citation.txt:105:./autocapture_plugins/mx.core.compression_and_verify.yaml:63:        produces_citations: true
./docs/reports/grep_citation.txt:106:./autocapture_plugins/mx.core.compression_and_verify.yaml:64:        citation_granularity: claim
./docs/reports/grep_citation.txt:111:./autocapture_plugins/mx.core.capture_win.yaml:34:        produces_citations: false
./docs/reports/grep_citation.txt:112:./autocapture_plugins/mx.core.capture_win.yaml:35:        citation_granularity: event
./docs/reports/grep_citation.txt:113:./autocapture_plugins/mx.core.capture_win.yaml:63:        produces_citations: false
./docs/reports/grep_citation.txt:114:./autocapture_plugins/mx.core.capture_win.yaml:64:        citation_granularity: event
./docs/reports/grep_citation.txt:115:./autocapture_plugins/mx.core.capture_win.yaml:92:        produces_citations: false
./docs/reports/grep_citation.txt:116:./autocapture_plugins/mx.core.capture_win.yaml:93:        citation_granularity: event
./docs/reports/grep_citation.txt:117:./autocapture/memory/citations.py:15:    def validate(self, citations: list[Citation], span_ids: set[str]) -> None:
./docs/reports/grep_citation.txt:118:./autocapture/memory/citations.py:16:        for citation in citations:
./docs/reports/grep_citation.txt:119:./autocapture/memory/citations.py:17:            if citation.span_id not in span_ids:
./docs/reports/grep_citation.txt:120:./autocapture/memory/citations.py:18:                raise ValueError(f"Unknown span id: {citation.span_id}")
./docs/reports/grep_citation.txt:121:./autocapture/memory/answer_orchestrator.py:1:"""Answer orchestrator for claim-level citations."""
./docs/reports/grep_citation.txt:124:./autocapture/ux/facade.py:45:            return {"answer": {"claims": []}, "citations": [], "provenance": context}
./docs/reports/grep_citation.txt:125:./autocapture/ux/facade.py:50:                "citations": [{"span_id": span_id} for span_id in span_ids],
./docs/reports/grep_citation.txt:126:./autocapture/ux/facade.py:54:        return {"answer": answer, "citations": claims[0]["citations"], "provenance": context}
./docs/reports/grep_citation.txt:140:./autocapture_nx/kernel/query.py:95:                "citations": [
./docs/reports/grep_citation.txt:141:./docs/autocapture_mx_implementation_plan.md:47:| C | MOD-012..017 | ingest -> indexing -> retrieval -> context -> answers | tests/test_span_ids_stable.py; tests/test_fts_query_returns_hits.py; tests/test_vector_index_roundtrip.py; tests/test_context_pack_formats.py; tests/test_citation_validation.py |
./docs/reports/grep_citation.txt:142:./docs/autocapture_mx_implementation_plan.md:48:| D | MOD-018..021 | gateway + web + citation overlay + UX + settings | tests/test_gateway_schema_enforced.py; tests/test_gateway_policy_block_cloud_default.py; tests/test_citation_overlay_contract.py; tests/test_ux_facade_parity.py; tests/test_settings_preview_tokens.py |
./docs/reports/grep_citation.txt:143:./docs/autocapture_mx_implementation_plan.md:85:| MX-ANS-0001 | tests/test_citation_validation.py; tests/test_verifier_enforced.py; tests/test_conflict_reporting.py | autocapture/memory/answer_orchestrator.py; autocapture/memory/citations.py; autocapture/memory/verifier.py; autocapture/memory/conflict.py |
./docs/reports/grep_citation.txt:144:./docs/autocapture_mx_implementation_plan.md:89:| MX-WEB-0001 | http_endpoint GET /api/health; POST /api/query | autocapture/web/api.py; autocapture/web/routes/query.py; autocapture/web/routes/citations.py; autocapture/web/routes/plugins.py; autocapture/web/routes/health.py; autocapture/web/routes/metrics.py |
./docs/reports/grep_citation.txt:145:./docs/autocapture_mx_implementation_plan.md:90:| MX-CIT-OVERLAY-0001 | tests/test_citation_overlay_contract.py | autocapture/web/routes/citations.py |
./docs/reports/grep_citation.txt:146:./docs/autocapture_mx_implementation_plan.md:224:- Artifacts: autocapture/memory/answer_orchestrator.py; autocapture/memory/citations.py; autocapture/memory/verifier.py; autocapture/memory/conflict.py
./docs/reports/grep_citation.txt:147:./docs/autocapture_mx_implementation_plan.md:225:- Validation: unit_test tests/test_citation_validation.py; tests/test_verifier_enforced.py; tests/test_conflict_reporting.py
./docs/reports/grep_citation.txt:148:./docs/autocapture_mx_implementation_plan.md:226:- Minimal implementation: claim-level citations + verifier + conflict reporting.
./docs/reports/grep_citation.txt:149:./docs/autocapture_mx_implementation_plan.md:244:- Artifacts: autocapture/web/api.py; autocapture/web/routes/query.py; autocapture/web/routes/citations.py; autocapture/web/routes/plugins.py; autocapture/web/routes/health.py; autocapture/web/routes/metrics.py
./docs/reports/grep_citation.txt:150:./docs/autocapture_mx_implementation_plan.md:249:- Artifacts: autocapture/web/routes/citations.py
./docs/reports/grep_citation.txt:151:./docs/autocapture_mx_implementation_plan.md:250:- Validation: unit_test tests/test_citation_overlay_contract.py
./docs/reports/grep_citation.txt:152:./docs/autocapture_mx_implementation_plan.md:251:- Minimal implementation: citation overlay API returns bbox metadata and deterministic image or placeholder.
./docs/reports/grep_citation.txt:153:./docs/autocapture_nx_blueprint_final.md:43:Time parsing, query planning, retrieval tie-breaks, citation mapping, and sanitization must be deterministic for identical inputs.
./docs/reports/grep_citation.txt:154:./docs/autocapture_nx_blueprint_final.md:67:**Invariant P4.1 Claim-level citations**  
./docs/reports/grep_citation.txt:155:./docs/autocapture_nx_blueprint_final.md:68:Answers are emitted as claims with citations referencing immutable local evidence spans.
./docs/reports/grep_citation.txt:156:./docs/autocapture_nx_blueprint_final.md:96:Cloud calls use a **sanitized reasoning packet** built locally. Retrieval, citation construction, and final answer assembly remain local.
./docs/reports/grep_citation.txt:157:./docs/autocapture_nx_blueprint_final.md:105:- P2 Accurate, P4 Citable: no local evidence loss; citations remain faithful.
./docs/reports/grep_citation.txt:158:./docs/autocapture_nx_blueprint_final.md:133:- P2 Accurate, P4 Citable: correct time windows and stable citations.
./docs/reports/grep_citation.txt:159:./docs/autocapture_nx_blueprint_final.md:434:- Gate: citation emission requires ledger+anchor verification.
./docs/reports/grep_citation.txt:160:./docs/autocapture_nx_blueprint_final.md:811:### Answer graph and citations
./docs/reports/grep_citation.txt:161:./docs/autocapture_nx_blueprint_final.md:813:- Produce claim objects with citations referencing immutable text spans.
./docs/reports/grep_citation.txt:162:./docs/autocapture_nx_blueprint_final.md:814:- Validator fails closed if citations cannot be resolved.
./docs/reports/grep_citation.txt:163:./docs/autocapture_nx_blueprint_final.md:817:- P4 Citable: claim-level citations are verifiable.
./docs/reports/grep_citation.txt:164:./docs/autocapture_nx_blueprint_final.md:827:- Golden query suite and citation validation suite.
./docs/reports/grep_citation.txt:165:./docs/autocapture_nx_blueprint_final.md:854:- optional `citations_stub[]` (IDs only, no raw text)
./docs/reports/grep_citation.txt:166:./docs/autocapture_mx_blueprint.md:40:- **P4 Citable**: deterministic evidence + claim-level citations, validation, and provenance ledger.
./docs/reports/grep_citation.txt:167:./docs/autocapture_mx_blueprint.md:50:- **Claim**: an atomic statement in an answer that must be supported by citations.
./docs/reports/grep_citation.txt:168:./docs/autocapture_mx_blueprint.md:181:    citations.py
./docs/reports/grep_citation.txt:169:./docs/autocapture_mx_blueprint.md:204:      citations.py
./docs/reports/grep_citation.txt:170:./docs/autocapture_mx_blueprint.md:331:  - `produces_citations`: true|false
./docs/reports/grep_citation.txt:171:./docs/autocapture_mx_blueprint.md:332:  - `citation_granularity`: `event | span | claim`
./docs/reports/grep_citation.txt:172:./docs/autocapture_mx_blueprint.md:427:MX uses deterministic IDs to maximize cache hits and citation stability:
./docs/reports/grep_citation.txt:173:./docs/autocapture_mx_blueprint.md:448:- traceability from answer → citations → spans → captures → blobs.
./docs/reports/grep_citation.txt:174:./docs/autocapture_mx_blueprint.md:556:All extracted tables produce spans with `kind=table_cell` and citations map back to source bbox or cell coordinates.
./docs/reports/grep_citation.txt:175:./docs/autocapture_mx_blueprint.md:647:- `citations`: claim → list of span references
./docs/reports/grep_citation.txt:176:./docs/autocapture_mx_blueprint.md:654:- model must output structured JSON with claims and citations.
./docs/reports/grep_citation.txt:177:./docs/autocapture_mx_blueprint.md:655:- citations reference span_ids only (not raw text).
./docs/reports/grep_citation.txt:178:./docs/autocapture_mx_blueprint.md:662:- compute coverage score (claims with at least one valid citation).
./docs/reports/grep_citation.txt:179:./docs/autocapture_mx_blueprint.md:678:- include timestamps and citations for both sides,
./docs/reports/grep_citation.txt:180:./docs/autocapture_mx_blueprint.md:724:- returning citation overlay images (bbox highlighting)
./docs/reports/grep_citation.txt:181:./docs/autocapture_mx_blueprint.md:765:  - citation coverage metrics
./docs/reports/grep_citation.txt:182:./docs/autocapture_mx_blueprint.md:820:- citation integrity simulation
./docs/reports/grep_citation.txt:183:./docs/autocapture_mx_blueprint.md:1207:    title: Claim-level citations + citation validation + verifier enforced
./docs/reports/grep_citation.txt:184:./docs/autocapture_mx_blueprint.md:1211:      - autocapture/memory/citations.py
./docs/reports/grep_citation.txt:185:./docs/autocapture_mx_blueprint.md:1216:        target: tests/test_citation_validation.py
./docs/reports/grep_citation.txt:186:./docs/autocapture_mx_blueprint.md:1268:      - autocapture/web/routes/citations.py
./docs/reports/grep_citation.txt:187:./docs/autocapture_mx_blueprint.md:1280:        expects_json_keys: ["answer", "citations", "provenance"]
./docs/reports/grep_citation.txt:188:./docs/autocapture_mx_blueprint.md:1286:      - autocapture/web/routes/citations.py
./docs/reports/grep_citation.txt:189:./docs/autocapture_mx_blueprint.md:1289:        target: tests/test_citation_overlay_contract.py
./docs/reports/grep_citation.txt:190:./docs/autocapture_mx_blueprint.md:1402:- A user query produces claim-level citations with valid span IDs and overlays.
./docs/reports/grep_citation.txt:192:./docs/mx_gap_matrix.md:208:- Existing (NX): plugins/builtin/answer_basic/plugin.py; plugins/builtin/citation_basic/plugin.py; autocapture_nx/kernel/query.py
./docs/reports/grep_citation.txt:193:./docs/mx_gap_matrix.md:209:- Missing (MX paths/tests): autocapture/memory/answer_orchestrator.py; autocapture/memory/citations.py; autocapture/memory/verifier.py; autocapture/memory/conflict.py; tests/test_citation_validation.py; tests/test_verifier_enforced.py; tests/test_conflict_reporting.py
./docs/reports/grep_citation.txt:194:./docs/mx_gap_matrix.md:211:  - Artifacts: autocapture/memory/answer_orchestrator.py; autocapture/memory/citations.py; autocapture/memory/verifier.py; autocapture/memory/conflict.py
./docs/reports/grep_citation.txt:196:./docs/mx_gap_matrix.md:241:- Missing (MX paths/tests): autocapture/web/api.py; autocapture/web/routes/query.py; autocapture/web/routes/citations.py; autocapture/web/routes/plugins.py; autocapture/web/routes/health.py; autocapture/web/routes/metrics.py; tests/test_* web validators
./docs/reports/grep_citation.txt:197:./docs/mx_gap_matrix.md:243:  - Artifacts: autocapture/web/api.py; autocapture/web/routes/query.py; autocapture/web/routes/citations.py; autocapture/web/routes/plugins.py; autocapture/web/routes/health.py; autocapture/web/routes/metrics.py
./docs/reports/grep_citation.txt:198:./docs/mx_gap_matrix.md:249:- Missing (MX paths/tests): autocapture/web/routes/citations.py; tests/test_citation_overlay_contract.py
./docs/reports/grep_citation.txt:199:./docs/mx_gap_matrix.md:251:  - Artifacts: autocapture/web/routes/citations.py
./docs/reports/grep_citation.txt:201:./docs/mx_equivalence_map.md:141:- Proof: `plugins/builtin/answer_basic/plugin.py`; `plugins/builtin/citation_basic/plugin.py`; `autocapture_nx/kernel/query.py`; `tests/test_answer_builder.py`; `tests/test_query.py`
./docs/reports/grep_citation.txt:207:./docs/assumptions_checklist.md:189:- MX implementation plan explicitly permits placeholder citation overlay images. `docs/autocapture_mx_implementation_plan.md:192`
./docs/reports/grep_citation.txt:208:./docs/reports/grep_derived.txt:12:./docs/blueprints/autocapture_nx_blueprint.md:68:- **Phase 4: Retrieval + provenance + citations** — Deterministic retrieval, derived artifacts, citation resolver, proof bundles, replay.
./docs/reports/grep_citation.txt:209:./docs/reports/grep_derived.txt:39:./docs/blueprints/autocapture_nx_blueprint.md:1435:Deterministic retrieval, derived artifacts, citation resolver, proof bundles, replay.
./docs/reports/grep_citation.txt:212:./docs/reports/grep_ledger.txt:66:./docs/autocapture_mx_blueprint.md:40:- **P4 Citable**: deterministic evidence + claim-level citations, validation, and provenance ledger.
./docs/reports/grep_citation.txt:213:./docs/reports/grep_ledger.txt:146:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_citation.txt:214:./docs/reports/grep_ledger.txt:175:./docs/autocapture_nx_blueprint_final.md:434:- Gate: citation emission requires ledger+anchor verification.
./docs/reports/grep_citation.txt:240:./docs/spec/autocapture_mx_spec.yaml:338:    title: Claim-level citations + citation validation + verifier enforced
./docs/reports/grep_citation.txt:241:./docs/spec/autocapture_mx_spec.yaml:342:      - autocapture/memory/citations.py
./docs/reports/grep_citation.txt:242:./docs/spec/autocapture_mx_spec.yaml:347:        target: tests/test_citation_validation.py
./docs/reports/grep_citation.txt:243:./docs/spec/autocapture_mx_spec.yaml:399:      - autocapture/web/routes/citations.py
./docs/reports/grep_citation.txt:244:./docs/spec/autocapture_mx_spec.yaml:411:        expects_json_keys: ["answer", "citations", "provenance"]
./docs/reports/grep_citation.txt:245:./docs/spec/autocapture_mx_spec.yaml:417:      - autocapture/web/routes/citations.py
./docs/reports/grep_citation.txt:246:./docs/spec/autocapture_mx_spec.yaml:420:        target: tests/test_citation_overlay_contract.py
./docs/reports/grep_citation.txt:247:./docs/reports/grep_evidence.txt:10:./docs/autocapture_mx_blueprint.md:40:- **P4 Citable**: deterministic evidence + claim-level citations, validation, and provenance ledger.
./docs/reports/grep_citation.txt:248:./docs/reports/grep_evidence.txt:24:./docs/autocapture_nx_blueprint_final.md:68:Answers are emitted as claims with citations referencing immutable local evidence spans.
./docs/reports/grep_citation.txt:249:./docs/reports/grep_evidence.txt:27:./docs/autocapture_nx_blueprint_final.md:105:- P2 Accurate, P4 Citable: no local evidence loss; citations remain faithful.
./docs/reports/grep_citation.txt:250:./docs/reports/grep_evidence.txt:68:./docs/blueprints/autocapture_nx_blueprint.md:553:  - No query path mutates primary evidence; citations remain stable over time.
./docs/reports/grep_citation.txt:251:./docs/reports/grep_evidence.txt:86:./docs/blueprints/autocapture_nx_blueprint.md:1430:  - Storage is optimized without compromising evidence immutability or citations.
./docs/reports/grep_citation.txt:252:./docs/reports/grep_evidence.txt:92:./docs/blueprints/autocapture_nx_blueprint.md:1550:  - citation schema uses evidence_id + span_ref + hashes
./docs/reports/grep_citation.txt:253:./docs/reports/grep_evidence.txt:94:./docs/blueprints/autocapture_nx_blueprint.md:1565:  - citation resolver service + CLI validates evidence and provenance
./docs/reports/grep_citation.txt:254:./docs/reports/grep_evidence.txt:97:./docs/blueprints/autocapture_nx_blueprint.md:1582:  - Golden tests: unresolved citations produce `state=no_evidence` or `state=partial`
./docs/reports/grep_citation.txt:255:./docs/reports/grep_evidence.txt:107:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_citation.txt:259:./docs/reports/grep_evidence.txt:129:./docs/reports/grep_ledger.txt:66:./docs/autocapture_mx_blueprint.md:40:- **P4 Citable**: deterministic evidence + claim-level citations, validation, and provenance ledger.
./docs/reports/grep_citation.txt:260:./docs/reports/grep_evidence.txt:137:./docs/reports/grep_ledger.txt:146:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_citation.txt:262:./docs/blueprints/autocapture_nx_blueprint.md:68:- **Phase 4: Retrieval + provenance + citations** — Deterministic retrieval, derived artifacts, citation resolver, proof bundles, replay.
./docs/reports/grep_citation.txt:263:./docs/blueprints/autocapture_nx_blueprint.md:120:- [ ] **I043** (Phase 4) — [Fail closed if citations do not resolve](#i043)
./docs/reports/grep_citation.txt:264:./docs/blueprints/autocapture_nx_blueprint.md:154:- [ ] **I077** (Phase 4) — [Replay mode validates citations without model calls](#i077)
./docs/reports/grep_citation.txt:265:./docs/blueprints/autocapture_nx_blueprint.md:553:  - No query path mutates primary evidence; citations remain stable over time.
./docs/reports/grep_citation.txt:266:./docs/blueprints/autocapture_nx_blueprint.md:988:  - Test: correlation graph includes references from text/citation to input bursts
./docs/reports/grep_citation.txt:267:./docs/blueprints/autocapture_nx_blueprint.md:1425:  - Test: compaction reduces size; citations still resolve
./docs/reports/grep_citation.txt:268:./docs/blueprints/autocapture_nx_blueprint.md:1430:  - Storage is optimized without compromising evidence immutability or citations.
./docs/reports/grep_citation.txt:269:./docs/blueprints/autocapture_nx_blueprint.md:1433:## Phase 4: Retrieval + provenance + citations
./docs/reports/grep_citation.txt:270:./docs/blueprints/autocapture_nx_blueprint.md:1435:Deterministic retrieval, derived artifacts, citation resolver, proof bundles, replay.
./docs/reports/grep_citation.txt:271:./docs/blueprints/autocapture_nx_blueprint.md:1550:  - citation schema uses evidence_id + span_ref + hashes
./docs/reports/grep_citation.txt:272:./docs/blueprints/autocapture_nx_blueprint.md:1552:  - Schema test: citations cannot be created without required fields
./docs/reports/grep_citation.txt:273:./docs/blueprints/autocapture_nx_blueprint.md:1565:  - citation resolver service + CLI validates evidence and provenance
./docs/reports/grep_citation.txt:274:./docs/blueprints/autocapture_nx_blueprint.md:1572:  - Every citation displayed in UI can be validated locally on demand.
./docs/reports/grep_citation.txt:275:./docs/blueprints/autocapture_nx_blueprint.md:1575:### I043 — Fail closed if citations do not resolve
./docs/reports/grep_citation.txt:276:./docs/blueprints/autocapture_nx_blueprint.md:1580:  - answer pipeline refuses to return `state=ok` if citations unresolved
./docs/reports/grep_citation.txt:277:./docs/blueprints/autocapture_nx_blueprint.md:1582:  - Golden tests: unresolved citations produce `state=no_evidence` or `state=partial`
./docs/reports/grep_citation.txt:278:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_citation.txt:279:./docs/blueprints/autocapture_nx_blueprint.md:1673:  - Resolver rejects citations missing required verification fields
./docs/reports/grep_citation.txt:280:./docs/blueprints/autocapture_nx_blueprint.md:1686:  - CLI/API endpoints: `verify citation`, `resolve citation`
./docs/reports/grep_citation.txt:281:./docs/blueprints/autocapture_nx_blueprint.md:1688:  - Golden: resolver output stable and correct for known citations
./docs/reports/grep_citation.txt:282:./docs/blueprints/autocapture_nx_blueprint.md:1693:  - Users can verify citations with one command.
./docs/reports/grep_citation.txt:283:./docs/blueprints/autocapture_nx_blueprint.md:1773:### I077 — Replay mode validates citations without model calls
./docs/reports/grep_citation.txt:284:./docs/blueprints/autocapture_nx_blueprint.md:1778:  - replay tool validates retrieval/citations without model calls
./docs/reports/grep_citation.txt:285:./docs/blueprints/autocapture_nx_blueprint.md:1780:  - Golden: replay reproduces expected citations and verification results
./docs/reports/grep_citation.txt:286:./docs/blueprints/autocapture_nx_blueprint.md:2260:  - Responses are structured and include answer state + citations.
./docs/reports/grep_citation.txt:287:./docs/blueprints/autocapture_nx_blueprint.md:2290:  - Minimal but complete views: status, timeline, query with citations,
./docs/reports/grep_citation.txt:288:./docs/blueprints/autocapture_nx_blueprint.md:2292:  - All displays resolve citations via resolver (I71/I42).
./plugins/builtin/storage_encrypted/plugin.py:10:from autocapture_nx.kernel.crypto import EncryptedBlob, decrypt_bytes, derive_key, encrypt_bytes
./plugins/builtin/storage_encrypted/plugin.py:11:from autocapture_nx.kernel.keyring import KeyRing
./plugins/builtin/storage_encrypted/plugin.py:12:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/devtools_diffusion/plugin.py:7:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./docs/autocapture_nx_blueprint_final.md:1:# Autocapture NX Blueprint
./docs/autocapture_nx_blueprint_final.md:7:This blueprint defines a **single-user**, **single-machine** Autocapture system optimized for:
./docs/autocapture_nx_blueprint_final.md:13:Primary purpose: **full-fidelity personal memory**. The system must capture, store, process, and keep searchable **everything visible/typed/heard on the machine**, without local sanitization, filtering, replacement, or deletion.
./docs/autocapture_nx_blueprint_final.md:21:Autocapture NX treats each pillar as a set of **executable invariants** enforced in runtime and CI.
./docs/autocapture_nx_blueprint_final.md:26:Capture runs continuously. Under load, the system may reduce capture quality, but must not silently stop. If capture cannot continue due to hard resource exhaustion (e.g., disk full), the system must alert immediately and require explicit user action.
./docs/autocapture_nx_blueprint_final.md:29:When the user is actively using the machine, all non-capture compute is stopped within a fixed deadline. Capture remains active.
./docs/autocapture_nx_blueprint_final.md:40:Locally stored evidence must be exact and unredacted. No “privacy transformations” are applied to local capture, storage, or indexing.
./docs/autocapture_nx_blueprint_final.md:94:Remove privacy sanitization and exclusion from capture/processing. Introduce a dedicated **privacy egress layer** that sanitizes outbound requests by tokenizing entities while preserving intent. Local evidence remains full-fidelity.
./docs/autocapture_nx_blueprint_final.md:101:- **INFERENCE:** Local full-fidelity capture is required for Justin’s memory use-case.  
./docs/autocapture_nx_blueprint_final.md:127:Define and enforce a time model that stores UTC plus capture-time timezone metadata, with deterministic parsing rules for relative times and DST edges.
./docs/autocapture_nx_blueprint_final.md:165:- Schema validation at ingest boundary, not inside capture loop.
./docs/autocapture_nx_blueprint_final.md:267:- Disk-pressure simulations: alerts trigger; capture quality adapts; system fails closed if disk full.
./docs/autocapture_nx_blueprint_final.md:297:Define a deterministic backpressure controller that adapts capture quality under load without thrashing.
./docs/autocapture_nx_blueprint_final.md:300:- **INFERENCE:** Without hysteresis, capture can oscillate quality rapidly.
./docs/autocapture_nx_blueprint_final.md:311:- Kernel runtime governor controls capture settings.
./docs/autocapture_nx_blueprint_final.md:403:- P2 Accurate: degraded capture reduces recall.
./docs/autocapture_nx_blueprint_final.md:411:- Tests with simulated capture backend failure: system surfaces actionable error and continues in best-effort mode.
./docs/autocapture_nx_blueprint_final.md:443:- **Plugins**: isolated service extensions for capture, processing, retrieval, UI, and providers.
./docs/autocapture_nx_blueprint_final.md:457:- `capture.source`
./docs/autocapture_nx_blueprint_final.md:458:- `capture.audio`
./docs/autocapture_nx_blueprint_final.md:506:- `ACTIVE_CAPTURE_ONLY`: capture + minimal journaling only.
./docs/autocapture_nx_blueprint_final.md:556:- `stage` (capture, extract, index, retrieve, answer, egress)
./docs/autocapture_nx_blueprint_final.md:608:- Full-fidelity capture of what is visible, plus audio and input events as available.
./docs/autocapture_nx_blueprint_final.md:612:### Windows capture backends
./docs/autocapture_nx_blueprint_final.md:615:- Desktop Duplication capture to GPU surface, encoded with NVENC.
./docs/autocapture_nx_blueprint_final.md:628:  - monitors captured
./docs/autocapture_nx_blueprint_final.md:635:- capture loop step latency
./docs/autocapture_nx_blueprint_final.md:656:- P2 Accurate: prevents hard capture gaps.
./docs/autocapture_nx_blueprint_final.md:662:- Kernel governor; capture plugin applies updates.
./docs/autocapture_nx_blueprint_final.md:667:### Audio capture
./docs/autocapture_nx_blueprint_final.md:672:### Input capture
./docs/autocapture_nx_blueprint_final.md:699:- P1 Performant: high-fidelity capture can increase IO/encode load.
./docs/autocapture_nx_blueprint_final.md:702:- Kernel governor + capture source plugin.
./docs/autocapture_nx_blueprint_final.md:706:- Bench: capture loop latency and dropped frames under load.
./docs/autocapture_nx_blueprint_final.md:791:- Resolve relative times in configured user timezone (default: capture-time tz unless overridden).
./docs/autocapture_nx_blueprint_final.md:952:- Quality adapts for new capture if necessary.
./docs/autocapture_nx_blueprint_final.md:953:- If disk becomes full, capture fails closed with an immediate on-screen alert requiring user action. No silent deletion.
./docs/autocapture_nx_blueprint_final.md:1057:- capture backend operational
./docs/autocapture_nx_blueprint_final.md:1069:- Latency and capture overhead benches
./docs/autocapture_nx_blueprint_final.md:1096:### R1 Missing capture
./docs/autocapture_nx_blueprint_final.md:1099:- capture backend crashes
./docs/autocapture_nx_blueprint_final.md:1105:- supervisor restarts capture process
./docs/autocapture_nx_blueprint_final.md:1194:- store both capture-time tz and user-config tz
./docs/autocapture_nx_blueprint_final.md:1209:- capture encode settings adapt under fullscreen/high GPU load
./docs/autocapture_nx_blueprint_final.md:1249:capture:
./docs/autocapture_nx_blueprint_final.md:1313:autocapture_nx/
./docs/autocapture_nx_blueprint_final.md:1317:      capture/
./plugins/builtin/meta_configurator_noop/plugin.py:7:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./docs/reports/grep_canonical_json.txt:3:./tools/frozen_surfaces.py:20:from autocapture_nx.kernel.canonical_json import dumps as nx_canonical_dumps
./docs/reports/grep_canonical_json.txt:7:./tests/test_canonical_json.py:3:from autocapture_nx.kernel.canonical_json import dumps, CanonicalJSONError
./docs/reports/grep_canonical_json.txt:8:./docs/autocapture_mx_blueprint.md:444:- `hash = blake3(prev_hash + canonical_json(payload) + ts + type + id)`
./docs/reports/grep_canonical_json.txt:9:./docs/blueprints/autocapture_nx_blueprint.md:166:- [ ] **I089** (Phase 0) — [Add canonical-json safety tests for journal/ledger payloads](#i089)
./docs/reports/grep_canonical_json.txt:10:./docs/blueprints/autocapture_nx_blueprint.md:318:### I089 — Add canonical-json safety tests for journal/ledger payloads
./docs/reports/grep_canonical_json.txt:11:./docs/blueprints/autocapture_nx_blueprint.md:323:  - Unit tests for canonical-json compliance across all event builders
./docs/reports/grep_canonical_json.txt:12:./docs/blueprints/autocapture_nx_blueprint.md:332:  - All emitted events pass canonical-json validation in CI.
./docs/reports/grep_canonical_json.txt:13:./docs/blueprints/autocapture_nx_blueprint.md:474:  - EventBuilder + canonical_json encoder
./docs/reports/grep_canonical_json.txt:14:./docs/blueprints/autocapture_nx_blueprint.md:762:  - Test: EventBuilder outputs canonical-json-safe payloads
./docs/reports/grep_canonical_json.txt:15:./docs/blueprints/autocapture_nx_blueprint.md:796:  - Compute `policy_hash = sha256(canonical_json(policy_snapshot))` at run start.
./docs/reports/grep_canonical_json.txt:16:./docs/blueprints/autocapture_nx_blueprint.md:1611:  - hashing: media plaintext SHA-256; metadata canonical-json hash
./docs/reports/grep_canonical_json.txt:17:./docs/autocapture_nx_blueprint_final.md:150:Define `journal_v1` and `ledger_v1` schemas and a strict `canonical_json` function used for hashing.
./docs/reports/grep_canonical_json.txt:18:./docs/autocapture_nx_blueprint_final.md:564:- `entry_hash = SHA256(canonical_json(entry_without_entry_hash) || prev_hash)`
./docs/reports/grep_canonical_json.txt:19:./docs/autocapture_nx_blueprint_final.md:591:### `canonical_json`
./docs/reports/grep_canonical_json.txt:20:./docs/autocapture_nx_blueprint_final.md:1072:  - canonical_json
./docs/reports/grep_canonical_json.txt:21:./docs/mx_gap_matrix.md:32:- Existing (NX): autocapture_nx/kernel/canonical_json.py; autocapture_nx/kernel/hashing.py
./docs/reports/grep_canonical_json.txt:22:./docs/mx_equivalence_map.md:31:- Proof: `autocapture_nx/kernel/canonical_json.py` (canonical JSON); `autocapture_nx/kernel/hashing.py` (sha256 helpers); `tests/test_canonical_json.py`
./docs/reports/grep_canonical_json.txt:24:./docs/reports/grep_ledger.txt:95:./docs/blueprints/autocapture_nx_blueprint.md:166:- [ ] **I089** (Phase 0) — [Add canonical-json safety tests for journal/ledger payloads](#i089)
./docs/reports/grep_canonical_json.txt:25:./docs/reports/grep_ledger.txt:103:./docs/blueprints/autocapture_nx_blueprint.md:318:### I089 — Add canonical-json safety tests for journal/ledger payloads
./docs/reports/grep_canonical_json.txt:26:./docs/reports/grep_ledger.txt:167:./docs/autocapture_nx_blueprint_final.md:150:Define `journal_v1` and `ledger_v1` schemas and a strict `canonical_json` function used for hashing.
./docs/reports/grep_canonical_json.txt:28:./plugins/builtin/capture_windows/plugin.py:12:from autocapture_nx.kernel.canonical_json import dumps
./docs/reports/grep_canonical_json.txt:29:./docs/reports/grep_journal.txt:15:./docs/blueprints/autocapture_nx_blueprint.md:166:- [ ] **I089** (Phase 0) — [Add canonical-json safety tests for journal/ledger payloads](#i089)
./docs/reports/grep_canonical_json.txt:30:./docs/reports/grep_journal.txt:20:./docs/blueprints/autocapture_nx_blueprint.md:318:### I089 — Add canonical-json safety tests for journal/ledger payloads
./docs/reports/grep_canonical_json.txt:31:./docs/reports/grep_journal.txt:52:./docs/autocapture_nx_blueprint_final.md:150:Define `journal_v1` and `ledger_v1` schemas and a strict `canonical_json` function used for hashing.
./docs/reports/grep_canonical_json.txt:33:./docs/reports/grep_journal.txt:81:./docs/reports/grep_ledger.txt:95:./docs/blueprints/autocapture_nx_blueprint.md:166:- [ ] **I089** (Phase 0) — [Add canonical-json safety tests for journal/ledger payloads](#i089)
./docs/reports/grep_canonical_json.txt:34:./docs/reports/grep_journal.txt:84:./docs/reports/grep_ledger.txt:103:./docs/blueprints/autocapture_nx_blueprint.md:318:### I089 — Add canonical-json safety tests for journal/ledger payloads
./docs/reports/grep_canonical_json.txt:35:./docs/reports/grep_journal.txt:96:./docs/reports/grep_ledger.txt:167:./docs/autocapture_nx_blueprint_final.md:150:Define `journal_v1` and `ledger_v1` schemas and a strict `canonical_json` function used for hashing.
./docs/reports/grep_canonical_json.txt:40:./plugins/builtin/devtools_ast_ir/plugin.py:14:from autocapture_nx.kernel.canonical_json import dumps
./docs/reports/grep_canonical_json.txt:41:./plugins/builtin/anchor_basic/plugin.py:10:from autocapture_nx.kernel.canonical_json import dumps
./docs/reports/grep_canonical_json.txt:42:./autocapture_nx/kernel/key_rotation.py:8:from autocapture_nx.kernel.canonical_json import dumps
./docs/reports/grep_canonical_json.txt:43:./plugins/builtin/ledger_basic/plugin.py:10:from autocapture_nx.kernel.canonical_json import dumps
./docs/reports/grep_canonical_json.txt:44:./plugins/builtin/journal_basic/plugin.py:8:from autocapture_nx.kernel.canonical_json import dumps
./autocapture/memory/verifier.py:5:from autocapture.memory.citations import CitationValidator, Citation
./docs/autocapture_mx_implementation_plan.md:1:# Autocapture MX Implementation Plan
./docs/autocapture_mx_implementation_plan.md:3:Source blueprint: docs/autocapture_mx_blueprint.md
./docs/autocapture_mx_implementation_plan.md:4:Spec extract: docs/spec/autocapture_mx_spec.yaml
./docs/autocapture_mx_implementation_plan.md:15:- CLI: argparse in `autocapture_nx/cli.py` (keep argparse for MX CLI to avoid new deps).
./docs/autocapture_mx_implementation_plan.md:28:- Add a new top-level `autocapture/` package with MX paths and thin adapters to NX where safe.
./docs/autocapture_mx_implementation_plan.md:29:- Use `docs/spec/autocapture_mx_spec.yaml` as the authoritative Codex spec source.
./docs/autocapture_mx_implementation_plan.md:31:- Where NX already meets a requirement, create adapter modules under `autocapture/` to prove equivalence and satisfy Appendix A paths/tests.
./docs/autocapture_mx_implementation_plan.md:45:| A | MOD-001..005 | autocapture CLI + config + core utils + plugin system + autocapture_plugins manifests | tests/test_config_defaults.py; tests/test_plugin_discovery_no_import.py; tests/test_plugin_kinds_registry.py; tests/test_policy_gate.py |
./docs/autocapture_mx_implementation_plan.md:46:| B | MOD-006..011 | redaction + runtime governor/leases + storage v2 + capture spool/pipeline | tests/test_sanitizer_no_raw_pii.py; tests/test_governor_gating.py; tests/test_work_leases.py; tests/test_capture_spool_idempotent.py; tests/test_sqlcipher_roundtrip.py |
./docs/autocapture_mx_implementation_plan.md:53:- HR-003 single HTTP surface: all egress via autocapture/core/http.py; PolicyGate denies non-gateway.
./docs/autocapture_mx_implementation_plan.md:54:- HR-004 privacy: no keystroke text capture, even if config enables raw input.
./docs/autocapture_mx_implementation_plan.md:61:| MX-CONFIG-0001 | python_import autocapture.config.load:load_config; tests/test_config_defaults.py | autocapture/config/models.py; autocapture/config/load.py; autocapture/config/defaults.py |
./docs/autocapture_mx_implementation_plan.md:62:| MX-RETENTION-0001 | cli_output_regex_absent autocapture --help; http_routes_absent /api/delete|/api/purge|/api/wipe | autocapture/ux/facade.py; autocapture/web/api.py |
./docs/autocapture_mx_implementation_plan.md:63:| MX-CORE-0001 | tests/test_hashing_canonical.py; tests/test_ids_stable.py | autocapture/core/hashing.py; autocapture/core/ids.py; autocapture/core/jsonschema.py |
./docs/autocapture_mx_implementation_plan.md:64:| MX-PLUGIN-0001 | python_import PluginManager + ExtensionManifest; tests/test_plugin_discovery_no_import.py; autocapture plugins list --json | autocapture/plugins/manifest.py; autocapture/plugins/manager.py; autocapture/plugins/kinds.py |
./docs/autocapture_mx_implementation_plan.md:65:| MX-KINDS-0001 | tests/test_plugin_kinds_registry.py | autocapture/plugins/kinds.py |
./docs/autocapture_mx_implementation_plan.md:66:| MX-PLUGSET-0001 | plugins_have_ids; plugins_have_kinds; autocapture plugins verify-defaults | autocapture_plugins/ |
./docs/autocapture_mx_implementation_plan.md:67:| MX-PLUGIN-0002 | tests/test_plugin_hotswap.py | autocapture/plugins/manager.py |
./docs/autocapture_mx_implementation_plan.md:68:| MX-PLUGIN-0003 | tests/test_safe_mode.py | autocapture/plugins/manager.py; autocapture/plugins/policy_gate.py |
./docs/autocapture_mx_implementation_plan.md:69:| MX-POLICY-0001 | python_import PolicyGate; tests/test_policy_gate.py | autocapture/plugins/policy_gate.py; autocapture/core/http.py |
./docs/autocapture_mx_implementation_plan.md:70:| MX-SAN-0001 | tests/test_entity_hashing_stable.py; tests/test_sanitizer_no_raw_pii.py | autocapture/memory/entities.py; autocapture/ux/redaction.py |
./docs/autocapture_mx_implementation_plan.md:71:| MX-GOV-0001 | tests/test_governor_gating.py | autocapture/runtime/governor.py; autocapture/runtime/activity.py; autocapture/runtime/scheduler.py; autocapture/runtime/budgets.py |
./docs/autocapture_mx_implementation_plan.md:72:| MX-LEASE-0001 | tests/test_work_leases.py | autocapture/runtime/leases.py |
./docs/autocapture_mx_implementation_plan.md:73:| MX-STORE-0001 | tests/test_key_export_import_roundtrip.py; tests/test_sqlcipher_roundtrip.py; tests/test_blob_encryption_roundtrip.py | autocapture/storage/database.py; autocapture/storage/sqlcipher.py; autocapture/storage/keys.py; autocapture/storage/media_store.py; autocapture/storage/blob_store.py |
./docs/autocapture_mx_implementation_plan.md:74:| MX-LEDGER-0001 | tests/test_provenance_chain.py; autocapture provenance verify | autocapture/pillars/citable.py; autocapture/core/hashing.py; autocapture/storage/archive.py |
./docs/autocapture_mx_implementation_plan.md:75:| MX-RULES-0001 | tests/test_rules_ledger_append_only.py; tests/test_rules_state_rebuild.py | autocapture/rules/ledger.py; autocapture/rules/store.py; autocapture/rules/schema.py; autocapture/rules/cli.py |
./docs/autocapture_mx_implementation_plan.md:76:| MX-CAPTURE-0001 | tests/test_capture_spool_idempotent.py | autocapture/capture/spool.py; autocapture/capture/pipelines.py; autocapture/capture/models.py |
./docs/autocapture_mx_implementation_plan.md:77:| MX-INGEST-0001 | tests/test_span_ids_stable.py; tests/test_span_bbox_norm.py | autocapture/ingest/normalizer.py; autocapture/ingest/spans.py |
./docs/autocapture_mx_implementation_plan.md:78:| MX-TABLE-0001 | tests/test_table_extractor_strategies.py | autocapture/plugins/kinds.py |
./docs/autocapture_mx_implementation_plan.md:79:| MX-INDEX-0001 | tests/test_fts_query_returns_hits.py | autocapture/indexing/lexical.py |
./docs/autocapture_mx_implementation_plan.md:80:| MX-INDEX-0002 | tests/test_vector_index_roundtrip.py | autocapture/indexing/vector.py |
./docs/autocapture_mx_implementation_plan.md:81:| MX-INDEX-0003 | tests/test_qdrant_sidecar_healthcheck.py | autocapture/indexing/vector.py; autocapture/tools/vendor_windows_binaries.py |
./docs/autocapture_mx_implementation_plan.md:82:| MX-GRAPH-0001 | tests/test_graph_adapter_contract.py | autocapture/indexing/graph.py |
./docs/autocapture_mx_implementation_plan.md:83:| MX-RETR-0001 | tests/test_rrf_fusion_determinism.py; tests/test_tier_planner_escalation.py | autocapture/retrieval/tiers.py; autocapture/retrieval/fusion.py; autocapture/retrieval/rerank.py; autocapture/retrieval/signals.py |
./docs/autocapture_mx_implementation_plan.md:84:| MX-CTX-0001 | tests/test_context_pack_formats.py | autocapture/memory/context_pack.py; autocapture/retrieval/signals.py |
./docs/autocapture_mx_implementation_plan.md:85:| MX-ANS-0001 | tests/test_citation_validation.py; tests/test_verifier_enforced.py; tests/test_conflict_reporting.py | autocapture/memory/answer_orchestrator.py; autocapture/memory/citations.py; autocapture/memory/verifier.py; autocapture/memory/conflict.py |
./docs/autocapture_mx_implementation_plan.md:86:| MX-GATEWAY-0001 | tests/test_gateway_schema_enforced.py; tests/test_gateway_policy_block_cloud_default.py | autocapture/gateway/app.py; autocapture/gateway/router.py; autocapture/gateway/schemas.py |
./docs/autocapture_mx_implementation_plan.md:87:| MX-UX-0001 | python_import autocapture.ux.facade:UXFacade; tests/test_ux_facade_parity.py | autocapture/ux/facade.py; autocapture/ux/models.py |
./docs/autocapture_mx_implementation_plan.md:88:| MX-SETTINGS-0001 | tests/test_settings_preview_tokens.py; http_endpoint GET /api/settings/schema | autocapture/ux/settings_schema.py; autocapture/ux/preview_tokens.py; autocapture/web/routes/settings.py |
./docs/autocapture_mx_implementation_plan.md:89:| MX-WEB-0001 | http_endpoint GET /api/health; POST /api/query | autocapture/web/api.py; autocapture/web/routes/query.py; autocapture/web/routes/citations.py; autocapture/web/routes/plugins.py; autocapture/web/routes/health.py; autocapture/web/routes/metrics.py |
./docs/autocapture_mx_implementation_plan.md:90:| MX-CIT-OVERLAY-0001 | tests/test_citation_overlay_contract.py | autocapture/web/routes/citations.py |
./docs/autocapture_mx_implementation_plan.md:91:| MX-DOCTOR-0001 | tests/test_doctor_report_schema.py | autocapture/ux/models.py; autocapture/web/routes/health.py |
./docs/autocapture_mx_implementation_plan.md:92:| MX-OBS-0001 | tests/test_metrics_endpoint_exposes_counters.py | autocapture/web/routes/metrics.py |
./docs/autocapture_mx_implementation_plan.md:93:| MX-EXPORT-0001 | tests/test_export_import_roundtrip.py | autocapture/storage/archive.py |
./docs/autocapture_mx_implementation_plan.md:94:| MX-VENDOR-0001 | tests/test_vendor_binaries_hashcheck.py | autocapture/tools/vendor_windows_binaries.py |
./docs/autocapture_mx_implementation_plan.md:95:| MX-PROMPTOPS-0001 | tests/test_promptops_validation.py | autocapture/promptops/propose.py; autocapture/promptops/validate.py; autocapture/promptops/evaluate.py; autocapture/promptops/patch.py; autocapture/promptops/github.py |
./docs/autocapture_mx_implementation_plan.md:96:| MX-TRAIN-0001 | tests/test_training_manifest_schema.py | autocapture/training/pipelines.py; autocapture/training/lora.py; autocapture/training/dpo.py; autocapture/training/datasets.py |
./docs/autocapture_mx_implementation_plan.md:97:| MX-RESEARCH-0001 | tests/test_research_scout_cache.py | autocapture/research/scout.py; autocapture/research/cache.py; autocapture/research/diff.py |
./docs/autocapture_mx_implementation_plan.md:98:| MX-GATE-0001 | autocapture codex pillar-gates | autocapture/tools/pillar_gate.py; autocapture/tools/privacy_scanner.py; autocapture/tools/provenance_gate.py; autocapture/tools/coverage_gate.py; autocapture/tools/latency_gate.py; autocapture/tools/retrieval_sensitivity.py; autocapture/tools/conflict_gate.py; autocapture/tools/integrity_gate.py |
./docs/autocapture_mx_implementation_plan.md:99:| MX-CODEX-0001 | autocapture codex validate --json | autocapture/codex/cli.py; autocapture/codex/spec.py; autocapture/codex/validators.py; autocapture/codex/report.py |
./docs/autocapture_mx_implementation_plan.md:104:- Artifacts: autocapture/config/models.py; autocapture/config/load.py; autocapture/config/defaults.py
./docs/autocapture_mx_implementation_plan.md:105:- Validation: python_import autocapture.config.load:load_config; unit_test tests/test_config_defaults.py
./docs/autocapture_mx_implementation_plan.md:109:- Artifacts: autocapture/ux/facade.py; autocapture/web/api.py
./docs/autocapture_mx_implementation_plan.md:110:- Validation: cli_output_regex_absent (autocapture --help); http_routes_absent (/api/delete|/api/purge|/api/wipe)
./docs/autocapture_mx_implementation_plan.md:114:- Artifacts: autocapture/core/hashing.py; autocapture/core/ids.py; autocapture/core/jsonschema.py
./docs/autocapture_mx_implementation_plan.md:119:- Artifacts: autocapture/plugins/manifest.py; autocapture/plugins/manager.py; autocapture/plugins/kinds.py
./docs/autocapture_mx_implementation_plan.md:120:- Validation: python_import PluginManager + ExtensionManifest; unit_test tests/test_plugin_discovery_no_import.py; cli_json autocapture plugins list --json
./docs/autocapture_mx_implementation_plan.md:124:- Artifacts: autocapture/plugins/kinds.py
./docs/autocapture_mx_implementation_plan.md:129:- Artifacts: autocapture_plugins/
./docs/autocapture_mx_implementation_plan.md:130:- Validation: plugins_have_ids; plugins_have_kinds; cli_exit autocapture plugins verify-defaults
./docs/autocapture_mx_implementation_plan.md:134:- Artifacts: autocapture/plugins/manager.py
./docs/autocapture_mx_implementation_plan.md:139:- Artifacts: autocapture/plugins/manager.py; autocapture/plugins/policy_gate.py
./docs/autocapture_mx_implementation_plan.md:144:- Artifacts: autocapture/plugins/policy_gate.py; autocapture/core/http.py
./docs/autocapture_mx_implementation_plan.md:149:- Artifacts: autocapture/memory/entities.py; autocapture/ux/redaction.py
./docs/autocapture_mx_implementation_plan.md:154:- Artifacts: autocapture/runtime/governor.py; autocapture/runtime/activity.py; autocapture/runtime/scheduler.py; autocapture/runtime/budgets.py
./docs/autocapture_mx_implementation_plan.md:159:- Artifacts: autocapture/runtime/leases.py
./docs/autocapture_mx_implementation_plan.md:164:- Artifacts: autocapture/storage/database.py; autocapture/storage/sqlcipher.py; autocapture/storage/keys.py; autocapture/storage/media_store.py; autocapture/storage/blob_store.py
./docs/autocapture_mx_implementation_plan.md:169:- Artifacts: autocapture/pillars/citable.py; autocapture/core/hashing.py; autocapture/storage/archive.py
./docs/autocapture_mx_implementation_plan.md:170:- Validation: unit_test tests/test_provenance_chain.py; cli_exit autocapture provenance verify
./docs/autocapture_mx_implementation_plan.md:174:- Artifacts: autocapture/rules/ledger.py; autocapture/rules/store.py; autocapture/rules/schema.py; autocapture/rules/cli.py
./docs/autocapture_mx_implementation_plan.md:179:- Artifacts: autocapture/capture/spool.py; autocapture/capture/pipelines.py; autocapture/capture/models.py
./docs/autocapture_mx_implementation_plan.md:180:- Validation: unit_test tests/test_capture_spool_idempotent.py
./docs/autocapture_mx_implementation_plan.md:184:- Artifacts: autocapture/ingest/normalizer.py; autocapture/ingest/spans.py
./docs/autocapture_mx_implementation_plan.md:189:- Artifacts: autocapture/plugins/kinds.py
./docs/autocapture_mx_implementation_plan.md:194:- Artifacts: autocapture/indexing/lexical.py
./docs/autocapture_mx_implementation_plan.md:199:- Artifacts: autocapture/indexing/vector.py
./docs/autocapture_mx_implementation_plan.md:204:- Artifacts: autocapture/indexing/vector.py; autocapture/tools/vendor_windows_binaries.py
./docs/autocapture_mx_implementation_plan.md:209:- Artifacts: autocapture/indexing/graph.py
./docs/autocapture_mx_implementation_plan.md:214:- Artifacts: autocapture/retrieval/tiers.py; autocapture/retrieval/fusion.py; autocapture/retrieval/rerank.py; autocapture/retrieval/signals.py
./docs/autocapture_mx_implementation_plan.md:219:- Artifacts: autocapture/memory/context_pack.py; autocapture/retrieval/signals.py
./docs/autocapture_mx_implementation_plan.md:224:- Artifacts: autocapture/memory/answer_orchestrator.py; autocapture/memory/citations.py; autocapture/memory/verifier.py; autocapture/memory/conflict.py
./docs/autocapture_mx_implementation_plan.md:229:- Artifacts: autocapture/gateway/app.py; autocapture/gateway/router.py; autocapture/gateway/schemas.py
./docs/autocapture_mx_implementation_plan.md:234:- Artifacts: autocapture/ux/facade.py; autocapture/ux/models.py
./docs/autocapture_mx_implementation_plan.md:235:- Validation: python_import autocapture.ux.facade:UXFacade; unit_test tests/test_ux_facade_parity.py
./docs/autocapture_mx_implementation_plan.md:239:- Artifacts: autocapture/ux/settings_schema.py; autocapture/ux/preview_tokens.py; autocapture/web/routes/settings.py
./docs/autocapture_mx_implementation_plan.md:244:- Artifacts: autocapture/web/api.py; autocapture/web/routes/query.py; autocapture/web/routes/citations.py; autocapture/web/routes/plugins.py; autocapture/web/routes/health.py; autocapture/web/routes/metrics.py
./docs/autocapture_mx_implementation_plan.md:249:- Artifacts: autocapture/web/routes/citations.py
./docs/autocapture_mx_implementation_plan.md:254:- Artifacts: autocapture/ux/models.py; autocapture/web/routes/health.py
./docs/autocapture_mx_implementation_plan.md:259:- Artifacts: autocapture/web/routes/metrics.py
./docs/autocapture_mx_implementation_plan.md:264:- Artifacts: autocapture/storage/archive.py
./docs/autocapture_mx_implementation_plan.md:269:- Artifacts: autocapture/tools/vendor_windows_binaries.py
./docs/autocapture_mx_implementation_plan.md:274:- Artifacts: autocapture/promptops/propose.py; validate.py; evaluate.py; patch.py; github.py
./docs/autocapture_mx_implementation_plan.md:279:- Artifacts: autocapture/training/pipelines.py; autocapture/training/lora.py; autocapture/training/dpo.py; autocapture/training/datasets.py
./docs/autocapture_mx_implementation_plan.md:284:- Artifacts: autocapture/research/scout.py; autocapture/research/cache.py; autocapture/research/diff.py
./docs/autocapture_mx_implementation_plan.md:289:- Artifacts: autocapture/tools/pillar_gate.py; autocapture/tools/privacy_scanner.py; autocapture/tools/provenance_gate.py; autocapture/tools/coverage_gate.py; autocapture/tools/latency_gate.py; autocapture/tools/retrieval_sensitivity.py; autocapture/tools/conflict_gate.py; autocapture/tools/integrity_gate.py
./docs/autocapture_mx_implementation_plan.md:290:- Validation: cli_exit autocapture codex pillar-gates
./docs/autocapture_mx_implementation_plan.md:294:- Artifacts: autocapture/codex/cli.py; autocapture/codex/spec.py; autocapture/codex/validators.py; autocapture/codex/report.py
./docs/autocapture_mx_implementation_plan.md:295:- Validation: cli_exit autocapture codex validate --json
./docs/autocapture_mx_implementation_plan.md:300:- Action: Define how `autocapture` CLI will be wired in pyproject.toml (new console script or reuse existing).
./autocapture/capture/__init__.py:5:from .pipelines import CapturePipeline, CaptureEncoder, create_capture_source, create_capture_encoder
./autocapture/capture/__init__.py:12:    "create_capture_source",
./autocapture/capture/__init__.py:13:    "create_capture_encoder",
./autocapture/training/pipelines.py:7:from autocapture.training.datasets import Dataset, dataset_from_items
./autocapture/training/pipelines.py:8:from autocapture.training.dpo import run_dpo
./autocapture/training/pipelines.py:9:from autocapture.training.lora import run_lora
./autocapture/pillars/citable.py:11:from autocapture.core.hashing import canonical_dumps
./autocapture/runtime/scheduler.py:8:from autocapture.runtime.governor import RuntimeGovernor
./docs/autocapture_mx_blueprint.md:1:# Autocapture MX Blueprint (Rock-Solid, Plugin-First, Local-First)
./docs/autocapture_mx_blueprint.md:5:**Target:** Implement a fully feature-complete Autocapture MX superset inside the repository represented by `repomix-output.xml` (referred to below as **NX repo**).  
./docs/autocapture_mx_blueprint.md:6:**Compatibility baseline:** Ninjra Autocapture plugin + policy patterns (manifests, policy gate, retrieval tiering, PromptOps, CI gates), extended and enforced for the Autocapture “4 Pillars”.
./docs/autocapture_mx_blueprint.md:14:### 0.1 Local capture + privacy posture
./docs/autocapture_mx_blueprint.md:17:- **User-visible + user-controlled.** Defaults are capture-all locally; sanitization occurs only on egress.
./docs/autocapture_mx_blueprint.md:48:- **Evidence**: captured artifacts + derived spans that can be cited.
./docs/autocapture_mx_blueprint.md:51:- **Ledger**: append-only, hash-chained provenance log for critical outputs (captures, spans, queries, answers, exports).
./docs/autocapture_mx_blueprint.md:98:/autocapture/
./docs/autocapture_mx_blueprint.md:151:  capture/
./docs/autocapture_mx_blueprint.md:203:      capture.py
./docs/autocapture_mx_blueprint.md:241:/autocapture_plugins/
./docs/autocapture_mx_blueprint.md:251:- `autocapture_plugins/` follows the Ninjra-style manifest convention.
./docs/autocapture_mx_blueprint.md:258:MX implements a strict plugin system compatible with Ninjra’s extension kinds and extends it for capture + runtime governance.
./docs/autocapture_mx_blueprint.md:285:- `capture.source`
./docs/autocapture_mx_blueprint.md:286:- `capture.encoder`
./docs/autocapture_mx_blueprint.md:376:All built-in plugin manifests live in `autocapture_plugins/` and are enabled by default unless blocked
./docs/autocapture_mx_blueprint.md:381:- `mx.core.capture_win`
./docs/autocapture_mx_blueprint.md:382:  - kinds: `capture.source`, `capture.encoder`, `activity.signal`
./docs/autocapture_mx_blueprint.md:428:- `event_id = blake3(capture_hash + ts_bucket + process + window_title)`
./docs/autocapture_mx_blueprint.md:437:- `type` (capture|span|query|answer|export|import|plugin_change|settings_change)
./docs/autocapture_mx_blueprint.md:448:- traceability from answer → citations → spans → captures → blobs.
./docs/autocapture_mx_blueprint.md:476:- `realtime`: capture sources only
./docs/autocapture_mx_blueprint.md:500:### 8.1 Core capture record
./docs/autocapture_mx_blueprint.md:501:A capture record includes:
./docs/autocapture_mx_blueprint.md:502:- `capture_id`
./docs/autocapture_mx_blueprint.md:503:- `captured_at_utc`
./docs/autocapture_mx_blueprint.md:514:Required built-in capture sources:
./docs/autocapture_mx_blueprint.md:517:- Input activity signal (Win32 low-level hooks with minimal metadata; no keystroke text capture)
./docs/autocapture_mx_blueprint.md:519:Optional capture sources (implemented, default off):
./docs/autocapture_mx_blueprint.md:528:- idempotent reprocessing by capture_id.
./docs/autocapture_mx_blueprint.md:841:- `autocapture codex validate`  
./docs/autocapture_mx_blueprint.md:843:- `autocapture codex explain <REQ_ID>`  
./docs/autocapture_mx_blueprint.md:845:- `autocapture codex list`  
./docs/autocapture_mx_blueprint.md:847:- `autocapture codex pillar-gates`  
./docs/autocapture_mx_blueprint.md:871:blueprint_id: autocapture_mx_blueprint_2026_01_25
./docs/autocapture_mx_blueprint.md:879:      - autocapture/config/models.py
./docs/autocapture_mx_blueprint.md:880:      - autocapture/config/load.py
./docs/autocapture_mx_blueprint.md:881:      - autocapture/config/defaults.py
./docs/autocapture_mx_blueprint.md:884:        target: autocapture.config.load:load_config
./docs/autocapture_mx_blueprint.md:893:      - autocapture/ux/facade.py
./docs/autocapture_mx_blueprint.md:894:      - autocapture/web/api.py
./docs/autocapture_mx_blueprint.md:897:        command: ["autocapture", "--help"]
./docs/autocapture_mx_blueprint.md:912:      - autocapture/core/hashing.py
./docs/autocapture_mx_blueprint.md:913:      - autocapture/core/ids.py
./docs/autocapture_mx_blueprint.md:914:      - autocapture/core/jsonschema.py
./docs/autocapture_mx_blueprint.md:925:      - autocapture/plugins/manifest.py
./docs/autocapture_mx_blueprint.md:926:      - autocapture/plugins/manager.py
./docs/autocapture_mx_blueprint.md:927:      - autocapture/plugins/kinds.py
./docs/autocapture_mx_blueprint.md:930:        target: autocapture.plugins.manager:PluginManager
./docs/autocapture_mx_blueprint.md:932:        target: autocapture.plugins.manifest:ExtensionManifest
./docs/autocapture_mx_blueprint.md:936:        command: ["autocapture", "plugins", "list", "--json"]
./docs/autocapture_mx_blueprint.md:944:      - autocapture/plugins/kinds.py
./docs/autocapture_mx_blueprint.md:954:      - autocapture_plugins/
./docs/autocapture_mx_blueprint.md:958:          - mx.core.capture_win
./docs/autocapture_mx_blueprint.md:975:          - capture.source
./docs/autocapture_mx_blueprint.md:976:          - capture.encoder
./docs/autocapture_mx_blueprint.md:1000:        command: ["autocapture", "plugins", "verify-defaults"]
./docs/autocapture_mx_blueprint.md:1007:      - autocapture/plugins/manager.py
./docs/autocapture_mx_blueprint.md:1016:      - autocapture/plugins/manager.py
./docs/autocapture_mx_blueprint.md:1017:      - autocapture/plugins/policy_gate.py
./docs/autocapture_mx_blueprint.md:1026:      - autocapture/plugins/policy_gate.py
./docs/autocapture_mx_blueprint.md:1027:      - autocapture/core/http.py
./docs/autocapture_mx_blueprint.md:1030:        target: autocapture.plugins.policy_gate:PolicyGate
./docs/autocapture_mx_blueprint.md:1038:      - autocapture/memory/entities.py
./docs/autocapture_mx_blueprint.md:1039:      - autocapture/ux/redaction.py
./docs/autocapture_mx_blueprint.md:1050:      - autocapture/runtime/governor.py
./docs/autocapture_mx_blueprint.md:1051:      - autocapture/runtime/activity.py
./docs/autocapture_mx_blueprint.md:1052:      - autocapture/runtime/scheduler.py
./docs/autocapture_mx_blueprint.md:1053:      - autocapture/runtime/budgets.py
./docs/autocapture_mx_blueprint.md:1062:      - autocapture/runtime/leases.py
./docs/autocapture_mx_blueprint.md:1071:      - autocapture/storage/database.py
./docs/autocapture_mx_blueprint.md:1072:      - autocapture/storage/sqlcipher.py
./docs/autocapture_mx_blueprint.md:1073:      - autocapture/storage/keys.py
./docs/autocapture_mx_blueprint.md:1074:      - autocapture/storage/media_store.py
./docs/autocapture_mx_blueprint.md:1075:      - autocapture/storage/blob_store.py
./docs/autocapture_mx_blueprint.md:1088:      - autocapture/pillars/citable.py
./docs/autocapture_mx_blueprint.md:1089:      - autocapture/core/hashing.py
./docs/autocapture_mx_blueprint.md:1090:      - autocapture/storage/archive.py
./docs/autocapture_mx_blueprint.md:1095:        command: ["autocapture", "provenance", "verify"]
./docs/autocapture_mx_blueprint.md:1103:      - autocapture/rules/ledger.py
./docs/autocapture_mx_blueprint.md:1104:      - autocapture/rules/store.py
./docs/autocapture_mx_blueprint.md:1105:      - autocapture/rules/schema.py
./docs/autocapture_mx_blueprint.md:1106:      - autocapture/rules/cli.py
./docs/autocapture_mx_blueprint.md:1117:      - autocapture/capture/spool.py
./docs/autocapture_mx_blueprint.md:1118:      - autocapture/capture/pipelines.py
./docs/autocapture_mx_blueprint.md:1119:      - autocapture/capture/models.py
./docs/autocapture_mx_blueprint.md:1122:        target: tests/test_capture_spool_idempotent.py
./docs/autocapture_mx_blueprint.md:1128:      - autocapture/ingest/normalizer.py
./docs/autocapture_mx_blueprint.md:1129:      - autocapture/ingest/spans.py
./docs/autocapture_mx_blueprint.md:1140:      - autocapture/plugins/kinds.py
./docs/autocapture_mx_blueprint.md:1149:      - autocapture/indexing/lexical.py
./docs/autocapture_mx_blueprint.md:1158:      - autocapture/indexing/vector.py
./docs/autocapture_mx_blueprint.md:1167:      - autocapture/indexing/vector.py
./docs/autocapture_mx_blueprint.md:1168:      - autocapture/tools/vendor_windows_binaries.py
./docs/autocapture_mx_blueprint.md:1177:      - autocapture/indexing/graph.py
./docs/autocapture_mx_blueprint.md:1186:      - autocapture/retrieval/tiers.py
./docs/autocapture_mx_blueprint.md:1187:      - autocapture/retrieval/fusion.py
./docs/autocapture_mx_blueprint.md:1188:      - autocapture/retrieval/rerank.py
./docs/autocapture_mx_blueprint.md:1189:      - autocapture/retrieval/signals.py
./docs/autocapture_mx_blueprint.md:1200:      - autocapture/memory/context_pack.py
./docs/autocapture_mx_blueprint.md:1201:      - autocapture/retrieval/signals.py
./docs/autocapture_mx_blueprint.md:1210:      - autocapture/memory/answer_orchestrator.py
./docs/autocapture_mx_blueprint.md:1211:      - autocapture/memory/citations.py
./docs/autocapture_mx_blueprint.md:1212:      - autocapture/memory/verifier.py
./docs/autocapture_mx_blueprint.md:1213:      - autocapture/memory/conflict.py
./docs/autocapture_mx_blueprint.md:1226:      - autocapture/gateway/app.py
./docs/autocapture_mx_blueprint.md:1227:      - autocapture/gateway/router.py
./docs/autocapture_mx_blueprint.md:1228:      - autocapture/gateway/schemas.py
./docs/autocapture_mx_blueprint.md:1239:      - autocapture/ux/facade.py
./docs/autocapture_mx_blueprint.md:1240:      - autocapture/ux/models.py
./docs/autocapture_mx_blueprint.md:1243:        target: autocapture.ux.facade:UXFacade
./docs/autocapture_mx_blueprint.md:1251:      - autocapture/ux/settings_schema.py
./docs/autocapture_mx_blueprint.md:1252:      - autocapture/ux/preview_tokens.py
./docs/autocapture_mx_blueprint.md:1253:      - autocapture/web/routes/settings.py
./docs/autocapture_mx_blueprint.md:1266:      - autocapture/web/api.py
./docs/autocapture_mx_blueprint.md:1267:      - autocapture/web/routes/query.py
./docs/autocapture_mx_blueprint.md:1268:      - autocapture/web/routes/citations.py
./docs/autocapture_mx_blueprint.md:1269:      - autocapture/web/routes/plugins.py
./docs/autocapture_mx_blueprint.md:1270:      - autocapture/web/routes/health.py
./docs/autocapture_mx_blueprint.md:1271:      - autocapture/web/routes/metrics.py
./docs/autocapture_mx_blueprint.md:1286:      - autocapture/web/routes/citations.py
./docs/autocapture_mx_blueprint.md:1295:      - autocapture/ux/models.py
./docs/autocapture_mx_blueprint.md:1296:      - autocapture/web/routes/health.py
./docs/autocapture_mx_blueprint.md:1305:      - autocapture/web/routes/metrics.py
./docs/autocapture_mx_blueprint.md:1314:      - autocapture/storage/archive.py
./docs/autocapture_mx_blueprint.md:1323:      - autocapture/tools/vendor_windows_binaries.py
./docs/autocapture_mx_blueprint.md:1332:      - autocapture/promptops/propose.py
./docs/autocapture_mx_blueprint.md:1333:      - autocapture/promptops/validate.py
./docs/autocapture_mx_blueprint.md:1334:      - autocapture/promptops/evaluate.py
./docs/autocapture_mx_blueprint.md:1335:      - autocapture/promptops/patch.py
./docs/autocapture_mx_blueprint.md:1336:      - autocapture/promptops/github.py
./docs/autocapture_mx_blueprint.md:1345:      - autocapture/training/pipelines.py
./docs/autocapture_mx_blueprint.md:1346:      - autocapture/training/lora.py
./docs/autocapture_mx_blueprint.md:1347:      - autocapture/training/dpo.py
./docs/autocapture_mx_blueprint.md:1348:      - autocapture/training/datasets.py
./docs/autocapture_mx_blueprint.md:1357:      - autocapture/research/scout.py
./docs/autocapture_mx_blueprint.md:1358:      - autocapture/research/cache.py
./docs/autocapture_mx_blueprint.md:1359:      - autocapture/research/diff.py
./docs/autocapture_mx_blueprint.md:1368:      - autocapture/tools/pillar_gate.py
./docs/autocapture_mx_blueprint.md:1369:      - autocapture/tools/privacy_scanner.py
./docs/autocapture_mx_blueprint.md:1370:      - autocapture/tools/provenance_gate.py
./docs/autocapture_mx_blueprint.md:1371:      - autocapture/tools/coverage_gate.py
./docs/autocapture_mx_blueprint.md:1372:      - autocapture/tools/latency_gate.py
./docs/autocapture_mx_blueprint.md:1373:      - autocapture/tools/retrieval_sensitivity.py
./docs/autocapture_mx_blueprint.md:1374:      - autocapture/tools/conflict_gate.py
./docs/autocapture_mx_blueprint.md:1375:      - autocapture/tools/integrity_gate.py
./docs/autocapture_mx_blueprint.md:1378:        command: ["autocapture", "codex", "pillar-gates"]
./docs/autocapture_mx_blueprint.md:1385:      - autocapture/codex/cli.py
./docs/autocapture_mx_blueprint.md:1386:      - autocapture/codex/spec.py
./docs/autocapture_mx_blueprint.md:1387:      - autocapture/codex/validators.py
./docs/autocapture_mx_blueprint.md:1388:      - autocapture/codex/report.py
./docs/autocapture_mx_blueprint.md:1391:        command: ["autocapture", "codex", "validate", "--json"]
./autocapture/memory/entities.py:11:from autocapture_nx.kernel.crypto import derive_key
./autocapture/memory/entities.py:12:from autocapture_nx.kernel.keyring import KeyRing
./docs/reports/grep_anchor.txt:9:./docs/STATE.md:22:- Keyring + rotation implemented via `autocapture keys rotate` with ledger + anchor entries.
./docs/reports/grep_anchor.txt:14:./docs/blueprints/autocapture_nx_blueprint.md:10:- **P4 Citable**: every non-trivial output must be traceable to immutable evidence with verifiable provenance (hashes, ledger, anchors).
./docs/reports/grep_anchor.txt:15:./docs/blueprints/autocapture_nx_blueprint.md:18:- **Deterministic, verifiable provenance**: hash-chained ledger + anchors + verification CLI.
./docs/reports/grep_anchor.txt:16:./docs/blueprints/autocapture_nx_blueprint.md:37:### Pattern C — Ledger + anchor
./docs/reports/grep_anchor.txt:17:./docs/blueprints/autocapture_nx_blueprint.md:41:- Verification commands recompute chain and validate anchors.
./docs/reports/grep_anchor.txt:18:./docs/blueprints/autocapture_nx_blueprint.md:119:- [ ] **I042** (Phase 4) — [Citation resolver validates hashes/anchors/spans](#i042)
./docs/reports/grep_anchor.txt:19:./docs/blueprints/autocapture_nx_blueprint.md:137:- [ ] **I060** (Phase 6) — [Separate keys by purpose (metadata/media/tokenization/anchor)](#i060)
./docs/reports/grep_anchor.txt:20:./docs/blueprints/autocapture_nx_blueprint.md:139:- [ ] **I062** (Phase 6) — [Add verify commands (ledger/anchors/evidence)](#i062)
./docs/reports/grep_anchor.txt:21:./docs/blueprints/autocapture_nx_blueprint.md:153:- [ ] **I076** (Phase 4) — [Proof bundles export (evidence + ledger slice + anchors)](#i076)
./docs/reports/grep_anchor.txt:22:./docs/blueprints/autocapture_nx_blueprint.md:168:- [ ] **I091** (Phase 0) — [Add golden chain test: ledger verify + anchor verify](#i091)
./docs/reports/grep_anchor.txt:23:./docs/blueprints/autocapture_nx_blueprint.md:172:- [ ] **I095** (Phase 0) — [Doctor validates locks, storage, anchors, and network policy](#i095)
./docs/reports/grep_anchor.txt:24:./docs/blueprints/autocapture_nx_blueprint.md:352:### I091 — Add golden chain test: ledger verify + anchor verify
./docs/reports/grep_anchor.txt:25:./docs/blueprints/autocapture_nx_blueprint.md:357:  - Golden test corpus for ledger chain + anchors
./docs/reports/grep_anchor.txt:26:./docs/blueprints/autocapture_nx_blueprint.md:360:  - Test: produce N entries; verify chain and anchor head deterministically
./docs/reports/grep_anchor.txt:27:./docs/blueprints/autocapture_nx_blueprint.md:363:  - Add deterministic test keys for anchor signing in test env only.
./docs/reports/grep_anchor.txt:28:./docs/blueprints/autocapture_nx_blueprint.md:420:### I095 — Doctor validates locks, storage, anchors, and network policy
./docs/reports/grep_anchor.txt:29:./docs/blueprints/autocapture_nx_blueprint.md:431:  - anchor signing availability, network policy, path resolution.
./docs/reports/grep_anchor.txt:30:./docs/blueprints/autocapture_nx_blueprint.md:1555:  - span_start/end, ledger_head_ref, anchor_ref.
./docs/reports/grep_anchor.txt:31:./docs/blueprints/autocapture_nx_blueprint.md:1560:### I042 — Citation resolver validates hashes/anchors/spans
./docs/reports/grep_anchor.txt:32:./docs/blueprints/autocapture_nx_blueprint.md:1570:  - verify anchor, validate span exists in evidence.
./docs/reports/grep_anchor.txt:33:./docs/blueprints/autocapture_nx_blueprint.md:1641:  - anchor plugin anchors ledger head on schedule
./docs/reports/grep_anchor.txt:34:./docs/blueprints/autocapture_nx_blueprint.md:1643:  - Test: anchors created at configured cadence; verification passes
./docs/reports/grep_anchor.txt:35:./docs/blueprints/autocapture_nx_blueprint.md:1645:  - Anchor cadence: every N entries or M minutes; persist anchor records.
./docs/reports/grep_anchor.txt:36:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_anchor.txt:37:./docs/blueprints/autocapture_nx_blueprint.md:1758:### I076 — Proof bundles export (evidence + ledger slice + anchors)
./docs/reports/grep_anchor.txt:38:./docs/blueprints/autocapture_nx_blueprint.md:1768:  - ledger slice covering them, relevant anchors, and verification reports.
./docs/reports/grep_anchor.txt:39:./docs/blueprints/autocapture_nx_blueprint.md:2127:### I060 — Separate keys by purpose (metadata/media/tokenization/anchor)
./docs/reports/grep_anchor.txt:40:./docs/blueprints/autocapture_nx_blueprint.md:2136:  - Define key namespaces: metadata, media, tokenizer, anchors.
./docs/reports/grep_anchor.txt:41:./docs/blueprints/autocapture_nx_blueprint.md:2147:  - anchor plugin uses HMAC/signature over ledger head
./docs/reports/grep_anchor.txt:42:./docs/blueprints/autocapture_nx_blueprint.md:2149:  - Test: anchor verify fails if anchor modified or wrong key used
./docs/reports/grep_anchor.txt:43:./docs/blueprints/autocapture_nx_blueprint.md:2157:### I062 — Add verify commands (ledger/anchors/evidence)
./docs/reports/grep_anchor.txt:44:./docs/blueprints/autocapture_nx_blueprint.md:2162:  - verify CLI/API: `verify ledger`, `verify anchors`, `verify evidence`
./docs/reports/grep_anchor.txt:45:./docs/blueprints/autocapture_nx_blueprint.md:2166:  - Ledger verify: recompute chain; anchor verify: verify signatures; evidence verify: hash checks.
./docs/reports/grep_anchor.txt:47:./docs/autocapture_nx_blueprint_final.md:71:All pipeline actions are recorded in a hash-chained ledger with periodic anchoring.
./docs/reports/grep_anchor.txt:48:./docs/autocapture_nx_blueprint_final.md:413:### D14 Ledger anchoring in a second trust domain
./docs/reports/grep_anchor.txt:49:./docs/autocapture_nx_blueprint_final.md:430:- Ledger writer + anchor writer + doctor verifier.
./docs/reports/grep_anchor.txt:50:./docs/autocapture_nx_blueprint_final.md:433:- Tamper simulation tests: rewrite DB+ledger but not anchor → detection triggers.
./docs/reports/grep_anchor.txt:51:./docs/autocapture_nx_blueprint_final.md:434:- Gate: citation emission requires ledger+anchor verification.
./docs/reports/grep_anchor.txt:52:./docs/autocapture_nx_blueprint_final.md:449:  - anchor store
./docs/reports/grep_anchor.txt:53:./docs/autocapture_nx_blueprint_final.md:971:### Ledger and anchors
./docs/reports/grep_anchor.txt:54:./docs/autocapture_nx_blueprint_final.md:974:- Anchor store records periodic `(ts_utc, ledger_head_hash, anchor_seq)` entries in a second domain.
./docs/reports/grep_anchor.txt:55:./docs/autocapture_nx_blueprint_final.md:976:Windows anchor implementation options (choose one):
./docs/reports/grep_anchor.txt:56:./docs/autocapture_nx_blueprint_final.md:977:- DPAPI-protected registry value with monotonic `anchor_seq`
./docs/reports/grep_anchor.txt:57:./docs/autocapture_nx_blueprint_final.md:993:- Integrity and anchor verification tests.
./docs/reports/grep_anchor.txt:58:./docs/autocapture_nx_blueprint_final.md:1019:- Rotation events are recorded in the ledger and anchored.
./docs/reports/grep_anchor.txt:59:./docs/autocapture_nx_blueprint_final.md:1060:- ledger integrity + anchor verification
./docs/reports/grep_anchor.txt:60:./docs/autocapture_nx_blueprint_final.md:1151:- anchor verification
./docs/reports/grep_anchor.txt:74:./docs/reports/grep_ledger.txt:31:./docs/STATE.md:22:- Keyring + rotation implemented via `autocapture keys rotate` with ledger + anchor entries.
./docs/reports/grep_anchor.txt:75:./docs/reports/grep_ledger.txt:37:./plugins/builtin/capture_windows/plugin.py:64:                if not self._check_disk(logger, journal, ledger, anchor, warn_free, critical_free):
./docs/reports/grep_anchor.txt:76:./docs/reports/grep_ledger.txt:38:./plugins/builtin/capture_windows/plugin.py:67:                self._flush_segment(frames, storage_media, storage_meta, journal, ledger, anchor, sequence)
./docs/reports/grep_anchor.txt:77:./docs/reports/grep_ledger.txt:39:./plugins/builtin/capture_windows/plugin.py:76:    def _flush_segment(self, frames, storage_media, storage_meta, journal, ledger, anchor, sequence):
./docs/reports/grep_anchor.txt:78:./docs/reports/grep_ledger.txt:41:./plugins/builtin/capture_windows/plugin.py:118:        anchor.anchor(ledger_hash)
./docs/reports/grep_anchor.txt:79:./docs/reports/grep_ledger.txt:42:./plugins/builtin/capture_windows/plugin.py:120:    def _check_disk(self, logger, journal, ledger, anchor, warn_free, critical_free) -> bool:
./docs/reports/grep_anchor.txt:80:./docs/reports/grep_ledger.txt:44:./plugins/builtin/capture_windows/plugin.py:153:            anchor.anchor(ledger_hash)
./docs/reports/grep_anchor.txt:85:./docs/reports/grep_ledger.txt:86:./docs/blueprints/autocapture_nx_blueprint.md:10:- **P4 Citable**: every non-trivial output must be traceable to immutable evidence with verifiable provenance (hashes, ledger, anchors).
./docs/reports/grep_anchor.txt:86:./docs/reports/grep_ledger.txt:87:./docs/blueprints/autocapture_nx_blueprint.md:18:- **Deterministic, verifiable provenance**: hash-chained ledger + anchors + verification CLI.
./docs/reports/grep_anchor.txt:87:./docs/reports/grep_ledger.txt:92:./docs/blueprints/autocapture_nx_blueprint.md:139:- [ ] **I062** (Phase 6) — [Add verify commands (ledger/anchors/evidence)](#i062)
./docs/reports/grep_anchor.txt:88:./docs/reports/grep_ledger.txt:94:./docs/blueprints/autocapture_nx_blueprint.md:153:- [ ] **I076** (Phase 4) — [Proof bundles export (evidence + ledger slice + anchors)](#i076)
./docs/reports/grep_anchor.txt:89:./docs/reports/grep_ledger.txt:97:./docs/blueprints/autocapture_nx_blueprint.md:168:- [ ] **I091** (Phase 0) — [Add golden chain test: ledger verify + anchor verify](#i091)
./docs/reports/grep_anchor.txt:90:./docs/reports/grep_ledger.txt:106:./docs/blueprints/autocapture_nx_blueprint.md:352:### I091 — Add golden chain test: ledger verify + anchor verify
./docs/reports/grep_anchor.txt:91:./docs/reports/grep_ledger.txt:107:./docs/blueprints/autocapture_nx_blueprint.md:357:  - Golden test corpus for ledger chain + anchors
./docs/reports/grep_anchor.txt:92:./docs/reports/grep_ledger.txt:139:./docs/blueprints/autocapture_nx_blueprint.md:1555:  - span_start/end, ledger_head_ref, anchor_ref.
./docs/reports/grep_anchor.txt:93:./docs/reports/grep_ledger.txt:143:./docs/blueprints/autocapture_nx_blueprint.md:1641:  - anchor plugin anchors ledger head on schedule
./docs/reports/grep_anchor.txt:94:./docs/reports/grep_ledger.txt:146:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_anchor.txt:95:./docs/reports/grep_ledger.txt:148:./docs/blueprints/autocapture_nx_blueprint.md:1758:### I076 — Proof bundles export (evidence + ledger slice + anchors)
./docs/reports/grep_anchor.txt:96:./docs/reports/grep_ledger.txt:149:./docs/blueprints/autocapture_nx_blueprint.md:1768:  - ledger slice covering them, relevant anchors, and verification reports.
./docs/reports/grep_anchor.txt:97:./docs/reports/grep_ledger.txt:154:./docs/blueprints/autocapture_nx_blueprint.md:2147:  - anchor plugin uses HMAC/signature over ledger head
./docs/reports/grep_anchor.txt:98:./docs/reports/grep_ledger.txt:156:./docs/blueprints/autocapture_nx_blueprint.md:2157:### I062 — Add verify commands (ledger/anchors/evidence)
./docs/reports/grep_anchor.txt:99:./docs/reports/grep_ledger.txt:157:./docs/blueprints/autocapture_nx_blueprint.md:2162:  - verify CLI/API: `verify ledger`, `verify anchors`, `verify evidence`
./docs/reports/grep_anchor.txt:100:./docs/reports/grep_ledger.txt:165:./docs/autocapture_nx_blueprint_final.md:71:All pipeline actions are recorded in a hash-chained ledger with periodic anchoring.
./docs/reports/grep_anchor.txt:101:./docs/reports/grep_ledger.txt:174:./docs/autocapture_nx_blueprint_final.md:433:- Tamper simulation tests: rewrite DB+ledger but not anchor → detection triggers.
./docs/reports/grep_anchor.txt:102:./docs/reports/grep_ledger.txt:175:./docs/autocapture_nx_blueprint_final.md:434:- Gate: citation emission requires ledger+anchor verification.
./docs/reports/grep_anchor.txt:103:./docs/reports/grep_ledger.txt:180:./docs/autocapture_nx_blueprint_final.md:974:- Anchor store records periodic `(ts_utc, ledger_head_hash, anchor_seq)` entries in a second domain.
./docs/reports/grep_anchor.txt:104:./docs/reports/grep_ledger.txt:181:./docs/autocapture_nx_blueprint_final.md:1019:- Rotation events are recorded in the ledger and anchored.
./docs/reports/grep_anchor.txt:105:./docs/reports/grep_ledger.txt:183:./docs/autocapture_nx_blueprint_final.md:1060:- ledger integrity + anchor verification
./docs/reports/grep_anchor.txt:110:./docs/reports/grep_ledger.txt:252:./autocapture_nx/kernel/key_rotation.py:47:    anchor.anchor(ledger_hash)
./docs/reports/grep_anchor.txt:119:./docs/reports/grep_journal.txt:75:./docs/reports/grep_ledger.txt:37:./plugins/builtin/capture_windows/plugin.py:64:                if not self._check_disk(logger, journal, ledger, anchor, warn_free, critical_free):
./docs/reports/grep_anchor.txt:120:./docs/reports/grep_journal.txt:76:./docs/reports/grep_ledger.txt:38:./plugins/builtin/capture_windows/plugin.py:67:                self._flush_segment(frames, storage_media, storage_meta, journal, ledger, anchor, sequence)
./docs/reports/grep_anchor.txt:121:./docs/reports/grep_journal.txt:77:./docs/reports/grep_ledger.txt:39:./plugins/builtin/capture_windows/plugin.py:76:    def _flush_segment(self, frames, storage_media, storage_meta, journal, ledger, anchor, sequence):
./docs/reports/grep_anchor.txt:122:./docs/reports/grep_journal.txt:78:./docs/reports/grep_ledger.txt:42:./plugins/builtin/capture_windows/plugin.py:120:    def _check_disk(self, logger, journal, ledger, anchor, warn_free, critical_free) -> bool:
./docs/reports/grep_anchor.txt:123:./docs/reports/grep_journal.txt:123:./plugins/builtin/capture_windows/plugin.py:64:                if not self._check_disk(logger, journal, ledger, anchor, warn_free, critical_free):
./docs/reports/grep_anchor.txt:124:./docs/reports/grep_journal.txt:124:./plugins/builtin/capture_windows/plugin.py:67:                self._flush_segment(frames, storage_media, storage_meta, journal, ledger, anchor, sequence)
./docs/reports/grep_anchor.txt:125:./docs/reports/grep_journal.txt:125:./plugins/builtin/capture_windows/plugin.py:76:    def _flush_segment(self, frames, storage_media, storage_meta, journal, ledger, anchor, sequence):
./docs/reports/grep_anchor.txt:126:./docs/reports/grep_journal.txt:127:./plugins/builtin/capture_windows/plugin.py:120:    def _check_disk(self, logger, journal, ledger, anchor, warn_free, critical_free) -> bool:
./docs/reports/grep_anchor.txt:127:./docs/reports/grep_evidence.txt:52:./docs/blueprints/autocapture_nx_blueprint.md:10:- **P4 Citable**: every non-trivial output must be traceable to immutable evidence with verifiable provenance (hashes, ledger, anchors).
./docs/reports/grep_anchor.txt:128:./docs/reports/grep_evidence.txt:60:./docs/blueprints/autocapture_nx_blueprint.md:139:- [ ] **I062** (Phase 6) — [Add verify commands (ledger/anchors/evidence)](#i062)
./docs/reports/grep_anchor.txt:129:./docs/reports/grep_evidence.txt:62:./docs/blueprints/autocapture_nx_blueprint.md:153:- [ ] **I076** (Phase 4) — [Proof bundles export (evidence + ledger slice + anchors)](#i076)
./docs/reports/grep_anchor.txt:130:./docs/reports/grep_evidence.txt:96:./docs/blueprints/autocapture_nx_blueprint.md:1570:  - verify anchor, validate span exists in evidence.
./docs/reports/grep_anchor.txt:131:./docs/reports/grep_evidence.txt:107:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_anchor.txt:132:./docs/reports/grep_evidence.txt:110:./docs/blueprints/autocapture_nx_blueprint.md:1758:### I076 — Proof bundles export (evidence + ledger slice + anchors)
./docs/reports/grep_anchor.txt:133:./docs/reports/grep_evidence.txt:114:./docs/blueprints/autocapture_nx_blueprint.md:2157:### I062 — Add verify commands (ledger/anchors/evidence)
./docs/reports/grep_anchor.txt:134:./docs/reports/grep_evidence.txt:115:./docs/blueprints/autocapture_nx_blueprint.md:2162:  - verify CLI/API: `verify ledger`, `verify anchors`, `verify evidence`
./docs/reports/grep_anchor.txt:135:./docs/reports/grep_evidence.txt:116:./docs/blueprints/autocapture_nx_blueprint.md:2166:  - Ledger verify: recompute chain; anchor verify: verify signatures; evidence verify: hash checks.
./docs/reports/grep_anchor.txt:140:./docs/reports/grep_evidence.txt:131:./docs/reports/grep_ledger.txt:86:./docs/blueprints/autocapture_nx_blueprint.md:10:- **P4 Citable**: every non-trivial output must be traceable to immutable evidence with verifiable provenance (hashes, ledger, anchors).
./docs/reports/grep_anchor.txt:141:./docs/reports/grep_evidence.txt:132:./docs/reports/grep_ledger.txt:92:./docs/blueprints/autocapture_nx_blueprint.md:139:- [ ] **I062** (Phase 6) — [Add verify commands (ledger/anchors/evidence)](#i062)
./docs/reports/grep_anchor.txt:142:./docs/reports/grep_evidence.txt:133:./docs/reports/grep_ledger.txt:94:./docs/blueprints/autocapture_nx_blueprint.md:153:- [ ] **I076** (Phase 4) — [Proof bundles export (evidence + ledger slice + anchors)](#i076)
./docs/reports/grep_anchor.txt:143:./docs/reports/grep_evidence.txt:137:./docs/reports/grep_ledger.txt:146:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_anchor.txt:144:./docs/reports/grep_evidence.txt:138:./docs/reports/grep_ledger.txt:148:./docs/blueprints/autocapture_nx_blueprint.md:1758:### I076 — Proof bundles export (evidence + ledger slice + anchors)
./docs/reports/grep_anchor.txt:145:./docs/reports/grep_evidence.txt:140:./docs/reports/grep_ledger.txt:156:./docs/blueprints/autocapture_nx_blueprint.md:2157:### I062 — Add verify commands (ledger/anchors/evidence)
./docs/reports/grep_anchor.txt:146:./docs/reports/grep_evidence.txt:141:./docs/reports/grep_ledger.txt:157:./docs/blueprints/autocapture_nx_blueprint.md:2162:  - verify CLI/API: `verify ledger`, `verify anchors`, `verify evidence`
./docs/reports/grep_anchor.txt:153:./docs/reports/grep_citation.txt:159:./docs/autocapture_nx_blueprint_final.md:434:- Gate: citation emission requires ledger+anchor verification.
./docs/reports/grep_anchor.txt:154:./docs/reports/grep_citation.txt:213:./docs/reports/grep_ledger.txt:146:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_anchor.txt:155:./docs/reports/grep_citation.txt:214:./docs/reports/grep_ledger.txt:175:./docs/autocapture_nx_blueprint_final.md:434:- Gate: citation emission requires ledger+anchor verification.
./docs/reports/grep_anchor.txt:159:./docs/reports/grep_citation.txt:255:./docs/reports/grep_evidence.txt:107:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_anchor.txt:161:./docs/reports/grep_citation.txt:260:./docs/reports/grep_evidence.txt:137:./docs/reports/grep_ledger.txt:146:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_anchor.txt:163:./docs/reports/grep_citation.txt:278:./docs/blueprints/autocapture_nx_blueprint.md:1671:  - citation schema: include evidence hash + ledger/anchor refs
./docs/reports/grep_anchor.txt:165:./docs/reports/grep_canonical_json.txt:41:./plugins/builtin/anchor_basic/plugin.py:10:from autocapture_nx.kernel.canonical_json import dumps
./docs/reports/grep_anchor.txt:173:./plugins/builtin/capture_windows/plugin.py:50:        anchor = self.context.get_capability("anchor.writer")
./docs/reports/grep_anchor.txt:174:./plugins/builtin/capture_windows/plugin.py:64:                if not self._check_disk(logger, journal, ledger, anchor, warn_free, critical_free):
./docs/reports/grep_anchor.txt:175:./plugins/builtin/capture_windows/plugin.py:67:                self._flush_segment(frames, storage_media, storage_meta, journal, ledger, anchor, sequence)
./docs/reports/grep_anchor.txt:176:./plugins/builtin/capture_windows/plugin.py:76:    def _flush_segment(self, frames, storage_media, storage_meta, journal, ledger, anchor, sequence):
./docs/reports/grep_anchor.txt:177:./plugins/builtin/capture_windows/plugin.py:118:        anchor.anchor(ledger_hash)
./docs/reports/grep_anchor.txt:178:./plugins/builtin/capture_windows/plugin.py:120:    def _check_disk(self, logger, journal, ledger, anchor, warn_free, critical_free) -> bool:
./docs/reports/grep_anchor.txt:179:./plugins/builtin/capture_windows/plugin.py:153:            anchor.anchor(ledger_hash)
./docs/reports/grep_anchor.txt:180:./plugins/builtin/capture_windows/plugin.json:26:    "builtin.anchor.basic",
./docs/reports/grep_anchor.txt:189:./autocapture_nx/kernel/loader.py:97:        anchor_cfg = config.get("storage", {}).get("anchor", {})
./docs/reports/grep_anchor.txt:190:./autocapture_nx/kernel/loader.py:98:        anchor_path = anchor_cfg.get("path")
./docs/reports/grep_anchor.txt:191:./autocapture_nx/kernel/loader.py:99:        if anchor_path:
./docs/reports/grep_anchor.txt:192:./autocapture_nx/kernel/loader.py:101:            anchor_abs = Path(anchor_path).resolve()
./docs/reports/grep_anchor.txt:193:./autocapture_nx/kernel/loader.py:103:                anchor_abs.relative_to(data_dir)
./docs/reports/grep_anchor.txt:194:./autocapture_nx/kernel/loader.py:109:                    name="anchor_separate_domain",
./docs/reports/grep_anchor.txt:195:./autocapture_nx/kernel/loader.py:111:                    detail="anchor store separate from data_dir" if ok else "anchor path within data_dir",
./docs/reports/grep_anchor.txt:203:./autocapture_nx/kernel/key_rotation.py:46:    anchor = system.get("anchor.writer")
./docs/reports/grep_anchor.txt:204:./autocapture_nx/kernel/key_rotation.py:47:    anchor.anchor(ledger_hash)
./autocapture/capture/spool.py:8:from autocapture.capture.models import CaptureSegment
./autocapture/training/lora.py:12:from autocapture.core.hashing import hash_canonical
./autocapture/training/lora.py:13:from autocapture.training.datasets import Dataset
./docs/assumptions_checklist.md:7:Pillars (from `docs/autocapture_mx_blueprint.md`):
./docs/assumptions_checklist.md:19:1) Desktop Duplication + NVENC capture backend not implemented; Windows capture uses mss + JPEG fallback.
./docs/assumptions_checklist.md:22:   - Current state: capture uses `plugins/builtin/capture_windows/plugin.py` + `autocapture_nx/windows/win_capture.py` (mss + JPEG)
./docs/assumptions_checklist.md:25:     - Add capture backend selection in config to honor `capture.video.backend`.
./docs/assumptions_checklist.md:26:     - Add Windows integration benchmarks for capture throughput and encoding quality.
./docs/assumptions_checklist.md:46:   - Current state: `autocapture_nx/kernel/key_rotation.py` + CLI `autocapture keys rotate`.
./docs/assumptions_checklist.md:87:7) Windows capture/audio/input plugins rely on optional third-party dependencies.
./docs/assumptions_checklist.md:172:- YAML parsing decision without new deps. `docs/autocapture_mx_implementation_plan.md:240`
./docs/assumptions_checklist.md:173:- CLI wiring in `pyproject.toml` (new console script vs reuse). `docs/autocapture_mx_implementation_plan.md:241`
./docs/assumptions_checklist.md:174:- Windows-only functionality safely skipped or mocked in tests. `docs/autocapture_mx_implementation_plan.md:242`
./docs/assumptions_checklist.md:177:- Spec placeholder file with `[MISSING_VALUE]` entries. `docs/spec/README.md:5` + `docs/spec/autocapture_nx_blueprint_2026-01-24.md`.
./docs/assumptions_checklist.md:180:- Capture stub raises `NotImplementedError`. `plugins/builtin/capture_stub/plugin.py:17-18`
./docs/assumptions_checklist.md:189:- MX implementation plan explicitly permits placeholder citation overlay images. `docs/autocapture_mx_implementation_plan.md:192`
./autocapture/core/http.py:15:from autocapture.plugins.policy_gate import PolicyGate, PolicyError
./autocapture/capture/pipelines.py:8:from autocapture.capture.models import CaptureSegment
./autocapture/capture/pipelines.py:9:from autocapture.capture.spool import CaptureSpool
./autocapture/capture/pipelines.py:10:from autocapture.core.ids import stable_id
./autocapture/capture/pipelines.py:11:from autocapture.storage.blob_store import BlobStore
./autocapture/capture/pipelines.py:12:from autocapture.storage.keys import load_keyring
./autocapture/capture/pipelines.py:13:from autocapture.config.defaults import default_config_paths
./autocapture/capture/pipelines.py:14:from autocapture.config.load import load_config
./autocapture/capture/pipelines.py:28:    def capture_bytes(self, payload: bytes, metadata: dict[str, Any] | None = None) -> CaptureSegment:
./autocapture/capture/pipelines.py:33:        segment_id = stable_id("capture.segment", {"ts_utc": ts_utc, "blob_id": blob_id})
./autocapture/capture/pipelines.py:39:def create_capture_source(plugin_id: str) -> CapturePipeline:
./autocapture/capture/pipelines.py:49:def create_capture_encoder(plugin_id: str) -> CaptureEncoder:
./autocapture/core/errors.py:6:class AutocaptureError(RuntimeError):
./autocapture/core/errors.py:10:class ConfigError(AutocaptureError):
./autocapture/core/errors.py:14:class SchemaValidationError(AutocaptureError):
./docs/reports/blueprint_items.md:3:Source: `docs/blueprints/autocapture_nx_blueprint.md`
./docs/reports/blueprint_items.md:15:| I092 | Phase 0: Scaffolding and gates | Add performance regression tests (capture latency/memory/query latency) |  |  |  |
./docs/reports/blueprint_items.md:21:| I002 | Phase 1: Correctness + immutability blockers | Make backpressure actually affect capture rate |  |  |  |
./docs/reports/blueprint_items.md:31:| I012 | Phase 1: Correctness + immutability blockers | Align default config with implemented capture backend |  |  |  |
./docs/reports/blueprint_items.md:43:| I016 | Phase 2: Capture pipeline refactor | Split capture into grab → encode/pack → encrypt/write pipeline |  |  |  |
./docs/reports/blueprint_items.md:46:| I019 | Phase 2: Capture pipeline refactor | Add GPU-accelerated capture/encode backend (NVENC/DD) |  |  |  |
./docs/reports/blueprint_items.md:48:| I021 | Phase 2: Capture pipeline refactor | Record capture parameters per segment |  |  |  |
./docs/reports/blueprint_items.md:51:| I024 | Phase 2: Capture pipeline refactor | Disk pressure degrades capture quality before stopping |  |  |  |
./docs/reports/blueprint_items.md:56:| I109 | Phase 2: Capture pipeline refactor | Add WASAPI loopback option for system audio capture |  |  |  |
./docs/reports/blueprint_items.md:60:| I113 | Phase 2: Capture pipeline refactor | Optional cursor position+shape capture |  |  |  |
./docs/reports/blueprint_items.md:134:| I114 | Phase 8: Optional expansion plugins | Clipboard capture plugin (local-only, append-only) |  |  |  |
./docs/reports/blueprint_items.md:135:| I115 | Phase 8: Optional expansion plugins | File activity capture plugin (USN journal / watcher) |  |  |  |
./autocapture/memory/answer_orchestrator.py:7:from autocapture.memory.verifier import Verifier
./autocapture/memory/answer_orchestrator.py:8:from autocapture.memory.conflict import detect_conflicts
./autocapture/memory/answer_orchestrator.py:52:    from autocapture.config.defaults import default_config_paths
./autocapture/memory/answer_orchestrator.py:53:    from autocapture.config.load import load_config
./autocapture/training/dpo.py:12:from autocapture.core.hashing import hash_canonical
./autocapture/training/dpo.py:13:from autocapture.training.datasets import Dataset
./docs/assumptions.md:3:1) Desktop Duplication + NVENC capture backend is not implemented; Windows capture uses mss + JPEG fallback.
./docs/assumptions.md:11:3) Key rotation is user-invoked via `autocapture keys rotate` and assumed to run during IDLE_DRAIN or explicit user intent.
./docs/assumptions.md:27:7) Windows capture/audio/input plugins rely on optional third-party dependencies (mss, Pillow, pynput, sounddevice, pytesseract, transformers, sentence-transformers).
./autocapture/runtime/governor.py:44:    from autocapture.config.defaults import default_config_paths
./autocapture/runtime/governor.py:45:    from autocapture.config.load import load_config
./plugins/builtin/devtools_ast_ir/plugin.py:14:from autocapture_nx.kernel.canonical_json import dumps
./plugins/builtin/devtools_ast_ir/plugin.py:15:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/devtools_ast_ir/plugin.py:75:    def run(self, scan_root: str = "autocapture_nx") -> dict[str, Any]:
./docs/reports/baseline_repo_state.txt:5:/mnt/d/projects/autocapture_prime
./docs/reports/baseline_repo_state.txt:12:d408cfe Merge pull request #3 from ninjra/autocaptureprime/mx-replace
./autocapture/training/datasets.py:10:from autocapture.core.hashing import hash_canonical
./autocapture_nx/cli.py:1:"""Command line interface for Autocapture NX."""
./autocapture_nx/cli.py:9:from autocapture_nx.kernel.config import (
./autocapture_nx/cli.py:15:from autocapture_nx.kernel.errors import AutocaptureError
./autocapture_nx/cli.py:16:from autocapture_nx.kernel.loader import Kernel, default_config_paths
./autocapture_nx/cli.py:17:from autocapture_nx.kernel.key_rotation import rotate_keys
./autocapture_nx/cli.py:18:from autocapture_nx.kernel.query import run_query
./autocapture_nx/cli.py:19:from autocapture_nx.plugin_system.registry import PluginRegistry
./autocapture_nx/cli.py:79:    from autocapture.plugins.manager import PluginManager
./autocapture_nx/cli.py:104:    from autocapture.codex.validators import _validator_plugins_have_ids, _validator_plugins_have_kinds
./autocapture_nx/cli.py:105:    from autocapture.codex.spec import ValidatorSpec
./autocapture_nx/cli.py:111:                "mx.core.capture_win",
./autocapture_nx/cli.py:133:                "capture.source",
./autocapture_nx/cli.py:134:                "capture.encoder",
./autocapture_nx/cli.py:171:    capture = system.get("capture.source")
./autocapture_nx/cli.py:172:    audio = system.get("capture.audio")
./autocapture_nx/cli.py:175:    capture.start()
./autocapture_nx/cli.py:185:        capture.stop()
./autocapture_nx/cli.py:229:    from autocapture.config.defaults import default_config_paths
./autocapture_nx/cli.py:230:    from autocapture.config.load import load_config
./autocapture_nx/cli.py:231:    from autocapture.pillars.citable import verify_ledger
./autocapture_nx/cli.py:253:    from autocapture.codex.cli import main as codex_main
./autocapture_nx/cli.py:259:    parser = argparse.ArgumentParser(prog="autocapture")
./autocapture_nx/cli.py:301:    ast_ir.add_argument("--scan-root", default="autocapture_nx")
./autocapture_nx/cli.py:327:    except AutocaptureError as exc:
./autocapture_nx/plugin_system/host_runner.py:10:from autocapture_nx.plugin_system.api import PluginContext
./autocapture_nx/plugin_system/host_runner.py:11:from autocapture_nx.plugin_system.runtime import network_guard
./plugins/builtin/backpressure_basic/plugin.py:8:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/backpressure_basic/plugin.py:17:        return {"capture.backpressure": self}
./plugins/builtin/answer_basic/plugin.py:7:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/capture_windows/plugin.py:1:"""Windows screen capture plugin using mss + Pillow."""
./plugins/builtin/capture_windows/plugin.py:12:from autocapture_nx.kernel.canonical_json import dumps
./plugins/builtin/capture_windows/plugin.py:13:from autocapture_nx.kernel.hashing import sha256_text
./plugins/builtin/capture_windows/plugin.py:14:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/capture_windows/plugin.py:15:from autocapture_nx.windows.win_capture import iter_screenshots
./plugins/builtin/capture_windows/plugin.py:25:        return {"capture.source": self}
./plugins/builtin/capture_windows/plugin.py:40:        capture_cfg = self.context.config.get("capture", {}).get("video", {})
./plugins/builtin/capture_windows/plugin.py:41:        fps = int(capture_cfg.get("fps_target", 30))
./plugins/builtin/capture_windows/plugin.py:42:        segment_seconds = int(capture_cfg.get("segment_seconds", 60))
./plugins/builtin/capture_windows/plugin.py:51:        backpressure = self.context.get_capability("capture.backpressure")
./plugins/builtin/capture_windows/plugin.py:102:                "event_type": "capture.segment",
./plugins/builtin/capture_windows/plugin.py:111:                "stage": "capture",
./autocapture_nx/plugin_system/host.py:14:from autocapture_nx.kernel.errors import PermissionError, PluginError
./autocapture_nx/plugin_system/host.py:15:from autocapture_nx.windows.win_sandbox import assign_job_object
./autocapture_nx/plugin_system/host.py:64:                "autocapture_nx.plugin_system.host_runner",
./autocapture_nx/plugin_system/runtime.py:8:from autocapture_nx.kernel.errors import PermissionError
./autocapture_nx/kernel/system.py:8:from autocapture_nx.plugin_system.registry import CapabilityRegistry, LoadedPlugin
./autocapture_nx/kernel/errors.py:4:class AutocaptureError(Exception):
./autocapture_nx/kernel/errors.py:5:    """Base error for Autocapture NX."""
./autocapture_nx/kernel/errors.py:8:class ConfigError(AutocaptureError):
./autocapture_nx/kernel/errors.py:12:class PluginError(AutocaptureError):
./autocapture_nx/kernel/errors.py:16:class PermissionError(AutocaptureError):
./autocapture_nx/kernel/errors.py:20:class SafeModeError(AutocaptureError):
./autocapture_nx/kernel/errors.py:24:class NetworkDisabledError(AutocaptureError):
./autocapture/config/load.py:10:from autocapture.core.errors import ConfigError
./autocapture/config/load.py:11:from autocapture.core.jsonschema import validate_schema
./autocapture/storage/sqlcipher.py:8:from autocapture.storage.database import EncryptedMetadataStore
./autocapture/storage/sqlcipher.py:9:from autocapture.storage.keys import load_keyring
./plugins/builtin/backpressure_basic/plugin.json:7:      "kind": "capture.backpressure",
./autocapture/rules/store.py:7:from autocapture.rules.ledger import RulesLedger
./plugins/builtin/citation_basic/plugin.py:7:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/capture_windows/plugin.json:2:  "plugin_id": "builtin.capture.windows",
./plugins/builtin/capture_windows/plugin.json:7:      "kind": "capture.source",
./autocapture_nx/kernel/crypto.py:16:HKDF_SALT = b"autocapture_nx"
./autocapture_nx/kernel/crypto.py:33:                from autocapture_nx.windows.dpapi import unprotect
./autocapture_nx/kernel/crypto.py:43:            from autocapture_nx.windows.dpapi import protect
./autocapture_nx/plugin_system/registry.py:11:from autocapture_nx.kernel.config import SchemaLiteValidator
./autocapture_nx/plugin_system/registry.py:12:from autocapture_nx.kernel.errors import PluginError
./autocapture_nx/plugin_system/registry.py:13:from autocapture_nx.kernel.hashing import sha256_directory, sha256_file
./autocapture_nx/plugin_system/registry.py:181:                module_name = f"autocapture_plugin_{plugin_id.replace('.', '_')}"
./autocapture/tools/retrieval_sensitivity.py:7:from autocapture_nx.plugin_system.api import PluginContext
./autocapture_nx/kernel/loader.py:9:from autocapture_nx.kernel.config import ConfigPaths, load_config, validate_config
./autocapture_nx/kernel/loader.py:10:from autocapture_nx.kernel.errors import ConfigError
./autocapture_nx/kernel/loader.py:11:from autocapture_nx.plugin_system.registry import PluginRegistry
./autocapture/rules/cli.py:10:from autocapture.rules.ledger import RulesLedger
./autocapture/rules/cli.py:11:from autocapture.rules.store import RulesStore
./autocapture/rules/cli.py:15:    parser = argparse.ArgumentParser(prog="autocapture rules")
./autocapture/storage/database.py:11:from autocapture_nx.kernel.crypto import EncryptedBlob, decrypt_bytes, derive_key, encrypt_bytes
./autocapture/storage/database.py:12:from autocapture_nx.kernel.keyring import KeyRing
./autocapture/tools/provenance_gate.py:8:from autocapture_nx.kernel.hashing import sha256_file
./plugins/builtin/audio_windows/plugin.py:1:"""Windows audio capture plugin using sounddevice (WASAPI loopback if available)."""
./plugins/builtin/audio_windows/plugin.py:9:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/audio_windows/plugin.py:19:        return {"capture.audio": self}
./plugins/builtin/audio_windows/plugin.py:35:            raise RuntimeError("Audio capture supported on Windows only")
./plugins/builtin/audio_windows/plugin.py:64:                    "event_type": "capture.audio",
./autocapture/storage/media_store.py:7:from autocapture.storage.blob_store import BlobStore
./autocapture/storage/media_store.py:8:from autocapture.storage.keys import load_keyring
./autocapture/storage/media_store.py:12:    from autocapture.config.defaults import default_config_paths
./autocapture/storage/media_store.py:13:    from autocapture.config.load import load_config
./autocapture/rules/ledger.py:9:from autocapture.core.jsonschema import validate_schema
./autocapture/rules/ledger.py:10:from autocapture.rules.schema import RULE_SCHEMA
./autocapture_nx/kernel/key_rotation.py:8:from autocapture_nx.kernel.canonical_json import dumps
./autocapture_nx/kernel/key_rotation.py:9:from autocapture_nx.kernel.crypto import derive_key
./autocapture_nx/kernel/key_rotation.py:10:from autocapture_nx.kernel.hashing import sha256_text
./autocapture/storage/archive.py:81:    from autocapture.config.defaults import default_config_paths
./autocapture/storage/archive.py:82:    from autocapture.config.load import load_config
./autocapture/storage/archive.py:90:    from autocapture.config.defaults import default_config_paths
./autocapture/storage/archive.py:91:    from autocapture.config.load import load_config
./autocapture/storage/blob_store.py:11:from autocapture_nx.kernel.crypto import EncryptedBlob, decrypt_bytes, derive_key, encrypt_bytes
./autocapture/storage/blob_store.py:12:from autocapture_nx.kernel.keyring import KeyRing
./autocapture/storage/blob_store.py:61:    from autocapture.config.defaults import default_config_paths
./autocapture/storage/blob_store.py:62:    from autocapture.config.load import load_config
./autocapture/storage/blob_store.py:63:    from autocapture.storage.keys import load_keyring
./plugins/builtin/anchor_basic/plugin.py:10:from autocapture_nx.kernel.canonical_json import dumps
./plugins/builtin/anchor_basic/plugin.py:11:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/anchor_basic/plugin.py:42:                from autocapture_nx.windows.dpapi import protect
./plugins/builtin/capture_stub/plugin.py:1:"""Stub capture plugin."""
./plugins/builtin/capture_stub/plugin.py:7:from autocapture_nx.plugin_system.api import PluginBase, PluginContext
./plugins/builtin/capture_stub/plugin.py:15:        return {"capture.source": self}
./autocapture/storage/keys.py:9:from autocapture_nx.kernel.keyring import KeyRing
./autocapture/tools/privacy_scanner.py:9:from autocapture_nx.plugin_system.api import PluginContext
./autocapture/tools/integrity_gate.py:8:from autocapture_nx.kernel.hashing import sha256_file
./autocapture/tools/conflict_gate.py:11:        conflict = importlib.import_module("autocapture.memory.conflict")
./plugins/builtin/audio_windows/plugin.json:2:  "plugin_id": "builtin.capture.audio.windows",
./plugins/builtin/audio_windows/plugin.json:7:      "kind": "capture.audio",
./autocapture_nx/kernel/keyring.py:13:from autocapture_nx.kernel.crypto import load_root_key
./autocapture_nx/kernel/keyring.py:26:        from autocapture_nx.windows.dpapi import protect
./autocapture_nx/kernel/keyring.py:39:        from autocapture_nx.windows.dpapi import unprotect
./autocapture/tools/coverage_gate.py:10:SPEC_PATH = Path("docs/spec/autocapture_mx_spec.yaml")
./plugins/builtin/capture_stub/plugin.json:2:  "plugin_id": "builtin.capture.stub",
./plugins/builtin/capture_stub/plugin.json:7:      "kind": "capture.source",
./autocapture/tools/pillar_gate.py:9:from autocapture.tools import (
./autocapture/retrieval/tiers.py:7:from autocapture.indexing.lexical import LexicalIndex
./autocapture/retrieval/tiers.py:8:from autocapture.indexing.vector import VectorIndex
./autocapture/retrieval/tiers.py:9:from autocapture.retrieval.fusion import rrf_fusion
./autocapture/retrieval/tiers.py:10:from autocapture.retrieval.rerank import Reranker
./autocapture/retrieval/tiers.py:11:from autocapture.retrieval.signals import RetrievalTrace
./autocapture/retrieval/tiers.py:46:    from autocapture.config.defaults import default_config_paths
./autocapture/retrieval/tiers.py:47:    from autocapture.config.load import load_config
./autocapture/retrieval/tiers.py:48:    from autocapture.indexing.lexical import LexicalIndex
./autocapture/retrieval/tiers.py:49:    from autocapture.indexing.vector import VectorIndex, LocalEmbedder
./autocapture/retrieval/tiers.py:50:    from autocapture.retrieval.rerank import Reranker

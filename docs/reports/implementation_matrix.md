# Implementation matrix (initial inventory)

Source: `docs/blueprints/autocapture_nx_blueprint.md`

Deterministic refresh/verify command:
- `tools/ivm.sh` (fails non-zero if misses remain)

Additional codex implementation matrix:
- `docs/reports/autocapture_prime_codex_implementation_matrix.md`
- `docs/reports/docs_md_txt_status_matrix.md` (docs md/txt status + deprecation matrix)
- `docs/reports/autocapture_prime_4pillars_optimization_matrix.md` (QRY/EVAL/SEC/CAP backlog closure status)
- `docs/reports/golden_pipeline_core_remediation_2026-02-18.md` (Sprint 0-5 remediation execution + validation log)

| ItemID | Phase | Title | Status | Evidence | Planned change summary | Test / gate |
| --- | --- | --- | --- | --- | --- | --- |
| FX001 | Phase 0: Fixture validation | CLI fixture pipeline for screenshot processing + query validation | complete | tools/run_fixture_pipeline.py; autocapture_nx/ux/fixture.py; tools/fixture_config_template.json; tests/test_fixture_pipeline_cli.py; tests/test_fixture_query_coverage.py | CLI harness ingests fixture screenshots via stub capture, runs idle processing, and validates query accuracy with citations plus plugin status reporting. | tests/test_fixture_pipeline_cli.py; tests/test_fixture_query_coverage.py |
| FX002 | Phase 0: Fixture validation | Model update + reprocess workflow (all plugins, audit, localhost-only) | complete | tools/reprocess_models.py; tools/reprocess_models.ps1; tools/reprocess_config_template.json; tools/model_prep.ps1; tools/model_manifest.json; tools/validate_model_manifest.py; plugins/builtin/ocr_rapid/plugin.py; plugins/builtin/ocr_rapid/plugin.json; plugins/builtin/vlm_deepseek_ocr2/*; plugins/builtin/vlm_qwen2_vl_7b/*; plugins/builtin/vlm_qwen2_vl_2b/*; plugins/builtin/vlm_llava_1_5_7b/*; plugins/builtin/vlm_minicpm_v_2_6/*; tests/test_model_manifest_validation.py; tests/test_model_identity_overrides.py; tests/test_runtime_fixture_override_audit.py; tests/test_reprocess_plugin_status.py | Deterministic model prep + lock output and reprocess runner with full plugin execution reporting, audits, and localhost-only enforcement. | tests/test_model_manifest_validation.py; tests/test_model_identity_overrides.py; tests/test_runtime_fixture_override_audit.py; tests/test_reprocess_plugin_status.py |
| I084 | Phase 0: Scaffolding and gates | Split heavy ML dependencies into optional extras | complete | pyproject.toml; plugins/builtin/*/plugin.json; tests/test_optional_deps_imports.py; tests/test_optional_dependency_imports.py | Optional extras gate heavy deps; import-time tests keep baseline imports light. | tests/test_optional_deps_imports.py; tests/test_optional_dependency_imports.py |
| I085 | Phase 0: Scaffolding and gates | Make resource paths package-safe (no CWD dependence) | complete | autocapture_nx/kernel/paths.py; tests/test_paths_package_safe.py; tests/test_packaged_resources.py | Path resolution uses importlib.resources fallback for packaged assets and works outside repo CWD. | tests/test_paths_package_safe.py; tests/test_packaged_resources.py |
| I086 | Phase 0: Scaffolding and gates | Use OS-appropriate default data/config dirs (platformdirs) | complete | autocapture_nx/kernel/paths.py; tests/test_platform_paths.py; config/default.json | Platformdirs-backed defaults applied; env overrides and doctor path checks validated. | tests/test_platform_paths.py |
| I087 | Phase 0: Scaffolding and gates | Package builtin plugins as package data | complete | pyproject.toml; tests/test_packaged_resources.py; tests/test_plugin_package_data.py | Builtin plugins included as package data; resource lookups and manifests verified. | tests/test_packaged_resources.py; tests/test_plugin_package_data.py |
| I088 | Phase 0: Scaffolding and gates | Add reproducible dependency lockfile (hash-locked) | complete | requirements.lock.json; tools/generate_dep_lock.py; tools/gate_deps_lock.py | Deterministic lockfile generated and verified against pyproject. | tools/gate_deps_lock.py |
| I089 | Phase 0: Scaffolding and gates | Add canonical-json safety tests for journal/ledger payloads | complete | tests/test_canonical_payloads.py; tests/test_canonical_json.py; tools/gate_canon.py | Canonical JSON validation covered by tests and enforced via gate. | tests/test_canonical_payloads.py; tools/gate_canon.py |
| I090 | Phase 0: Scaffolding and gates | Add concurrency tests for ledger/journal append correctness | complete | tests/test_ledger_journal_concurrency.py; tools/gate_concurrency.py | Multi-threaded append safety verified by concurrency gate. | tests/test_ledger_journal_concurrency.py; tools/gate_concurrency.py |
| I091 | Phase 0: Scaffolding and gates | Add golden chain test: ledger verify + anchor verify | complete | tests/test_ledger_anchor_golden.py; tools/gate_ledger.py | Golden ledger/anchor chain verification in tests and gate. | tests/test_ledger_anchor_golden.py; tools/gate_ledger.py |
| I092 | Phase 0: Scaffolding and gates | Add performance regression tests (capture latency/memory/query latency) | complete | tools/gate_perf.py; tools/run_all_tests.py | Perf gate covers capture throughput, memory ceiling, and query latency. | tools/gate_perf.py |
| I093 | Phase 0: Scaffolding and gates | Add security regression tests (DPAPI fail-closed, network guard, no raw egress) | complete | tools/gate_security.py; tests/test_network_guard.py; tests/test_plugin_network_block.py; tests/test_encrypted_store_fail_loud.py; tests/test_policy_gate.py | Security regression suite wired into gate. | tools/gate_security.py |
| I094 | Phase 0: Scaffolding and gates | Static analysis: ruff + typing + vuln scan | complete | tools/gate_static.py; tools/gate_vuln.py; pyproject.toml; tools/run_all_tests.py | Static analysis + vulnerability gate run via test harness. | tools/gate_static.py; tools/gate_vuln.py |
| I095 | Phase 0: Scaffolding and gates | Doctor validates locks, storage, anchors, and network policy | complete | autocapture_nx/kernel/loader.py; tools/gate_doctor.py; tests/test_doctor_locks.py; tests/test_doctor_report_schema.py | Doctor checks locks, storage paths, anchors, and network allowlist. | tools/gate_doctor.py; tests/test_doctor_locks.py |
| I126 | Phase 0: Scaffolding and gates | Make sha256_directory path sorting deterministic across OSes | complete | autocapture_nx/kernel/hashing.py; tests/test_directory_hashing.py; tests/test_hashing_directory_deterministic.py | Deterministic directory hashing verified across runs. | tests/test_directory_hashing.py; tests/test_hashing_directory_deterministic.py |
| I001 | Phase 1: Correctness + immutability blockers | Eliminate floats from journal/ledger payloads | complete | autocapture_nx/kernel/canonical_json.py; autocapture_nx/kernel/event_builder.py; plugins/builtin/journal_basic/plugin.py; plugins/builtin/ledger_basic/plugin.py; tests/test_canonical_payloads.py | Implemented canonical JSON enforcement for journal/ledger payloads (no floats/bytes). | tests/test_canonical_payloads.py; tests/test_canonical_json.py; tools/gate_canon.py |
| I002 | Phase 1: Correctness + immutability blockers | Make backpressure actually affect capture rate | complete | plugins/builtin/backpressure_basic/plugin.py; plugins/builtin/capture_windows/plugin.py; autocapture_nx/windows/win_capture.py; tests/test_backpressure.py; tests/test_capture_rate.py | Capture loop uses dynamic fps provider; backpressure adjusts fps/bitrate and logs rate changes. | tests/test_backpressure.py; tests/test_capture_rate.py |
| I003 | Phase 1: Correctness + immutability blockers | Stop buffering whole segments in RAM; stream segments | complete | plugins/builtin/capture_windows/plugin.py; plugins/builtin/storage_encrypted/plugin.py; plugins/builtin/storage_memory/plugin.py; tests/test_capture_streaming.py | Segment writer streams zip to media store via put_stream; no full-segment buffering. | tests/test_capture_streaming.py |
| I004 | Phase 1: Correctness + immutability blockers | Do not write to storage from realtime audio callback | complete | plugins/builtin/audio_windows/plugin.py; tests/test_audio_callback_queue.py | Audio callback enqueues buffers; writer thread handles storage IO. | tests/test_audio_callback_queue.py |
| I005 | Phase 1: Correctness + immutability blockers | Stop mutating primary evidence metadata during query | complete | autocapture_nx/kernel/query.py; autocapture_nx/kernel/metadata_store.py; tests/test_query_derived_records.py | Query writes derived records and preserves immutable evidence metadata. | tests/test_query_derived_records.py |
| I006 | Phase 1: Correctness + immutability blockers | Introduce globally unique run/session identifier; prefix all record IDs | complete | autocapture_nx/kernel/ids.py; autocapture_nx/kernel/event_builder.py; plugins/builtin/capture_windows/plugin.py; plugins/builtin/audio_windows/plugin.py; plugins/builtin/input_windows/plugin.py; plugins/builtin/window_metadata_windows/plugin.py; tests/test_journal_run_id.py; tests/test_run_state_entries.py | Run_id generated at boot and prefixed in record IDs; journal entries stamped. | tests/test_journal_run_id.py; tests/test_run_state_entries.py |
| I007 | Phase 1: Correctness + immutability blockers | Make ledger writing thread-safe | complete | plugins/builtin/ledger_basic/plugin.py; tests/test_ledger_journal_concurrency.py | Ledger append guarded by lock; hash chain verified under concurrency. | tests/test_ledger_journal_concurrency.py |
| I008 | Phase 1: Correctness + immutability blockers | Make journal writing thread-safe; centralize sequences | complete | plugins/builtin/journal_basic/plugin.py; tests/test_ledger_journal_concurrency.py | Journal append guarded by lock with centralized sequencing. | tests/test_ledger_journal_concurrency.py |
| I009 | Phase 1: Correctness + immutability blockers | Fail closed if DPAPI protection fails when encryption_required | complete | autocapture_nx/kernel/keyring.py; plugins/builtin/storage_encrypted/plugin.py; tests/test_encrypted_store_fail_loud.py | DPAPI protection required when encryption_required; decrypt failures raise. | tests/test_encrypted_store_fail_loud.py |
| I010 | Phase 1: Correctness + immutability blockers | Sort all store keys deterministically | complete | plugins/builtin/storage_encrypted/plugin.py; plugins/builtin/storage_memory/plugin.py; plugins/builtin/storage_sqlcipher/plugin.py; tests/test_storage_encrypted.py | Store key listings are sorted deterministically. | tests/test_storage_encrypted.py |
| I011 | Phase 1: Correctness + immutability blockers | Use monotonic clocks for segment duration | complete | plugins/builtin/capture_windows/plugin.py; tests/test_capture_monotonic.py | Segment duration uses monotonic clock. | tests/test_capture_monotonic.py |
| I012 | Phase 1: Correctness + immutability blockers | Align default config with implemented capture backend | complete | config/default.json; plugins/builtin/capture_windows/plugin.py; tests/test_capture_backend_default.py | Default capture backend set to mss; unsupported backend rejected. | tests/test_capture_backend_default.py |
| I013 | Phase 1: Correctness + immutability blockers | Remove hard-coded model paths; config-driven + portable | complete | config/default.json; plugins/builtin/embedder_stub/plugin.py; plugins/builtin/reranker_stub/plugin.py; plugins/builtin/vlm_stub/plugin.py; tests/test_model_paths_config.py | Model paths are config-driven and default to None/relative (no hard-coded host paths). | tests/test_model_paths_config.py |
| I014 | Phase 1: Correctness + immutability blockers | Enforce plugin compat.requires_kernel / schema versions | complete | autocapture_nx/plugin_system/registry.py; tests/test_plugin_loader.py | Registry enforces compat.requires_kernel and requires_schema_versions. | tests/test_plugin_loader.py |
| I015 | Phase 1: Correctness + immutability blockers | Verify contract lock at boot/doctor | complete | autocapture_nx/kernel/loader.py; tests/test_contract_pins.py | Boot verifies contract lock integrity. | tests/test_contract_pins.py |
| I096 | Phase 1: Correctness + immutability blockers | Fail loud on decrypt errors when encryption_required | complete | autocapture_nx/kernel/keyring.py; plugins/builtin/storage_encrypted/plugin.py; plugins/builtin/storage_sqlcipher/plugin.py; tests/test_encrypted_store_fail_loud.py | Decrypt errors fail loud when encryption_required. | tests/test_encrypted_store_fail_loud.py |
| I097 | Phase 1: Correctness + immutability blockers | Add record type fields everywhere | complete | autocapture_nx/kernel/metadata_store.py; plugins/builtin/capture_windows/plugin.py; plugins/builtin/window_metadata_windows/plugin.py; tests/test_metadata_record_type.py | record_type required in metadata; capture/window records include it. | tests/test_metadata_record_type.py |
| I098 | Phase 1: Correctness + immutability blockers | Add unified EventBuilder helper | complete | autocapture_nx/kernel/event_builder.py; autocapture_nx/kernel/loader.py; plugins/builtin/capture_windows/plugin.py; plugins/builtin/audio_windows/plugin.py; tests/test_event_builder.py | EventBuilder centralizes journal/ledger emission for plugins. | tests/test_event_builder.py |
| I099 | Phase 1: Correctness + immutability blockers | Stamp every journal event with run_id | complete | plugins/builtin/journal_basic/plugin.py; autocapture_nx/kernel/event_builder.py; tests/test_journal_run_id.py | Journal events stamped with run_id and prefixed event_id. | tests/test_journal_run_id.py |
| I100 | Phase 1: Correctness + immutability blockers | Cache policy snapshot hashing per run | complete | autocapture_nx/kernel/event_builder.py; tests/test_event_builder.py | Policy snapshot hash cached per run. | tests/test_event_builder.py |
| I123 | Phase 1: Correctness + immutability blockers | Write kernel boot ledger entry system.start | complete | autocapture_nx/kernel/loader.py; tests/test_run_state_entries.py | Boot writes system.start ledger entry. | tests/test_run_state_entries.py |
| I124 | Phase 1: Correctness + immutability blockers | Write kernel shutdown ledger entry system.stop | complete | autocapture_nx/kernel/loader.py; tests/test_run_state_entries.py | Shutdown writes system.stop ledger entry. | tests/test_run_state_entries.py |
| I125 | Phase 1: Correctness + immutability blockers | Write crash ledger entry on next startup | complete | autocapture_nx/kernel/loader.py; tests/test_run_state_entries.py | Next boot writes system.crash_detected if prior run not clean. | tests/test_run_state_entries.py |
| I016 | Phase 2: Capture pipeline refactor | Split capture into grab → encode/pack → encrypt/write pipeline | complete | autocapture_nx/capture/pipeline.py; plugins/builtin/capture_windows/plugin.py | Capture pipeline runs grab/encode/write stages with bounded queues. | tests/test_capture_streaming.py |
| I017 | Phase 2: Capture pipeline refactor | Bounded queues with explicit drop policies | complete | autocapture_nx/capture/queues.py; autocapture_nx/capture/pipeline.py | Bounded queues with drop_oldest policy and drop events recorded. | tests/test_capture_drop_event.py |
| I018 | Phase 2: Capture pipeline refactor | Replace zip-of-JPEG with real video container for primary artifact | complete | autocapture_nx/capture/pipeline.py | Primary segments use avi_mjpeg/ffmpeg_mp4; zip kept as legacy. | tests/test_capture_streaming.py; tests/test_capture_zip_container.py |
| I019 | Phase 2: Capture pipeline refactor | Add GPU-accelerated capture/encode backend (NVENC/DD) | complete | autocapture_nx/capture/pipeline.py; autocapture_nx/windows/win_capture.py | DXCAM backend with NVENC encode via ffmpeg_mp4 when configured. | tests/test_capture_container_resolution.py |
| I020 | Phase 2: Capture pipeline refactor | Record segment start/end timestamps | complete | autocapture_nx/capture/pipeline.py | Segment metadata includes ts_start_utc/ts_end_utc and duration. | tests/test_capture_monotonic.py |
| I021 | Phase 2: Capture pipeline refactor | Record capture parameters per segment | complete | autocapture_nx/capture/pipeline.py | Segment metadata includes capture parameters and achieved metrics. | tests/test_capture_streaming.py |
| I022 | Phase 2: Capture pipeline refactor | Correlate frames with active window via synchronized timeline | complete | plugins/builtin/window_metadata_windows/plugin.py; autocapture_nx/capture/pipeline.py | Window timeline records rect+monitor; segments include window_ref. | tests/test_capture_window_input_refs.py; tests/test_monitor_selection.py |
| I023 | Phase 2: Capture pipeline refactor | Add cursor/input correlation timeline references | complete | plugins/builtin/input_windows/plugin.py; plugins/builtin/cursor_windows/plugin.py; plugins/builtin/retrieval_basic/plugin.py; autocapture_nx/capture/pipeline.py | Input batches and cursor samples stored as timelines; retrieval attaches input_refs and cursor_refs for time windows. | tests/test_input_batching.py; tests/test_capture_window_input_refs.py; tests/test_retrieval_timeline_refs.py; tests/test_cursor_timeline_plugin.py |
| I024 | Phase 2: Capture pipeline refactor | Disk pressure degrades capture quality before stopping | complete | autocapture_nx/capture/pipeline.py | Disk pressure reduces fps/bitrate before stopping; emits events. | tests/test_capture_disk_pressure_degrade.py |
| I025 | Phase 2: Capture pipeline refactor | Atomic segment writes (temp + os.replace) | complete | autocapture_nx/capture/pipeline.py | Segment writer uses temp files and os.replace before store write. | tests/test_capture_streaming.py |
| I105 | Phase 2: Capture pipeline refactor | If keeping zips, use ZIP_STORED for JPEG frames | complete | autocapture_nx/capture/pipeline.py | ZIP_STORED used for legacy zip segments. | tests/test_capture_zip_container.py |
| I106 | Phase 2: Capture pipeline refactor | If keeping zips, stream ZipFile writes to a real file | complete | autocapture_nx/capture/pipeline.py | ZipFile writes to on-disk temp file, then replace. | tests/test_capture_zip_container.py |
| I107 | Phase 2: Capture pipeline refactor | Batch input events to reduce write overhead | complete | plugins/builtin/input_windows/plugin.py; plugins/builtin/journal_basic/plugin.py | Input events batched into input.batch; journal supports append_batch. | tests/test_input_batching.py; tests/test_journal_batch.py |
| I109 | Phase 2: Capture pipeline refactor | Add WASAPI loopback option for system audio capture | complete | plugins/builtin/audio_windows/plugin.py | Audio mode supports loopback via WASAPI when configured. | tests/test_audio_encoding.py |
| I110 | Phase 2: Capture pipeline refactor | Store audio as PCM/FLAC/Opus derived artifact | complete | plugins/builtin/audio_windows/plugin.py | Audio stored as derived artifacts with PCM/WAV; optional flac/opus via ffmpeg. | tests/test_audio_encoding.py |
| I111 | Phase 2: Capture pipeline refactor | Normalize active window process paths (device → drive paths) | complete | autocapture_nx/windows/win_window.py; plugins/builtin/window_metadata_windows/plugin.py | Window process paths normalized; raw paths preserved with deterministic hash. | tests/test_window_path_normalization.py; tests/test_window_metadata_payload.py |
| I112 | Phase 2: Capture pipeline refactor | Capture window.rect and monitor mapping | complete | autocapture_nx/windows/win_window.py; plugins/builtin/window_metadata_windows/plugin.py | Window metadata includes rect and monitor info. | tests/test_monitor_selection.py |
| I113 | Phase 2: Capture pipeline refactor | Optional cursor position+shape capture | complete | autocapture_nx/windows/win_cursor.py; plugins/builtin/cursor_windows/plugin.py; autocapture_nx/capture/pipeline.py | Optional cursor snapshots on segments plus timeline capture when enabled. | tests/test_capture_cursor_metadata.py; tests/test_cursor_timeline_plugin.py |
| I026 | Phase 3: Storage scaling + durability | Default to SQLCipher for metadata when available | complete | plugins/builtin/storage_sqlcipher/plugin.py; config/default.json | SQLCipher metadata store selected when available; encrypted JSON fallback otherwise. | tests/test_sqlcipher_indexes.py |
| I027 | Phase 3: Storage scaling + durability | Add DB indexes on ts_utc, record_type, run_id | complete | plugins/builtin/storage_sqlcipher/plugin.py | SQLCipher schema creates indexes for ts_utc, record_type, run_id. | tests/test_sqlcipher_indexes.py |
| I028 | Phase 3: Storage scaling + durability | Store media in binary encrypted format (not base64 JSON) | complete | plugins/builtin/storage_encrypted/plugin.py; plugins/builtin/storage_sqlcipher/plugin.py | Media blobs use binary headers (BLOB/STREAM magic) with AES-GCM payloads. | tests/test_encrypted_blob_store.py |
| I029 | Phase 3: Storage scaling + durability | Stream encryption (avoid whole-segment in memory) | complete | plugins/builtin/storage_encrypted/plugin.py; autocapture_nx/capture/pipeline.py | Stream writer encrypts chunks; pipeline uses put_stream when available. | tests/test_encrypted_blob_store.py; tests/test_capture_streaming.py |
| I030 | Phase 3: Storage scaling + durability | Immutability/versioning in stores (put_new vs put_replace) | complete | plugins/builtin/storage_encrypted/plugin.py; plugins/builtin/storage_sqlcipher/plugin.py; autocapture_nx/kernel/metadata_store.py | put_new for immutable records; put_replace available for non-evidence; evidence overwrites blocked. | tests/test_metadata_immutability.py |
| I031 | Phase 3: Storage scaling + durability | Make record ID encoding reversible (no lossy mapping) | complete | autocapture_nx/kernel/ids.py; autocapture_nx/processing/idle.py; autocapture_nx/kernel/query.py; autocapture_nx/capture/pipeline.py | Reversible base64 encoding for filesystem-safe IDs; derived IDs use encoded source. | tests/test_record_id_encoding.py; tests/test_query_derived_records.py |
| I032 | Phase 3: Storage scaling + durability | Shard media/metadata directories by date/run | complete | plugins/builtin/storage_encrypted/plugin.py | Storage sharded by run_id/date with derived vs evidence subdirs. | tests/test_encrypted_blob_store.py |
| I033 | Phase 3: Storage scaling + durability | Add per-run storage manifest records | complete | autocapture_nx/kernel/loader.py | Run manifests recorded at start and final with config/lock/policy and platform data. | tests/test_run_manifest.py |
| I034 | Phase 3: Storage scaling + durability | Configurable fsync policy (critical vs bulk) | complete | plugins/builtin/storage_encrypted/plugin.py; plugins/builtin/journal_basic/plugin.py; plugins/builtin/ledger_basic/plugin.py | fsync policy applied to storage writes; journal+ledger always fsync. | tests/test_run_manifest.py |
| I101 | Phase 3: Storage scaling + durability | Add content_hash to metadata for every media put | complete | autocapture_nx/capture/pipeline.py; plugins/builtin/audio_windows/plugin.py; plugins/builtin/input_windows/plugin.py | content_hash stored for segments/audio/input logs. | tests/test_capture_content_hash.py; tests/test_capture_streaming.py |
| I102 | Phase 3: Storage scaling + durability | Track partial failures explicitly in journal/ledger | complete | autocapture_nx/capture/pipeline.py | Partial failures emit capture.partial_failure journal/ledger events. | tests/test_capture_partial_failure.py |
| I103 | Phase 3: Storage scaling + durability | Add segment sealing ledger entry after successful write | complete | autocapture_nx/capture/pipeline.py | Segment lifecycle includes explicit segment.sealed ledger entry. | tests/test_capture_streaming.py |
| I104 | Phase 3: Storage scaling + durability | Add startup recovery scanner to reconcile stores | complete | autocapture_nx/kernel/loader.py | Startup recovery removes temp artifacts and records storage.recovery events. | tests/test_storage_recovery_scanner.py |
| I108 | Phase 3: Storage scaling + durability | Add compact binary input log (derived) + JSON summary | complete | plugins/builtin/input_windows/plugin.py | Input batches persist compact binary log + summary metadata. | tests/test_input_batching.py |
| I128 | Phase 3: Storage scaling + durability | Tooling to migrate data_dir safely (copy+verify, no delete) | complete | autocapture/storage/migrate.py; autocapture_nx/cli.py | storage migrate copies+verifies without deleting source; optional config update. | tests/test_storage_migrate.py |
| I129 | Phase 3: Storage scaling + durability | Disk usage forecasting (days remaining) + alerts | complete | autocapture/storage/pressure.py; autocapture/storage/forecast.py; autocapture/runtime/conductor.py; autocapture_nx/kernel/loader.py; autocapture_nx/cli.py | Disk pressure telemetry + forecast with evidence/derived trends and alerts. | tests/test_storage_forecast.py |
| I130 | Phase 3: Storage scaling + durability | Storage compaction for derived artifacts only | complete | autocapture/storage/compaction.py; autocapture_nx/kernel/metadata_store.py; autocapture_nx/cli.py | Derived-only compaction removes derived records and rebuildable indexes. | tests/test_storage_compaction.py |
| I035 | Phase 4: Retrieval + provenance + citations | Replace full-scan query with tiered indexed retrieval | complete | plugins/builtin/retrieval_basic/plugin.py; autocapture/indexing/lexical.py; autocapture/indexing/vector.py | Tiered lexical/vector retrieval with deterministic fusion and fallbacks. | tests/test_retrieval_indexed_hits.py |
| I036 | Phase 4: Retrieval + provenance + citations | Deterministic retrieval ordering (stable sort keys) | complete | plugins/builtin/retrieval_basic/plugin.py | Retrieval results sorted by score, timestamp, record_type, record_id. | tests/test_retrieval_indexed_hits.py |
| I037 | Phase 4: Retrieval + provenance + citations | Candidate-first extraction (retrieve then extract) | complete | autocapture_nx/kernel/query.py | Extraction operates only on candidate IDs from retrieval/time window. | tests/test_extract_on_demand_candidates.py; tests/test_extract_on_demand_ledger.py |
| I038 | Phase 4: Retrieval + provenance + citations | Derived artifact records for OCR/VLM outputs | complete | autocapture_nx/kernel/derived_records.py; autocapture_nx/kernel/query.py; autocapture_nx/processing/idle.py | Derived text records include span_ref, content_hash, payload_hash. | tests/test_derived_records.py; tests/test_query_derived_records.py |
| I039 | Phase 4: Retrieval + provenance + citations | Ledger query executions (inputs/outputs) | complete | autocapture_nx/kernel/query.py; autocapture_nx/kernel/event_builder.py | Query execution writes ledger entry with inputs/outputs and trace. | tests/test_query_ledger_entry.py |
| I040 | Phase 4: Retrieval + provenance + citations | Ledger extraction operations (inputs/outputs) | complete | autocapture_nx/kernel/query.py | Derived extraction writes ledger entry linking evidence→derived (and edges). | tests/test_extract_on_demand_ledger.py |
| I041 | Phase 4: Retrieval + provenance + citations | Citations point to immutable evidence IDs + spans | complete | contracts/citation.schema.json; plugins/builtin/citation_basic/plugin.py; autocapture_nx/kernel/query.py | Citations include evidence hashes, span_kind, ledger/anchor refs. | tests/test_citation_validator_metadata.py |
| I042 | Phase 4: Retrieval + provenance + citations | Citation resolver validates hashes/anchors/spans | complete | plugins/builtin/citation_basic/plugin.py | Resolver validates evidence hashes, span bounds, ledger + anchors. | tests/test_citation_validator_metadata.py |
| I043 | Phase 4: Retrieval + provenance + citations | Fail closed if citations do not resolve | complete | plugins/builtin/answer_basic/plugin.py | Answer builder downgrades state when citations invalid. | tests/test_answer_builder.py |
| I065 | Phase 4: Retrieval + provenance + citations | Define canonical evidence model (EvidenceObject) | complete | contracts/evidence.schema.json; autocapture_nx/kernel/metadata_store.py | Evidence records require run_id and content_hash/payload_hash. | tests/test_metadata_record_type.py |
| I066 | Phase 4: Retrieval + provenance + citations | Hash everything that matters (media/metadata/derived) | complete | autocapture_nx/capture/pipeline.py; autocapture_nx/kernel/derived_records.py; plugins/builtin/window_metadata_windows/plugin.py | Evidence + derived records include content/payload hashes. | tests/test_capture_content_hash.py; tests/test_derived_records.py |
| I067 | Phase 4: Retrieval + provenance + citations | Ledger every state transition | complete | autocapture_nx/capture/pipeline.py | Capture transition events (fallbacks, drops, pressure, degrade/restore) are ledgered alongside journal. | tests/test_capture_drop_event.py; tests/test_capture_disk_pressure_degrade.py |
| I068 | Phase 4: Retrieval + provenance + citations | Anchor on schedule (N entries or M minutes) | complete | autocapture_nx/kernel/event_builder.py; config/default.json | Anchor cadence configured and enforced via EventBuilder schedule. | tests/test_anchor_schedule.py; tests/test_ledger_anchor_golden.py |
| I069 | Phase 4: Retrieval + provenance + citations | Immutable per-run manifest (config+locks+versions) | complete | autocapture_nx/kernel/loader.py | Run manifest records config hashes, locks, plugins, packages. | tests/test_run_manifest.py |
| I070 | Phase 4: Retrieval + provenance + citations | Citation objects carry verifiable pointers | complete | contracts/citation.schema.json; plugins/builtin/citation_basic/plugin.py | Citations require evidence hash + ledger/anchor refs + schema_version. | tests/test_citation_validator_metadata.py |
| I071 | Phase 4: Retrieval + provenance + citations | Citation resolver CLI/API | complete | autocapture_nx/cli.py; autocapture/web/routes/citations.py; autocapture/ux/facade.py | CLI/API expose citation resolve + verify. | tests/test_citation_resolver_api.py |
| I072 | Phase 4: Retrieval + provenance + citations | Metadata immutable by default; derived never overwrites | complete | autocapture_nx/kernel/metadata_store.py | Immutable store blocks evidence/derived overwrites by default. | tests/test_metadata_immutability.py |
| I073 | Phase 4: Retrieval + provenance + citations | Persist derivation graphs (parent→child links) | complete | autocapture_nx/kernel/derived_records.py; autocapture_nx/kernel/query.py | Derivation edges stored as derived.graph.edge records. | tests/test_derived_records.py |
| I074 | Phase 4: Retrieval + provenance + citations | Record model identity for ML outputs | complete | autocapture_nx/kernel/derived_records.py | Derived records store model_id + model_digest + parameters. | tests/test_derived_records.py |
| I075 | Phase 4: Retrieval + provenance + citations | Deterministic text normalization before hashing | complete | autocapture/core/hashing.py; autocapture_nx/kernel/derived_records.py | Text normalized before hashing/indexing. | tests/test_derived_records.py |
| I076 | Phase 4: Retrieval + provenance + citations | Proof bundles export (evidence + ledger slice + anchors) | complete | autocapture_nx/kernel/proof_bundle.py; autocapture_nx/cli.py; autocapture/ux/facade.py | Proof bundle exporter includes metadata, ledger slice, anchors, blobs. | tests/test_proof_bundle_replay.py |
| I077 | Phase 4: Retrieval + provenance + citations | Replay mode validates citations without model calls | complete | autocapture_nx/kernel/replay.py; autocapture_nx/cli.py | Replay validates ledger/citations using bundle data. | tests/test_proof_bundle_replay.py |
| I118 | Phase 4: Retrieval + provenance + citations | Index versioning for retrieval reproducibility | complete | autocapture/indexing/manifest.py; autocapture/indexing/lexical.py; autocapture/indexing/vector.py; plugins/builtin/retrieval_basic/plugin.py | Index manifests record version + digest and query traces include identity. | tests/test_index_manifest.py |
| I127 | Phase 4: Retrieval + provenance + citations | Record python/OS/package versions into run manifest | complete | autocapture_nx/kernel/loader.py | Run manifest captures platform + package versions and fingerprint. | tests/test_run_manifest.py |
| I044 | Phase 5: Scheduler/governor | Real scheduler plugin gates heavy work on user activity | complete | autocapture/runtime/conductor.py; autocapture/runtime/scheduler.py; autocapture/runtime/governor.py; autocapture/runtime/budgets.py; plugins/builtin/runtime_scheduler/plugin.py; plugins/builtin/runtime_governor/plugin.py | Scheduler plugin governs heavy job admission; conductor uses governor-backed scheduler for idle/research work. | tests/test_runtime_conductor.py; tests/test_governor_gating.py |
| I045 | Phase 5: Scheduler/governor | Input tracker exposes activity signals (not only journal) | complete | plugins/builtin/input_windows/plugin.py | Input tracker emits aggregated activity signals to governor/scheduler. | tests/test_input_activity_signal.py |
| I046 | Phase 5: Scheduler/governor | Capture emits telemetry (queues, drops, lag, CPU) | complete | autocapture_nx/capture/pipeline.py; autocapture_nx/kernel/telemetry.py; autocapture/web/routes/metrics.py | Capture pipeline emits telemetry.capture and metrics endpoint exposes latest telemetry snapshots. | tests/test_capture_telemetry.py; tests/test_metrics_endpoint_exposes_counters.py |
| I047 | Phase 5: Scheduler/governor | Governor outputs feed backpressure and job admission | complete | autocapture_nx/capture/pipeline.py; autocapture/runtime/conductor.py | Governor decisions drive capture activity mode and scheduler admission for enrichment jobs. | tests/test_capture_governor_influence.py; tests/test_runtime_conductor.py |
| I048 | Phase 5: Scheduler/governor | Immediate ramp down on user input (cancel/deprioritize heavy jobs) | complete | autocapture/runtime/governor.py; autocapture/runtime/scheduler.py; autocapture/runtime/conductor.py; autocapture_nx/processing/idle.py | Governor preemption honors suspend deadline; idle work checks should_abort between chunks. | tests/test_governor_gating.py; tests/test_runtime_conductor.py |
| I116 | Phase 5: Scheduler/governor | Model execution budgets per idle window | complete | autocapture/runtime/governor.py; autocapture/runtime/scheduler.py; autocapture/runtime/budgets.py; autocapture/runtime/conductor.py; autocapture_nx/processing/idle.py | Scheduler enforces idle budgets per window and per job; idle processing consumes budgeted chunks. | tests/test_governor_gating.py; tests/test_idle_processor_chunking.py |
| I117 | Phase 5: Scheduler/governor | Preemption/chunking for long jobs | complete | autocapture/runtime/conductor.py; autocapture_nx/processing/idle.py; autocapture/research/runner.py | Long-running idle/research work is chunked with checkpoints and resumable execution. | tests/test_idle_processor_chunking.py |
| I049 | Phase 6: Security + egress hardening | Egress gateway must be subprocess-hosted; kernel network-denied | complete | autocapture_nx/kernel/loader.py; autocapture_nx/plugin_system/runtime.py; autocapture_nx/plugin_system/host_runner.py; autocapture_nx/plugin_system/registry.py; config/default.json | Kernel sets global network deny by default; egress gateway forced to subprocess hosting; host runner enforces deny unless explicitly allowed. | tests/test_kernel_network_deny.py; tests/test_plugin_network_block.py; tests/test_egress_gateway.py |
| I050 | Phase 6: Security + egress hardening | Minimize inproc_allowlist; prefer subprocess hosting | complete | config/default.json; autocapture_nx/plugin_system/registry.py | Inproc allowlist tightened and requires justification; network-permitted plugins must be subprocess-hosted. | tests/test_plugin_network_block.py |
| I051 | Phase 6: Security + egress hardening | Capability bridging for subprocess plugins (real capability plumbing) | complete | autocapture_nx/plugin_system/runtime.py; autocapture_nx/plugin_system/host_runner.py; autocapture_nx/plugin_system/registry.py | Subprocess host bridges only declared capabilities; inproc guard enforces capability access. | tests/test_subprocess_capability_bridging.py; tests/test_plugin_capability_policies.py |
| I052 | Phase 6: Security + egress hardening | Enforce least privilege per plugin manifest | complete | contracts/plugin_manifest.schema.json; plugins/builtin/*/plugin.json; autocapture_nx/plugin_system/registry.py | required_capabilities required by schema and enforced at load time. | tests/test_plugin_capability_policies.py; tests/test_plugin_loader.py |
| I053 | Phase 6: Security + egress hardening | Enforce filesystem permission policy declared by plugins | complete | autocapture_nx/plugin_system/registry.py; autocapture_nx/plugin_system/host_runner.py; autocapture_nx/plugin_system/runtime.py | Filesystem policy enforced in host runner and guarded by runtime wrappers. | tests/test_plugin_filesystem_policy.py |
| I054 | Phase 6: Security + egress hardening | Strengthen Windows job object restrictions (limits) | complete | autocapture_nx/windows/win_sandbox.py; autocapture_nx/plugin_system/host.py; config/default.json | Job object limits and kill-on-close applied to subprocess plugins with configurable limits. | tests/test_win_sandbox_limits.py |
| I055 | Phase 6: Security + egress hardening | Sanitize subprocess env; pin caches; disable proxies | complete | autocapture_nx/plugin_system/host.py | Subprocess env sanitizer clears proxy vars, pins cache dirs, and sets offline flags. | tests/test_plugin_env_sanitization.py |
| I056 | Phase 6: Security + egress hardening | Plugin RPC timeouts and watchdogs | complete | autocapture_nx/plugin_system/host.py | RPC timeouts trigger watchdog restarts and surface timeout errors. | tests/test_plugin_watchdog_restart.py |
| I057 | Phase 6: Security + egress hardening | Max message size limits in plugin RPC protocol | complete | autocapture_nx/plugin_system/host.py; autocapture_nx/plugin_system/host_runner.py | RPC payload size limits enforced on both host and runner. | tests/test_plugin_rpc_size_limit.py |
| I058 | Phase 6: Security + egress hardening | Harden hashing against symlinks / filesystem nondeterminism | complete | autocapture_nx/kernel/hashing.py | Directory hashing rejects symlink entries to avoid nondeterminism. | tests/test_hashing_symlink.py |
| I059 | Phase 6: Security + egress hardening | Secure vault file permissions (Windows ACLs) | complete | autocapture_nx/windows/acl.py; autocapture_nx/kernel/crypto.py; autocapture_nx/kernel/keyring.py | Vault files and directories hardened via ACL/permission enforcement on create. | tests/test_acl_hardening.py |
| I060 | Phase 6: Security + egress hardening | Separate keys by purpose (metadata/media/tokenization/anchor) | complete | autocapture_nx/kernel/keyring.py; autocapture/storage/blob_store.py; autocapture/storage/database.py; autocapture/storage/keys.py; autocapture/storage/sqlcipher.py; plugins/builtin/anchor_basic/plugin.py; plugins/builtin/egress_sanitizer/plugin.py; plugins/builtin/storage_encrypted/plugin.py | Keyring v2 stores per-purpose keysets; call sites request specific purpose keys. | tests/test_keyring_purpose_rotation.py; tests/test_key_export_import_roundtrip.py; tests/test_keyring_status.py |
| I061 | Phase 6: Security + egress hardening | Anchor signing (HMAC/signature) with separate key domain | complete | plugins/builtin/anchor_basic/plugin.py; autocapture_nx/kernel/keyring.py; autocapture/pillars/citable.py | Anchors are HMAC-signed with the dedicated anchor key domain. | tests/test_anchor.py |
| I062 | Phase 6: Security + egress hardening | Add verify commands (ledger/anchors/evidence) | complete | autocapture_nx/cli.py; autocapture/pillars/citable.py; autocapture/ux/facade.py; autocapture/web/routes/verify.py; plugins/builtin/ledger_basic/plugin.py; plugins/builtin/journal_basic/plugin.py | Verify commands added to CLI/API/UX facade for ledger, anchors, and evidence integrity. | tests/test_verify_integrity.py |
| I063 | Phase 6: Security + egress hardening | Audit security events in ledger (key rotations, lock updates, config) | complete | autocapture_nx/kernel/key_rotation.py; autocapture_nx/kernel/loader.py; plugins/builtin/ledger_basic/plugin.py | Security events emitted on key rotation and config/lock changes at boot. | tests/test_security_ledger_events.py; tests/test_key_rotation.py |
| I064 | Phase 6: Security + egress hardening | Dependency pinning + hash checking (supply chain) | complete | autocapture_nx/kernel/loader.py; requirements.lock.json | Doctor reports dependency hash + version drift against lockfile. |  |
| I119 | Phase 6: Security + egress hardening | Persist entity-tokenizer key id/version; version tokenization | complete | plugins/builtin/egress_sanitizer/plugin.py; plugins/builtin/storage_sqlcipher/plugin.py; plugins/builtin/storage_encrypted/plugin.py; plugins/builtin/storage_memory/plugin.py | Tokenizer key id + version persisted with entity map records. | tests/test_tokenizer_versioning.py |
| I120 | Phase 6: Security + egress hardening | Ledger sanitized egress packets (hash + schema version) | complete | plugins/builtin/egress_gateway/plugin.py; autocapture_nx/kernel/egress_approvals.py | Egress gateway logs sanitized packet hash + schema version to ledger. | tests/test_egress_packet_ledger.py |
| I078 | Phase 7: FastAPI UX facade + Web Console | FastAPI UX facade as canonical interface | complete | autocapture_nx/ux/facade.py; autocapture/web/api.py; autocapture/web/routes | UX facade is the canonical interface for API + CLI operations. |  |
| I079 | Phase 7: FastAPI UX facade + Web Console | CLI parity: CLI calls shared UX facade functions | complete | autocapture_nx/cli.py; autocapture_nx/ux/facade.py | CLI routes through UX facade (no direct kernel calls). |  |
| I080 | Phase 7: FastAPI UX facade + Web Console | Web Console UI (status/timeline/query/proof/plugins/keys) | complete | autocapture/web/ui; autocapture/web/api.py | FastAPI serves the Web Console with status, timeline, query, verify, plugins, keys, and config views. |  |
| I081 | Phase 7: FastAPI UX facade + Web Console | Alerts panel driven by journal events | complete | autocapture_nx/kernel/alerts.py; autocapture/web/routes/alerts.py; autocapture/web/ui | Alerts derived from journal events and surfaced in the UI. |  |
| I082 | Phase 7: FastAPI UX facade + Web Console | Local-only auth boundary (bind localhost + token) | complete | autocapture/web/auth.py; autocapture_nx/kernel/auth.py; config/default.json | Token-based auth with local-only enforcement and protected token storage. |  |
| I083 | Phase 7: FastAPI UX facade + Web Console | Websocket for live telemetry | complete | autocapture/web/routes/telemetry.py; autocapture/web/ui | Websocket streams telemetry/scheduler state with configurable interval. |  |
| I121 | Phase 7: FastAPI UX facade + Web Console | Egress approval workflow in UI | complete | autocapture_nx/kernel/egress_approvals.py; autocapture/web/routes/egress.py; autocapture/web/ui | UI and API provide explicit egress approval workflow with short-lived tokens. |  |
| I114 | Phase 8: Optional expansion plugins | Clipboard capture plugin (local-only, append-only) | complete | plugins/builtin/clipboard_windows | Clipboard capture plugin records append-only evidence entries. | tests/test_clipboard_capture.py; tests/test_optional_plugins_disabled.py |
| I115 | Phase 8: Optional expansion plugins | File activity capture plugin (USN journal / watcher) | complete | plugins/builtin/file_activity_windows | File activity plugin records append-only timeline events (polling implementation). | tests/test_file_activity_capture.py; tests/test_optional_plugins_disabled.py |
| I122 | Phase 8: Optional expansion plugins | Plugin hot-reload with hash verification and safe swap | complete | autocapture_nx/plugin_system/registry.py; autocapture_nx/kernel/loader.py | Hot reload swaps non-core plugins only when lockfile hashes verify; old instances are closed. | tests/test_plugin_hot_reload_nx.py |
